{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport './media/editor.css';\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable, dispose } from '../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { Configuration } from '../config/configuration.js';\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { View } from '../view/viewImpl.js';\nimport { ViewUserInputEvents } from '../view/viewUserInputEvents.js';\nimport { filterValidationDecorations } from '../../common/config/editorOptions.js';\nimport { Cursor } from '../../common/controller/cursor.js';\nimport { CursorColumns } from '../../common/controller/cursorCommon.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { InternalEditorAction } from '../../common/editorAction.js';\nimport * as editorCommon from '../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport * as modes from '../../common/modes.js';\nimport { editorUnnecessaryCodeBorder, editorUnnecessaryCodeOpacity } from '../../common/view/editorColorRegistry.js';\nimport { editorErrorBorder, editorErrorForeground, editorHintBorder, editorHintForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, editorForeground, editorErrorBackground, editorInfoBackground, editorWarningBackground } from '../../../platform/theme/common/colorRegistry.js';\nimport { ViewModel } from '../../common/viewModel/viewModelImpl.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { withNullAsUndefined } from '../../../base/common/types.js';\nimport { MonospaceLineBreaksComputerFactory } from '../../common/viewModel/monospaceLineBreaksComputer.js';\nimport { DOMLineBreaksComputerFactory } from '../view/domLineBreaksComputer.js';\nimport { WordOperations } from '../../common/controller/cursorWordOperations.js';\nlet EDITOR_ID = 0;\nclass ModelData {\n  constructor(model, viewModel, view, hasRealView, listenersToRemove) {\n    this.model = model;\n    this.viewModel = viewModel;\n    this.view = view;\n    this.hasRealView = hasRealView;\n    this.listenersToRemove = listenersToRemove;\n  }\n  dispose() {\n    dispose(this.listenersToRemove);\n    this.model.onBeforeDetached();\n    if (this.hasRealView) {\n      this.view.dispose();\n    }\n    this.viewModel.dispose();\n  }\n}\nlet CodeEditorWidget = class CodeEditorWidget extends Disposable {\n  constructor(domElement, _options, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService) {\n    super();\n    //#region Eventing\n    this._onDidDispose = this._register(new Emitter());\n    this.onDidDispose = this._onDidDispose.event;\n    this._onDidChangeModelContent = this._register(new Emitter());\n    this.onDidChangeModelContent = this._onDidChangeModelContent.event;\n    this._onDidChangeModelLanguage = this._register(new Emitter());\n    this.onDidChangeModelLanguage = this._onDidChangeModelLanguage.event;\n    this._onDidChangeModelLanguageConfiguration = this._register(new Emitter());\n    this.onDidChangeModelLanguageConfiguration = this._onDidChangeModelLanguageConfiguration.event;\n    this._onDidChangeModelOptions = this._register(new Emitter());\n    this.onDidChangeModelOptions = this._onDidChangeModelOptions.event;\n    this._onDidChangeModelDecorations = this._register(new Emitter());\n    this.onDidChangeModelDecorations = this._onDidChangeModelDecorations.event;\n    this._onDidChangeConfiguration = this._register(new Emitter());\n    this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\n    this._onDidChangeModel = this._register(new Emitter());\n    this.onDidChangeModel = this._onDidChangeModel.event;\n    this._onDidChangeCursorPosition = this._register(new Emitter());\n    this.onDidChangeCursorPosition = this._onDidChangeCursorPosition.event;\n    this._onDidChangeCursorSelection = this._register(new Emitter());\n    this.onDidChangeCursorSelection = this._onDidChangeCursorSelection.event;\n    this._onDidAttemptReadOnlyEdit = this._register(new Emitter());\n    this.onDidAttemptReadOnlyEdit = this._onDidAttemptReadOnlyEdit.event;\n    this._onDidLayoutChange = this._register(new Emitter());\n    this.onDidLayoutChange = this._onDidLayoutChange.event;\n    this._editorTextFocus = this._register(new BooleanEventEmitter());\n    this.onDidFocusEditorText = this._editorTextFocus.onDidChangeToTrue;\n    this.onDidBlurEditorText = this._editorTextFocus.onDidChangeToFalse;\n    this._editorWidgetFocus = this._register(new BooleanEventEmitter());\n    this.onDidFocusEditorWidget = this._editorWidgetFocus.onDidChangeToTrue;\n    this.onDidBlurEditorWidget = this._editorWidgetFocus.onDidChangeToFalse;\n    this._onWillType = this._register(new Emitter());\n    this.onWillType = this._onWillType.event;\n    this._onDidType = this._register(new Emitter());\n    this.onDidType = this._onDidType.event;\n    this._onDidCompositionStart = this._register(new Emitter());\n    this.onDidCompositionStart = this._onDidCompositionStart.event;\n    this._onDidCompositionEnd = this._register(new Emitter());\n    this.onDidCompositionEnd = this._onDidCompositionEnd.event;\n    this._onDidPaste = this._register(new Emitter());\n    this.onDidPaste = this._onDidPaste.event;\n    this._onMouseUp = this._register(new Emitter());\n    this.onMouseUp = this._onMouseUp.event;\n    this._onMouseDown = this._register(new Emitter());\n    this.onMouseDown = this._onMouseDown.event;\n    this._onMouseDrag = this._register(new Emitter());\n    this.onMouseDrag = this._onMouseDrag.event;\n    this._onMouseDrop = this._register(new Emitter());\n    this.onMouseDrop = this._onMouseDrop.event;\n    this._onMouseDropCanceled = this._register(new Emitter());\n    this.onMouseDropCanceled = this._onMouseDropCanceled.event;\n    this._onContextMenu = this._register(new Emitter());\n    this.onContextMenu = this._onContextMenu.event;\n    this._onMouseMove = this._register(new Emitter());\n    this.onMouseMove = this._onMouseMove.event;\n    this._onMouseLeave = this._register(new Emitter());\n    this.onMouseLeave = this._onMouseLeave.event;\n    this._onMouseWheel = this._register(new Emitter());\n    this.onMouseWheel = this._onMouseWheel.event;\n    this._onKeyUp = this._register(new Emitter());\n    this.onKeyUp = this._onKeyUp.event;\n    this._onKeyDown = this._register(new Emitter());\n    this.onKeyDown = this._onKeyDown.event;\n    this._onDidContentSizeChange = this._register(new Emitter());\n    this.onDidContentSizeChange = this._onDidContentSizeChange.event;\n    this._onDidScrollChange = this._register(new Emitter());\n    this.onDidScrollChange = this._onDidScrollChange.event;\n    this._onDidChangeViewZones = this._register(new Emitter());\n    this.onDidChangeViewZones = this._onDidChangeViewZones.event;\n    const options = Object.assign({}, _options);\n    this._domElement = domElement;\n    this._overflowWidgetsDomNode = options.overflowWidgetsDomNode;\n    delete options.overflowWidgetsDomNode;\n    this._id = ++EDITOR_ID;\n    this._decorationTypeKeysToIds = {};\n    this._decorationTypeSubtypes = {};\n    this.isSimpleWidget = codeEditorWidgetOptions.isSimpleWidget || false;\n    this._telemetryData = codeEditorWidgetOptions.telemetryData;\n    this._configuration = this._register(this._createConfiguration(options, accessibilityService));\n    this._register(this._configuration.onDidChange(e => {\n      this._onDidChangeConfiguration.fire(e);\n      const options = this._configuration.options;\n      if (e.hasChanged(124 /* layoutInfo */)) {\n        const layoutInfo = options.get(124 /* layoutInfo */);\n        this._onDidLayoutChange.fire(layoutInfo);\n      }\n    }));\n    this._contextKeyService = this._register(contextKeyService.createScoped(this._domElement));\n    this._notificationService = notificationService;\n    this._codeEditorService = codeEditorService;\n    this._commandService = commandService;\n    this._themeService = themeService;\n    this._register(new EditorContextKeysManager(this, this._contextKeyService));\n    this._register(new EditorModeContext(this, this._contextKeyService));\n    this._instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n    this._modelData = null;\n    this._contributions = {};\n    this._actions = {};\n    this._focusTracker = new CodeEditorWidgetFocusTracker(domElement);\n    this._focusTracker.onChange(() => {\n      this._editorWidgetFocus.setValue(this._focusTracker.hasFocus());\n    });\n    this._contentWidgets = {};\n    this._overlayWidgets = {};\n    let contributions;\n    if (Array.isArray(codeEditorWidgetOptions.contributions)) {\n      contributions = codeEditorWidgetOptions.contributions;\n    } else {\n      contributions = EditorExtensionsRegistry.getEditorContributions();\n    }\n    for (const desc of contributions) {\n      try {\n        const contribution = this._instantiationService.createInstance(desc.ctor, this);\n        this._contributions[desc.id] = contribution;\n      } catch (err) {\n        onUnexpectedError(err);\n      }\n    }\n    EditorExtensionsRegistry.getEditorActions().forEach(action => {\n      const internalAction = new InternalEditorAction(action.id, action.label, action.alias, withNullAsUndefined(action.precondition), () => {\n        return this._instantiationService.invokeFunction(accessor => {\n          return Promise.resolve(action.runEditorCommand(accessor, this, null));\n        });\n      }, this._contextKeyService);\n      this._actions[internalAction.id] = internalAction;\n    });\n    this._codeEditorService.addCodeEditor(this);\n  }\n  _createConfiguration(options, accessibilityService) {\n    return new Configuration(this.isSimpleWidget, options, this._domElement, accessibilityService);\n  }\n  getId() {\n    return this.getEditorType() + ':' + this._id;\n  }\n  getEditorType() {\n    return editorCommon.EditorType.ICodeEditor;\n  }\n  dispose() {\n    this._codeEditorService.removeCodeEditor(this);\n    this._focusTracker.dispose();\n    const keys = Object.keys(this._contributions);\n    for (let i = 0, len = keys.length; i < len; i++) {\n      const contributionId = keys[i];\n      this._contributions[contributionId].dispose();\n    }\n    this._removeDecorationTypes();\n    this._postDetachModelCleanup(this._detachModel());\n    this._onDidDispose.fire();\n    super.dispose();\n  }\n  invokeWithinContext(fn) {\n    return this._instantiationService.invokeFunction(fn);\n  }\n  updateOptions(newOptions) {\n    this._configuration.updateOptions(newOptions);\n  }\n  getOptions() {\n    return this._configuration.options;\n  }\n  getOption(id) {\n    return this._configuration.options.get(id);\n  }\n  getRawOptions() {\n    return this._configuration.getRawOptions();\n  }\n  getOverflowWidgetsDomNode() {\n    return this._overflowWidgetsDomNode;\n  }\n  getConfiguredWordAtPosition(position) {\n    if (!this._modelData) {\n      return null;\n    }\n    return WordOperations.getWordAtPosition(this._modelData.model, this._configuration.options.get(110 /* wordSeparators */), position);\n  }\n  getValue() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    if (!this._modelData) {\n      return '';\n    }\n    const preserveBOM = options && options.preserveBOM ? true : false;\n    let eolPreference = 0 /* TextDefined */;\n    if (options && options.lineEnding && options.lineEnding === '\\n') {\n      eolPreference = 1 /* LF */;\n    } else if (options && options.lineEnding && options.lineEnding === '\\r\\n') {\n      eolPreference = 2 /* CRLF */;\n    }\n\n    return this._modelData.model.getValue(eolPreference, preserveBOM);\n  }\n  setValue(newValue) {\n    if (!this._modelData) {\n      return;\n    }\n    this._modelData.model.setValue(newValue);\n  }\n  getModel() {\n    if (!this._modelData) {\n      return null;\n    }\n    return this._modelData.model;\n  }\n  setModel() {\n    let _model = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    const model = _model;\n    if (this._modelData === null && model === null) {\n      // Current model is the new model\n      return;\n    }\n    if (this._modelData && this._modelData.model === model) {\n      // Current model is the new model\n      return;\n    }\n    const hasTextFocus = this.hasTextFocus();\n    const detachedModel = this._detachModel();\n    this._attachModel(model);\n    if (hasTextFocus && this.hasModel()) {\n      this.focus();\n    }\n    const e = {\n      oldModelUrl: detachedModel ? detachedModel.uri : null,\n      newModelUrl: model ? model.uri : null\n    };\n    this._removeDecorationTypes();\n    this._onDidChangeModel.fire(e);\n    this._postDetachModelCleanup(detachedModel);\n  }\n  _removeDecorationTypes() {\n    this._decorationTypeKeysToIds = {};\n    if (this._decorationTypeSubtypes) {\n      for (let decorationType in this._decorationTypeSubtypes) {\n        const subTypes = this._decorationTypeSubtypes[decorationType];\n        for (let subType in subTypes) {\n          this._removeDecorationType(decorationType + '-' + subType);\n        }\n      }\n      this._decorationTypeSubtypes = {};\n    }\n  }\n  getVisibleRanges() {\n    if (!this._modelData) {\n      return [];\n    }\n    return this._modelData.viewModel.getVisibleRanges();\n  }\n  getVisibleRangesPlusViewportAboveBelow() {\n    if (!this._modelData) {\n      return [];\n    }\n    return this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow();\n  }\n  getWhitespaces() {\n    if (!this._modelData) {\n      return [];\n    }\n    return this._modelData.viewModel.viewLayout.getWhitespaces();\n  }\n  static _getVerticalOffsetForPosition(modelData, modelLineNumber, modelColumn) {\n    const modelPosition = modelData.model.validatePosition({\n      lineNumber: modelLineNumber,\n      column: modelColumn\n    });\n    const viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n    return modelData.viewModel.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber);\n  }\n  getTopForLineNumber(lineNumber) {\n    if (!this._modelData) {\n      return -1;\n    }\n    return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, 1);\n  }\n  getTopForPosition(lineNumber, column) {\n    if (!this._modelData) {\n      return -1;\n    }\n    return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, column);\n  }\n  setHiddenAreas(ranges) {\n    if (this._modelData) {\n      this._modelData.viewModel.setHiddenAreas(ranges.map(r => Range.lift(r)));\n    }\n  }\n  getVisibleColumnFromPosition(rawPosition) {\n    if (!this._modelData) {\n      return rawPosition.column;\n    }\n    const position = this._modelData.model.validatePosition(rawPosition);\n    const tabSize = this._modelData.model.getOptions().tabSize;\n    return CursorColumns.visibleColumnFromColumn(this._modelData.model.getLineContent(position.lineNumber), position.column, tabSize) + 1;\n  }\n  getPosition() {\n    if (!this._modelData) {\n      return null;\n    }\n    return this._modelData.viewModel.getPosition();\n  }\n  setPosition(position) {\n    if (!this._modelData) {\n      return;\n    }\n    if (!Position.isIPosition(position)) {\n      throw new Error('Invalid arguments');\n    }\n    this._modelData.viewModel.setSelections('api', [{\n      selectionStartLineNumber: position.lineNumber,\n      selectionStartColumn: position.column,\n      positionLineNumber: position.lineNumber,\n      positionColumn: position.column\n    }]);\n  }\n  _sendRevealRange(modelRange, verticalType, revealHorizontal, scrollType) {\n    if (!this._modelData) {\n      return;\n    }\n    if (!Range.isIRange(modelRange)) {\n      throw new Error('Invalid arguments');\n    }\n    const validatedModelRange = this._modelData.model.validateRange(modelRange);\n    const viewRange = this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(validatedModelRange);\n    this._modelData.viewModel.revealRange('api', revealHorizontal, viewRange, verticalType, scrollType);\n  }\n  revealLine(lineNumber) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this._revealLine(lineNumber, 0 /* Simple */, scrollType);\n  }\n  revealLineInCenter(lineNumber) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this._revealLine(lineNumber, 1 /* Center */, scrollType);\n  }\n  revealLineInCenterIfOutsideViewport(lineNumber) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this._revealLine(lineNumber, 2 /* CenterIfOutsideViewport */, scrollType);\n  }\n  revealLineNearTop(lineNumber) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this._revealLine(lineNumber, 5 /* NearTop */, scrollType);\n  }\n  _revealLine(lineNumber, revealType, scrollType) {\n    if (typeof lineNumber !== 'number') {\n      throw new Error('Invalid arguments');\n    }\n    this._sendRevealRange(new Range(lineNumber, 1, lineNumber, 1), revealType, false, scrollType);\n  }\n  revealPosition(position) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this._revealPosition(position, 0 /* Simple */, true, scrollType);\n  }\n  revealPositionInCenter(position) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this._revealPosition(position, 1 /* Center */, true, scrollType);\n  }\n  revealPositionInCenterIfOutsideViewport(position) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this._revealPosition(position, 2 /* CenterIfOutsideViewport */, true, scrollType);\n  }\n  revealPositionNearTop(position) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this._revealPosition(position, 5 /* NearTop */, true, scrollType);\n  }\n  _revealPosition(position, verticalType, revealHorizontal, scrollType) {\n    if (!Position.isIPosition(position)) {\n      throw new Error('Invalid arguments');\n    }\n    this._sendRevealRange(new Range(position.lineNumber, position.column, position.lineNumber, position.column), verticalType, revealHorizontal, scrollType);\n  }\n  getSelection() {\n    if (!this._modelData) {\n      return null;\n    }\n    return this._modelData.viewModel.getSelection();\n  }\n  getSelections() {\n    if (!this._modelData) {\n      return null;\n    }\n    return this._modelData.viewModel.getSelections();\n  }\n  setSelection(something) {\n    const isSelection = Selection.isISelection(something);\n    const isRange = Range.isIRange(something);\n    if (!isSelection && !isRange) {\n      throw new Error('Invalid arguments');\n    }\n    if (isSelection) {\n      this._setSelectionImpl(something);\n    } else if (isRange) {\n      // act as if it was an IRange\n      const selection = {\n        selectionStartLineNumber: something.startLineNumber,\n        selectionStartColumn: something.startColumn,\n        positionLineNumber: something.endLineNumber,\n        positionColumn: something.endColumn\n      };\n      this._setSelectionImpl(selection);\n    }\n  }\n  _setSelectionImpl(sel) {\n    if (!this._modelData) {\n      return;\n    }\n    const selection = new Selection(sel.selectionStartLineNumber, sel.selectionStartColumn, sel.positionLineNumber, sel.positionColumn);\n    this._modelData.viewModel.setSelections('api', [selection]);\n  }\n  revealLines(startLineNumber, endLineNumber) {\n    let scrollType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    this._revealLines(startLineNumber, endLineNumber, 0 /* Simple */, scrollType);\n  }\n  revealLinesInCenter(startLineNumber, endLineNumber) {\n    let scrollType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    this._revealLines(startLineNumber, endLineNumber, 1 /* Center */, scrollType);\n  }\n  revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber) {\n    let scrollType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    this._revealLines(startLineNumber, endLineNumber, 2 /* CenterIfOutsideViewport */, scrollType);\n  }\n  revealLinesNearTop(startLineNumber, endLineNumber) {\n    let scrollType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    this._revealLines(startLineNumber, endLineNumber, 5 /* NearTop */, scrollType);\n  }\n  _revealLines(startLineNumber, endLineNumber, verticalType, scrollType) {\n    if (typeof startLineNumber !== 'number' || typeof endLineNumber !== 'number') {\n      throw new Error('Invalid arguments');\n    }\n    this._sendRevealRange(new Range(startLineNumber, 1, endLineNumber, 1), verticalType, false, scrollType);\n  }\n  revealRange(range) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    let revealVerticalInCenter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    let revealHorizontal = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n    this._revealRange(range, revealVerticalInCenter ? 1 /* Center */ : 0 /* Simple */, revealHorizontal, scrollType);\n  }\n  revealRangeInCenter(range) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this._revealRange(range, 1 /* Center */, true, scrollType);\n  }\n  revealRangeInCenterIfOutsideViewport(range) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this._revealRange(range, 2 /* CenterIfOutsideViewport */, true, scrollType);\n  }\n  revealRangeNearTop(range) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this._revealRange(range, 5 /* NearTop */, true, scrollType);\n  }\n  revealRangeNearTopIfOutsideViewport(range) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this._revealRange(range, 6 /* NearTopIfOutsideViewport */, true, scrollType);\n  }\n  revealRangeAtTop(range) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this._revealRange(range, 3 /* Top */, true, scrollType);\n  }\n  _revealRange(range, verticalType, revealHorizontal, scrollType) {\n    if (!Range.isIRange(range)) {\n      throw new Error('Invalid arguments');\n    }\n    this._sendRevealRange(Range.lift(range), verticalType, revealHorizontal, scrollType);\n  }\n  setSelections(ranges) {\n    let source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'api';\n    let reason = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    if (!this._modelData) {\n      return;\n    }\n    if (!ranges || ranges.length === 0) {\n      throw new Error('Invalid arguments');\n    }\n    for (let i = 0, len = ranges.length; i < len; i++) {\n      if (!Selection.isISelection(ranges[i])) {\n        throw new Error('Invalid arguments');\n      }\n    }\n    this._modelData.viewModel.setSelections(source, ranges, reason);\n  }\n  getContentWidth() {\n    if (!this._modelData) {\n      return -1;\n    }\n    return this._modelData.viewModel.viewLayout.getContentWidth();\n  }\n  getScrollWidth() {\n    if (!this._modelData) {\n      return -1;\n    }\n    return this._modelData.viewModel.viewLayout.getScrollWidth();\n  }\n  getScrollLeft() {\n    if (!this._modelData) {\n      return -1;\n    }\n    return this._modelData.viewModel.viewLayout.getCurrentScrollLeft();\n  }\n  getContentHeight() {\n    if (!this._modelData) {\n      return -1;\n    }\n    return this._modelData.viewModel.viewLayout.getContentHeight();\n  }\n  getScrollHeight() {\n    if (!this._modelData) {\n      return -1;\n    }\n    return this._modelData.viewModel.viewLayout.getScrollHeight();\n  }\n  getScrollTop() {\n    if (!this._modelData) {\n      return -1;\n    }\n    return this._modelData.viewModel.viewLayout.getCurrentScrollTop();\n  }\n  setScrollLeft(newScrollLeft) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    if (!this._modelData) {\n      return;\n    }\n    if (typeof newScrollLeft !== 'number') {\n      throw new Error('Invalid arguments');\n    }\n    this._modelData.viewModel.setScrollPosition({\n      scrollLeft: newScrollLeft\n    }, scrollType);\n  }\n  setScrollTop(newScrollTop) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    if (!this._modelData) {\n      return;\n    }\n    if (typeof newScrollTop !== 'number') {\n      throw new Error('Invalid arguments');\n    }\n    this._modelData.viewModel.setScrollPosition({\n      scrollTop: newScrollTop\n    }, scrollType);\n  }\n  setScrollPosition(position) {\n    let scrollType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    if (!this._modelData) {\n      return;\n    }\n    this._modelData.viewModel.setScrollPosition(position, scrollType);\n  }\n  saveViewState() {\n    if (!this._modelData) {\n      return null;\n    }\n    const contributionsState = {};\n    const keys = Object.keys(this._contributions);\n    for (const id of keys) {\n      const contribution = this._contributions[id];\n      if (typeof contribution.saveViewState === 'function') {\n        contributionsState[id] = contribution.saveViewState();\n      }\n    }\n    const cursorState = this._modelData.viewModel.saveCursorState();\n    const viewState = this._modelData.viewModel.saveState();\n    return {\n      cursorState: cursorState,\n      viewState: viewState,\n      contributionsState: contributionsState\n    };\n  }\n  restoreViewState(s) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n    const codeEditorState = s;\n    if (codeEditorState && codeEditorState.cursorState && codeEditorState.viewState) {\n      const cursorState = codeEditorState.cursorState;\n      if (Array.isArray(cursorState)) {\n        this._modelData.viewModel.restoreCursorState(cursorState);\n      } else {\n        // Backwards compatibility\n        this._modelData.viewModel.restoreCursorState([cursorState]);\n      }\n      const contributionsState = codeEditorState.contributionsState || {};\n      const keys = Object.keys(this._contributions);\n      for (let i = 0, len = keys.length; i < len; i++) {\n        const id = keys[i];\n        const contribution = this._contributions[id];\n        if (typeof contribution.restoreViewState === 'function') {\n          contribution.restoreViewState(contributionsState[id]);\n        }\n      }\n      const reducedState = this._modelData.viewModel.reduceRestoreState(codeEditorState.viewState);\n      this._modelData.view.restoreState(reducedState);\n    }\n  }\n  getContribution(id) {\n    return this._contributions[id] || null;\n  }\n  getActions() {\n    const result = [];\n    const keys = Object.keys(this._actions);\n    for (let i = 0, len = keys.length; i < len; i++) {\n      const id = keys[i];\n      result.push(this._actions[id]);\n    }\n    return result;\n  }\n  getSupportedActions() {\n    let result = this.getActions();\n    result = result.filter(action => action.isSupported());\n    return result;\n  }\n  getAction(id) {\n    return this._actions[id] || null;\n  }\n  trigger(source, handlerId, payload) {\n    payload = payload || {};\n    switch (handlerId) {\n      case \"compositionStart\" /* CompositionStart */:\n        this._startComposition();\n        return;\n      case \"compositionEnd\" /* CompositionEnd */:\n        this._endComposition(source);\n        return;\n      case \"type\" /* Type */:\n        {\n          const args = payload;\n          this._type(source, args.text || '');\n          return;\n        }\n      case \"replacePreviousChar\" /* ReplacePreviousChar */:\n        {\n          const args = payload;\n          this._replacePreviousChar(source, args.text || '', args.replaceCharCnt || 0);\n          return;\n        }\n      case \"paste\" /* Paste */:\n        {\n          const args = payload;\n          this._paste(source, args.text || '', args.pasteOnNewLine || false, args.multicursorText || null, args.mode || null);\n          return;\n        }\n      case \"cut\" /* Cut */:\n        this._cut(source);\n        return;\n    }\n    const action = this.getAction(handlerId);\n    if (action) {\n      Promise.resolve(action.run()).then(undefined, onUnexpectedError);\n      return;\n    }\n    if (!this._modelData) {\n      return;\n    }\n    if (this._triggerEditorCommand(source, handlerId, payload)) {\n      return;\n    }\n    this._commandService.executeCommand(handlerId, payload);\n  }\n  _startComposition() {\n    if (!this._modelData) {\n      return;\n    }\n    this._modelData.viewModel.startComposition();\n    this._onDidCompositionStart.fire();\n  }\n  _endComposition(source) {\n    if (!this._modelData) {\n      return;\n    }\n    this._modelData.viewModel.endComposition(source);\n    this._onDidCompositionEnd.fire();\n  }\n  _type(source, text) {\n    if (!this._modelData || text.length === 0) {\n      return;\n    }\n    if (source === 'keyboard') {\n      this._onWillType.fire(text);\n    }\n    this._modelData.viewModel.type(text, source);\n    if (source === 'keyboard') {\n      this._onDidType.fire(text);\n    }\n  }\n  _replacePreviousChar(source, text, replaceCharCnt) {\n    if (!this._modelData) {\n      return;\n    }\n    this._modelData.viewModel.replacePreviousChar(text, replaceCharCnt, source);\n  }\n  _paste(source, text, pasteOnNewLine, multicursorText, mode) {\n    if (!this._modelData || text.length === 0) {\n      return;\n    }\n    const startPosition = this._modelData.viewModel.getSelection().getStartPosition();\n    this._modelData.viewModel.paste(text, pasteOnNewLine, multicursorText, source);\n    const endPosition = this._modelData.viewModel.getSelection().getStartPosition();\n    if (source === 'keyboard') {\n      this._onDidPaste.fire({\n        range: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\n        mode: mode\n      });\n    }\n  }\n  _cut(source) {\n    if (!this._modelData) {\n      return;\n    }\n    this._modelData.viewModel.cut(source);\n  }\n  _triggerEditorCommand(source, handlerId, payload) {\n    const command = EditorExtensionsRegistry.getEditorCommand(handlerId);\n    if (command) {\n      payload = payload || {};\n      payload.source = source;\n      this._instantiationService.invokeFunction(accessor => {\n        Promise.resolve(command.runEditorCommand(accessor, this, payload)).then(undefined, onUnexpectedError);\n      });\n      return true;\n    }\n    return false;\n  }\n  _getViewModel() {\n    if (!this._modelData) {\n      return null;\n    }\n    return this._modelData.viewModel;\n  }\n  pushUndoStop() {\n    if (!this._modelData) {\n      return false;\n    }\n    if (this._configuration.options.get(75 /* readOnly */)) {\n      // read only editor => sorry!\n      return false;\n    }\n    this._modelData.model.pushStackElement();\n    return true;\n  }\n  popUndoStop() {\n    if (!this._modelData) {\n      return false;\n    }\n    if (this._configuration.options.get(75 /* readOnly */)) {\n      // read only editor => sorry!\n      return false;\n    }\n    this._modelData.model.popStackElement();\n    return true;\n  }\n  executeEdits(source, edits, endCursorState) {\n    if (!this._modelData) {\n      return false;\n    }\n    if (this._configuration.options.get(75 /* readOnly */)) {\n      // read only editor => sorry!\n      return false;\n    }\n    let cursorStateComputer;\n    if (!endCursorState) {\n      cursorStateComputer = () => null;\n    } else if (Array.isArray(endCursorState)) {\n      cursorStateComputer = () => endCursorState;\n    } else {\n      cursorStateComputer = endCursorState;\n    }\n    this._modelData.viewModel.executeEdits(source, edits, cursorStateComputer);\n    return true;\n  }\n  executeCommand(source, command) {\n    if (!this._modelData) {\n      return;\n    }\n    this._modelData.viewModel.executeCommand(command, source);\n  }\n  executeCommands(source, commands) {\n    if (!this._modelData) {\n      return;\n    }\n    this._modelData.viewModel.executeCommands(commands, source);\n  }\n  changeDecorations(callback) {\n    if (!this._modelData) {\n      // callback will not be called\n      return null;\n    }\n    return this._modelData.model.changeDecorations(callback, this._id);\n  }\n  getLineDecorations(lineNumber) {\n    if (!this._modelData) {\n      return null;\n    }\n    return this._modelData.model.getLineDecorations(lineNumber, this._id, filterValidationDecorations(this._configuration.options));\n  }\n  deltaDecorations(oldDecorations, newDecorations) {\n    if (!this._modelData) {\n      return [];\n    }\n    if (oldDecorations.length === 0 && newDecorations.length === 0) {\n      return oldDecorations;\n    }\n    return this._modelData.model.deltaDecorations(oldDecorations, newDecorations, this._id);\n  }\n  removeDecorations(decorationTypeKey) {\n    // remove decorations for type and sub type\n    const oldDecorationsIds = this._decorationTypeKeysToIds[decorationTypeKey];\n    if (oldDecorationsIds) {\n      this.deltaDecorations(oldDecorationsIds, []);\n    }\n    if (this._decorationTypeKeysToIds.hasOwnProperty(decorationTypeKey)) {\n      delete this._decorationTypeKeysToIds[decorationTypeKey];\n    }\n    if (this._decorationTypeSubtypes.hasOwnProperty(decorationTypeKey)) {\n      delete this._decorationTypeSubtypes[decorationTypeKey];\n    }\n  }\n  getLayoutInfo() {\n    const options = this._configuration.options;\n    const layoutInfo = options.get(124 /* layoutInfo */);\n    return layoutInfo;\n  }\n  createOverviewRuler(cssClassName) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return null;\n    }\n    return this._modelData.view.createOverviewRuler(cssClassName);\n  }\n  getContainerDomNode() {\n    return this._domElement;\n  }\n  getDomNode() {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return null;\n    }\n    return this._modelData.view.domNode.domNode;\n  }\n  delegateVerticalScrollbarMouseDown(browserEvent) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n    this._modelData.view.delegateVerticalScrollbarMouseDown(browserEvent);\n  }\n  layout(dimension) {\n    this._configuration.observeReferenceElement(dimension);\n    this.render();\n  }\n  focus() {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n    this._modelData.view.focus();\n  }\n  hasTextFocus() {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return false;\n    }\n    return this._modelData.view.isFocused();\n  }\n  hasWidgetFocus() {\n    return this._focusTracker && this._focusTracker.hasFocus();\n  }\n  addContentWidget(widget) {\n    const widgetData = {\n      widget: widget,\n      position: widget.getPosition()\n    };\n    if (this._contentWidgets.hasOwnProperty(widget.getId())) {\n      console.warn('Overwriting a content widget with the same id.');\n    }\n    this._contentWidgets[widget.getId()] = widgetData;\n    if (this._modelData && this._modelData.hasRealView) {\n      this._modelData.view.addContentWidget(widgetData);\n    }\n  }\n  layoutContentWidget(widget) {\n    const widgetId = widget.getId();\n    if (this._contentWidgets.hasOwnProperty(widgetId)) {\n      const widgetData = this._contentWidgets[widgetId];\n      widgetData.position = widget.getPosition();\n      if (this._modelData && this._modelData.hasRealView) {\n        this._modelData.view.layoutContentWidget(widgetData);\n      }\n    }\n  }\n  removeContentWidget(widget) {\n    const widgetId = widget.getId();\n    if (this._contentWidgets.hasOwnProperty(widgetId)) {\n      const widgetData = this._contentWidgets[widgetId];\n      delete this._contentWidgets[widgetId];\n      if (this._modelData && this._modelData.hasRealView) {\n        this._modelData.view.removeContentWidget(widgetData);\n      }\n    }\n  }\n  addOverlayWidget(widget) {\n    const widgetData = {\n      widget: widget,\n      position: widget.getPosition()\n    };\n    if (this._overlayWidgets.hasOwnProperty(widget.getId())) {\n      console.warn('Overwriting an overlay widget with the same id.');\n    }\n    this._overlayWidgets[widget.getId()] = widgetData;\n    if (this._modelData && this._modelData.hasRealView) {\n      this._modelData.view.addOverlayWidget(widgetData);\n    }\n  }\n  layoutOverlayWidget(widget) {\n    const widgetId = widget.getId();\n    if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n      const widgetData = this._overlayWidgets[widgetId];\n      widgetData.position = widget.getPosition();\n      if (this._modelData && this._modelData.hasRealView) {\n        this._modelData.view.layoutOverlayWidget(widgetData);\n      }\n    }\n  }\n  removeOverlayWidget(widget) {\n    const widgetId = widget.getId();\n    if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n      const widgetData = this._overlayWidgets[widgetId];\n      delete this._overlayWidgets[widgetId];\n      if (this._modelData && this._modelData.hasRealView) {\n        this._modelData.view.removeOverlayWidget(widgetData);\n      }\n    }\n  }\n  changeViewZones(callback) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n    this._modelData.view.change(callback);\n  }\n  getTargetAtClientPoint(clientX, clientY) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return null;\n    }\n    return this._modelData.view.getTargetAtClientPoint(clientX, clientY);\n  }\n  getScrolledVisiblePosition(rawPosition) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return null;\n    }\n    const position = this._modelData.model.validatePosition(rawPosition);\n    const options = this._configuration.options;\n    const layoutInfo = options.get(124 /* layoutInfo */);\n    const top = CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, position.lineNumber, position.column) - this.getScrollTop();\n    const left = this._modelData.view.getOffsetForColumn(position.lineNumber, position.column) + layoutInfo.glyphMarginWidth + layoutInfo.lineNumbersWidth + layoutInfo.decorationsWidth - this.getScrollLeft();\n    return {\n      top: top,\n      left: left,\n      height: options.get(53 /* lineHeight */)\n    };\n  }\n\n  getOffsetForColumn(lineNumber, column) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return -1;\n    }\n    return this._modelData.view.getOffsetForColumn(lineNumber, column);\n  }\n  render() {\n    let forceRedraw = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n    this._modelData.view.render(true, forceRedraw);\n  }\n  setAriaOptions(options) {\n    if (!this._modelData || !this._modelData.hasRealView) {\n      return;\n    }\n    this._modelData.view.setAriaOptions(options);\n  }\n  applyFontInfo(target) {\n    Configuration.applyFontInfoSlow(target, this._configuration.options.get(38 /* fontInfo */));\n  }\n\n  _attachModel(model) {\n    if (!model) {\n      this._modelData = null;\n      return;\n    }\n    const listenersToRemove = [];\n    this._domElement.setAttribute('data-mode-id', model.getLanguageIdentifier().language);\n    this._configuration.setIsDominatedByLongLines(model.isDominatedByLongLines());\n    this._configuration.setMaxLineNumber(model.getLineCount());\n    model.onBeforeAttached();\n    const viewModel = new ViewModel(this._id, this._configuration, model, DOMLineBreaksComputerFactory.create(), MonospaceLineBreaksComputerFactory.create(this._configuration.options), callback => dom.scheduleAtNextAnimationFrame(callback));\n    listenersToRemove.push(model.onDidChangeDecorations(e => this._onDidChangeModelDecorations.fire(e)));\n    listenersToRemove.push(model.onDidChangeLanguage(e => {\n      this._domElement.setAttribute('data-mode-id', model.getLanguageIdentifier().language);\n      this._onDidChangeModelLanguage.fire(e);\n    }));\n    listenersToRemove.push(model.onDidChangeLanguageConfiguration(e => this._onDidChangeModelLanguageConfiguration.fire(e)));\n    listenersToRemove.push(model.onDidChangeContent(e => this._onDidChangeModelContent.fire(e)));\n    listenersToRemove.push(model.onDidChangeOptions(e => this._onDidChangeModelOptions.fire(e)));\n    // Someone might destroy the model from under the editor, so prevent any exceptions by setting a null model\n    listenersToRemove.push(model.onWillDispose(() => this.setModel(null)));\n    listenersToRemove.push(viewModel.onEvent(e => {\n      switch (e.kind) {\n        case 0 /* ContentSizeChanged */:\n          this._onDidContentSizeChange.fire(e);\n          break;\n        case 1 /* FocusChanged */:\n          this._editorTextFocus.setValue(e.hasFocus);\n          break;\n        case 2 /* ScrollChanged */:\n          this._onDidScrollChange.fire(e);\n          break;\n        case 3 /* ViewZonesChanged */:\n          this._onDidChangeViewZones.fire();\n          break;\n        case 4 /* ReadOnlyEditAttempt */:\n          this._onDidAttemptReadOnlyEdit.fire();\n          break;\n        case 5 /* CursorStateChanged */:\n          {\n            if (e.reachedMaxCursorCount) {\n              this._notificationService.warn(nls.localize('cursors.maximum', \"The number of cursors has been limited to {0}.\", Cursor.MAX_CURSOR_COUNT));\n            }\n            const positions = [];\n            for (let i = 0, len = e.selections.length; i < len; i++) {\n              positions[i] = e.selections[i].getPosition();\n            }\n            const e1 = {\n              position: positions[0],\n              secondaryPositions: positions.slice(1),\n              reason: e.reason,\n              source: e.source\n            };\n            this._onDidChangeCursorPosition.fire(e1);\n            const e2 = {\n              selection: e.selections[0],\n              secondarySelections: e.selections.slice(1),\n              modelVersionId: e.modelVersionId,\n              oldSelections: e.oldSelections,\n              oldModelVersionId: e.oldModelVersionId,\n              source: e.source,\n              reason: e.reason\n            };\n            this._onDidChangeCursorSelection.fire(e2);\n            break;\n          }\n      }\n    }));\n    const [view, hasRealView] = this._createView(viewModel);\n    if (hasRealView) {\n      this._domElement.appendChild(view.domNode.domNode);\n      let keys = Object.keys(this._contentWidgets);\n      for (let i = 0, len = keys.length; i < len; i++) {\n        const widgetId = keys[i];\n        view.addContentWidget(this._contentWidgets[widgetId]);\n      }\n      keys = Object.keys(this._overlayWidgets);\n      for (let i = 0, len = keys.length; i < len; i++) {\n        const widgetId = keys[i];\n        view.addOverlayWidget(this._overlayWidgets[widgetId]);\n      }\n      view.render(false, true);\n      view.domNode.domNode.setAttribute('data-uri', model.uri.toString());\n    }\n    this._modelData = new ModelData(model, viewModel, view, hasRealView, listenersToRemove);\n  }\n  _createView(viewModel) {\n    let commandDelegate;\n    if (this.isSimpleWidget) {\n      commandDelegate = {\n        paste: (text, pasteOnNewLine, multicursorText, mode) => {\n          this._paste('keyboard', text, pasteOnNewLine, multicursorText, mode);\n        },\n        type: text => {\n          this._type('keyboard', text);\n        },\n        replacePreviousChar: (text, replaceCharCnt) => {\n          this._replacePreviousChar('keyboard', text, replaceCharCnt);\n        },\n        startComposition: () => {\n          this._startComposition();\n        },\n        endComposition: () => {\n          this._endComposition('keyboard');\n        },\n        cut: () => {\n          this._cut('keyboard');\n        }\n      };\n    } else {\n      commandDelegate = {\n        paste: (text, pasteOnNewLine, multicursorText, mode) => {\n          const payload = {\n            text,\n            pasteOnNewLine,\n            multicursorText,\n            mode\n          };\n          this._commandService.executeCommand(\"paste\" /* Paste */, payload);\n        },\n        type: text => {\n          const payload = {\n            text\n          };\n          this._commandService.executeCommand(\"type\" /* Type */, payload);\n        },\n        replacePreviousChar: (text, replaceCharCnt) => {\n          const payload = {\n            text,\n            replaceCharCnt\n          };\n          this._commandService.executeCommand(\"replacePreviousChar\" /* ReplacePreviousChar */, payload);\n        },\n        startComposition: () => {\n          this._commandService.executeCommand(\"compositionStart\" /* CompositionStart */, {});\n        },\n        endComposition: () => {\n          this._commandService.executeCommand(\"compositionEnd\" /* CompositionEnd */, {});\n        },\n        cut: () => {\n          this._commandService.executeCommand(\"cut\" /* Cut */, {});\n        }\n      };\n    }\n    const viewUserInputEvents = new ViewUserInputEvents(viewModel.coordinatesConverter);\n    viewUserInputEvents.onKeyDown = e => this._onKeyDown.fire(e);\n    viewUserInputEvents.onKeyUp = e => this._onKeyUp.fire(e);\n    viewUserInputEvents.onContextMenu = e => this._onContextMenu.fire(e);\n    viewUserInputEvents.onMouseMove = e => this._onMouseMove.fire(e);\n    viewUserInputEvents.onMouseLeave = e => this._onMouseLeave.fire(e);\n    viewUserInputEvents.onMouseDown = e => this._onMouseDown.fire(e);\n    viewUserInputEvents.onMouseUp = e => this._onMouseUp.fire(e);\n    viewUserInputEvents.onMouseDrag = e => this._onMouseDrag.fire(e);\n    viewUserInputEvents.onMouseDrop = e => this._onMouseDrop.fire(e);\n    viewUserInputEvents.onMouseDropCanceled = e => this._onMouseDropCanceled.fire(e);\n    viewUserInputEvents.onMouseWheel = e => this._onMouseWheel.fire(e);\n    const view = new View(commandDelegate, this._configuration, this._themeService, viewModel, viewUserInputEvents, this._overflowWidgetsDomNode);\n    return [view, true];\n  }\n  _postDetachModelCleanup(detachedModel) {\n    if (detachedModel) {\n      detachedModel.removeAllDecorationsWithOwnerId(this._id);\n    }\n  }\n  _detachModel() {\n    if (!this._modelData) {\n      return null;\n    }\n    const model = this._modelData.model;\n    const removeDomNode = this._modelData.hasRealView ? this._modelData.view.domNode.domNode : null;\n    this._modelData.dispose();\n    this._modelData = null;\n    this._domElement.removeAttribute('data-mode-id');\n    if (removeDomNode && this._domElement.contains(removeDomNode)) {\n      this._domElement.removeChild(removeDomNode);\n    }\n    return model;\n  }\n  _removeDecorationType(key) {\n    this._codeEditorService.removeDecorationType(key);\n  }\n  hasModel() {\n    return this._modelData !== null;\n  }\n};\nCodeEditorWidget = __decorate([__param(3, IInstantiationService), __param(4, ICodeEditorService), __param(5, ICommandService), __param(6, IContextKeyService), __param(7, IThemeService), __param(8, INotificationService), __param(9, IAccessibilityService)], CodeEditorWidget);\nexport { CodeEditorWidget };\nexport class BooleanEventEmitter extends Disposable {\n  constructor() {\n    super();\n    this._onDidChangeToTrue = this._register(new Emitter());\n    this.onDidChangeToTrue = this._onDidChangeToTrue.event;\n    this._onDidChangeToFalse = this._register(new Emitter());\n    this.onDidChangeToFalse = this._onDidChangeToFalse.event;\n    this._value = 0 /* NotSet */;\n  }\n\n  setValue(_value) {\n    const value = _value ? 2 /* True */ : 1 /* False */;\n    if (this._value === value) {\n      return;\n    }\n    this._value = value;\n    if (this._value === 2 /* True */) {\n      this._onDidChangeToTrue.fire();\n    } else if (this._value === 1 /* False */) {\n      this._onDidChangeToFalse.fire();\n    }\n  }\n}\nclass EditorContextKeysManager extends Disposable {\n  constructor(editor, contextKeyService) {\n    super();\n    this._editor = editor;\n    contextKeyService.createKey('editorId', editor.getId());\n    this._editorSimpleInput = EditorContextKeys.editorSimpleInput.bindTo(contextKeyService);\n    this._editorFocus = EditorContextKeys.focus.bindTo(contextKeyService);\n    this._textInputFocus = EditorContextKeys.textInputFocus.bindTo(contextKeyService);\n    this._editorTextFocus = EditorContextKeys.editorTextFocus.bindTo(contextKeyService);\n    this._editorTabMovesFocus = EditorContextKeys.tabMovesFocus.bindTo(contextKeyService);\n    this._editorReadonly = EditorContextKeys.readOnly.bindTo(contextKeyService);\n    this._inDiffEditor = EditorContextKeys.inDiffEditor.bindTo(contextKeyService);\n    this._editorColumnSelection = EditorContextKeys.columnSelection.bindTo(contextKeyService);\n    this._hasMultipleSelections = EditorContextKeys.hasMultipleSelections.bindTo(contextKeyService);\n    this._hasNonEmptySelection = EditorContextKeys.hasNonEmptySelection.bindTo(contextKeyService);\n    this._canUndo = EditorContextKeys.canUndo.bindTo(contextKeyService);\n    this._canRedo = EditorContextKeys.canRedo.bindTo(contextKeyService);\n    this._register(this._editor.onDidChangeConfiguration(() => this._updateFromConfig()));\n    this._register(this._editor.onDidChangeCursorSelection(() => this._updateFromSelection()));\n    this._register(this._editor.onDidFocusEditorWidget(() => this._updateFromFocus()));\n    this._register(this._editor.onDidBlurEditorWidget(() => this._updateFromFocus()));\n    this._register(this._editor.onDidFocusEditorText(() => this._updateFromFocus()));\n    this._register(this._editor.onDidBlurEditorText(() => this._updateFromFocus()));\n    this._register(this._editor.onDidChangeModel(() => this._updateFromModel()));\n    this._register(this._editor.onDidChangeConfiguration(() => this._updateFromModel()));\n    this._updateFromConfig();\n    this._updateFromSelection();\n    this._updateFromFocus();\n    this._updateFromModel();\n    this._editorSimpleInput.set(this._editor.isSimpleWidget);\n  }\n  _updateFromConfig() {\n    const options = this._editor.getOptions();\n    this._editorTabMovesFocus.set(options.get(123 /* tabFocusMode */));\n    this._editorReadonly.set(options.get(75 /* readOnly */));\n    this._inDiffEditor.set(options.get(49 /* inDiffEditor */));\n    this._editorColumnSelection.set(options.get(15 /* columnSelection */));\n  }\n\n  _updateFromSelection() {\n    const selections = this._editor.getSelections();\n    if (!selections) {\n      this._hasMultipleSelections.reset();\n      this._hasNonEmptySelection.reset();\n    } else {\n      this._hasMultipleSelections.set(selections.length > 1);\n      this._hasNonEmptySelection.set(selections.some(s => !s.isEmpty()));\n    }\n  }\n  _updateFromFocus() {\n    this._editorFocus.set(this._editor.hasWidgetFocus() && !this._editor.isSimpleWidget);\n    this._editorTextFocus.set(this._editor.hasTextFocus() && !this._editor.isSimpleWidget);\n    this._textInputFocus.set(this._editor.hasTextFocus());\n  }\n  _updateFromModel() {\n    const model = this._editor.getModel();\n    this._canUndo.set(Boolean(model && model.canUndo()));\n    this._canRedo.set(Boolean(model && model.canRedo()));\n  }\n}\nexport class EditorModeContext extends Disposable {\n  constructor(_editor, _contextKeyService) {\n    super();\n    this._editor = _editor;\n    this._contextKeyService = _contextKeyService;\n    this._langId = EditorContextKeys.languageId.bindTo(_contextKeyService);\n    this._hasCompletionItemProvider = EditorContextKeys.hasCompletionItemProvider.bindTo(_contextKeyService);\n    this._hasCodeActionsProvider = EditorContextKeys.hasCodeActionsProvider.bindTo(_contextKeyService);\n    this._hasCodeLensProvider = EditorContextKeys.hasCodeLensProvider.bindTo(_contextKeyService);\n    this._hasDefinitionProvider = EditorContextKeys.hasDefinitionProvider.bindTo(_contextKeyService);\n    this._hasDeclarationProvider = EditorContextKeys.hasDeclarationProvider.bindTo(_contextKeyService);\n    this._hasImplementationProvider = EditorContextKeys.hasImplementationProvider.bindTo(_contextKeyService);\n    this._hasTypeDefinitionProvider = EditorContextKeys.hasTypeDefinitionProvider.bindTo(_contextKeyService);\n    this._hasHoverProvider = EditorContextKeys.hasHoverProvider.bindTo(_contextKeyService);\n    this._hasDocumentHighlightProvider = EditorContextKeys.hasDocumentHighlightProvider.bindTo(_contextKeyService);\n    this._hasDocumentSymbolProvider = EditorContextKeys.hasDocumentSymbolProvider.bindTo(_contextKeyService);\n    this._hasReferenceProvider = EditorContextKeys.hasReferenceProvider.bindTo(_contextKeyService);\n    this._hasRenameProvider = EditorContextKeys.hasRenameProvider.bindTo(_contextKeyService);\n    this._hasSignatureHelpProvider = EditorContextKeys.hasSignatureHelpProvider.bindTo(_contextKeyService);\n    this._hasInlineHintsProvider = EditorContextKeys.hasInlineHintsProvider.bindTo(_contextKeyService);\n    this._hasDocumentFormattingProvider = EditorContextKeys.hasDocumentFormattingProvider.bindTo(_contextKeyService);\n    this._hasDocumentSelectionFormattingProvider = EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n    this._hasMultipleDocumentFormattingProvider = EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo(_contextKeyService);\n    this._hasMultipleDocumentSelectionFormattingProvider = EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n    this._isInWalkThrough = EditorContextKeys.isInWalkThroughSnippet.bindTo(_contextKeyService);\n    const update = () => this._update();\n    // update when model/mode changes\n    this._register(_editor.onDidChangeModel(update));\n    this._register(_editor.onDidChangeModelLanguage(update));\n    // update when registries change\n    this._register(modes.CompletionProviderRegistry.onDidChange(update));\n    this._register(modes.CodeActionProviderRegistry.onDidChange(update));\n    this._register(modes.CodeLensProviderRegistry.onDidChange(update));\n    this._register(modes.DefinitionProviderRegistry.onDidChange(update));\n    this._register(modes.DeclarationProviderRegistry.onDidChange(update));\n    this._register(modes.ImplementationProviderRegistry.onDidChange(update));\n    this._register(modes.TypeDefinitionProviderRegistry.onDidChange(update));\n    this._register(modes.HoverProviderRegistry.onDidChange(update));\n    this._register(modes.DocumentHighlightProviderRegistry.onDidChange(update));\n    this._register(modes.DocumentSymbolProviderRegistry.onDidChange(update));\n    this._register(modes.ReferenceProviderRegistry.onDidChange(update));\n    this._register(modes.RenameProviderRegistry.onDidChange(update));\n    this._register(modes.DocumentFormattingEditProviderRegistry.onDidChange(update));\n    this._register(modes.DocumentRangeFormattingEditProviderRegistry.onDidChange(update));\n    this._register(modes.SignatureHelpProviderRegistry.onDidChange(update));\n    this._register(modes.InlineHintsProviderRegistry.onDidChange(update));\n    update();\n  }\n  dispose() {\n    super.dispose();\n  }\n  reset() {\n    this._contextKeyService.bufferChangeEvents(() => {\n      this._langId.reset();\n      this._hasCompletionItemProvider.reset();\n      this._hasCodeActionsProvider.reset();\n      this._hasCodeLensProvider.reset();\n      this._hasDefinitionProvider.reset();\n      this._hasDeclarationProvider.reset();\n      this._hasImplementationProvider.reset();\n      this._hasTypeDefinitionProvider.reset();\n      this._hasHoverProvider.reset();\n      this._hasDocumentHighlightProvider.reset();\n      this._hasDocumentSymbolProvider.reset();\n      this._hasReferenceProvider.reset();\n      this._hasRenameProvider.reset();\n      this._hasDocumentFormattingProvider.reset();\n      this._hasDocumentSelectionFormattingProvider.reset();\n      this._hasSignatureHelpProvider.reset();\n      this._isInWalkThrough.reset();\n    });\n  }\n  _update() {\n    const model = this._editor.getModel();\n    if (!model) {\n      this.reset();\n      return;\n    }\n    this._contextKeyService.bufferChangeEvents(() => {\n      this._langId.set(model.getLanguageIdentifier().language);\n      this._hasCompletionItemProvider.set(modes.CompletionProviderRegistry.has(model));\n      this._hasCodeActionsProvider.set(modes.CodeActionProviderRegistry.has(model));\n      this._hasCodeLensProvider.set(modes.CodeLensProviderRegistry.has(model));\n      this._hasDefinitionProvider.set(modes.DefinitionProviderRegistry.has(model));\n      this._hasDeclarationProvider.set(modes.DeclarationProviderRegistry.has(model));\n      this._hasImplementationProvider.set(modes.ImplementationProviderRegistry.has(model));\n      this._hasTypeDefinitionProvider.set(modes.TypeDefinitionProviderRegistry.has(model));\n      this._hasHoverProvider.set(modes.HoverProviderRegistry.has(model));\n      this._hasDocumentHighlightProvider.set(modes.DocumentHighlightProviderRegistry.has(model));\n      this._hasDocumentSymbolProvider.set(modes.DocumentSymbolProviderRegistry.has(model));\n      this._hasReferenceProvider.set(modes.ReferenceProviderRegistry.has(model));\n      this._hasRenameProvider.set(modes.RenameProviderRegistry.has(model));\n      this._hasSignatureHelpProvider.set(modes.SignatureHelpProviderRegistry.has(model));\n      this._hasInlineHintsProvider.set(modes.InlineHintsProviderRegistry.has(model));\n      this._hasDocumentFormattingProvider.set(modes.DocumentFormattingEditProviderRegistry.has(model) || modes.DocumentRangeFormattingEditProviderRegistry.has(model));\n      this._hasDocumentSelectionFormattingProvider.set(modes.DocumentRangeFormattingEditProviderRegistry.has(model));\n      this._hasMultipleDocumentFormattingProvider.set(modes.DocumentFormattingEditProviderRegistry.all(model).length + modes.DocumentRangeFormattingEditProviderRegistry.all(model).length > 1);\n      this._hasMultipleDocumentSelectionFormattingProvider.set(modes.DocumentRangeFormattingEditProviderRegistry.all(model).length > 1);\n      this._isInWalkThrough.set(model.uri.scheme === Schemas.walkThroughSnippet);\n    });\n  }\n}\nclass CodeEditorWidgetFocusTracker extends Disposable {\n  constructor(domElement) {\n    super();\n    this._onChange = this._register(new Emitter());\n    this.onChange = this._onChange.event;\n    this._hasFocus = false;\n    this._domFocusTracker = this._register(dom.trackFocus(domElement));\n    this._register(this._domFocusTracker.onDidFocus(() => {\n      this._hasFocus = true;\n      this._onChange.fire(undefined);\n    }));\n    this._register(this._domFocusTracker.onDidBlur(() => {\n      this._hasFocus = false;\n      this._onChange.fire(undefined);\n    }));\n  }\n  hasFocus() {\n    return this._hasFocus;\n  }\n}\nconst squigglyStart = encodeURIComponent(\"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='\");\nconst squigglyEnd = encodeURIComponent(\"'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>\");\nfunction getSquigglySVGData(color) {\n  return squigglyStart + encodeURIComponent(color.toString()) + squigglyEnd;\n}\nconst dotdotdotStart = encodeURIComponent(\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"3\\\" width=\\\"12\\\"><g fill=\\\"\");\nconst dotdotdotEnd = encodeURIComponent(\"\\\"><circle cx=\\\"1\\\" cy=\\\"1\\\" r=\\\"1\\\"/><circle cx=\\\"5\\\" cy=\\\"1\\\" r=\\\"1\\\"/><circle cx=\\\"9\\\" cy=\\\"1\\\" r=\\\"1\\\"/></g></svg>\");\nfunction getDotDotDotSVGData(color) {\n  return dotdotdotStart + encodeURIComponent(color.toString()) + dotdotdotEnd;\n}\nregisterThemingParticipant((theme, collector) => {\n  const errorBorderColor = theme.getColor(editorErrorBorder);\n  if (errorBorderColor) {\n    collector.addRule(\".monaco-editor .\".concat(\"squiggly-error\" /* EditorErrorDecoration */, \" { border-bottom: 4px double \", errorBorderColor, \"; }\"));\n  }\n  const errorForeground = theme.getColor(editorErrorForeground);\n  if (errorForeground) {\n    collector.addRule(\".monaco-editor .\".concat(\"squiggly-error\" /* EditorErrorDecoration */, \" { background: url(\\\"data:image/svg+xml,\", getSquigglySVGData(errorForeground), \"\\\") repeat-x bottom left; }\"));\n  }\n  const errorBackground = theme.getColor(editorErrorBackground);\n  if (errorBackground) {\n    collector.addRule(\".monaco-editor .\".concat(\"squiggly-error\" /* EditorErrorDecoration */, \"::before { display: block; content: ''; width: 100%; height: 100%; background: \", errorBackground, \"; }\"));\n  }\n  const warningBorderColor = theme.getColor(editorWarningBorder);\n  if (warningBorderColor) {\n    collector.addRule(\".monaco-editor .\".concat(\"squiggly-warning\" /* EditorWarningDecoration */, \" { border-bottom: 4px double \", warningBorderColor, \"; }\"));\n  }\n  const warningForeground = theme.getColor(editorWarningForeground);\n  if (warningForeground) {\n    collector.addRule(\".monaco-editor .\".concat(\"squiggly-warning\" /* EditorWarningDecoration */, \" { background: url(\\\"data:image/svg+xml,\", getSquigglySVGData(warningForeground), \"\\\") repeat-x bottom left; }\"));\n  }\n  const warningBackground = theme.getColor(editorWarningBackground);\n  if (warningBackground) {\n    collector.addRule(\".monaco-editor .\".concat(\"squiggly-warning\" /* EditorWarningDecoration */, \"::before { display: block; content: ''; width: 100%; height: 100%; background: \", warningBackground, \"; }\"));\n  }\n  const infoBorderColor = theme.getColor(editorInfoBorder);\n  if (infoBorderColor) {\n    collector.addRule(\".monaco-editor .\".concat(\"squiggly-info\" /* EditorInfoDecoration */, \" { border-bottom: 4px double \", infoBorderColor, \"; }\"));\n  }\n  const infoForeground = theme.getColor(editorInfoForeground);\n  if (infoForeground) {\n    collector.addRule(\".monaco-editor .\".concat(\"squiggly-info\" /* EditorInfoDecoration */, \" { background: url(\\\"data:image/svg+xml,\", getSquigglySVGData(infoForeground), \"\\\") repeat-x bottom left; }\"));\n  }\n  const infoBackground = theme.getColor(editorInfoBackground);\n  if (infoBackground) {\n    collector.addRule(\".monaco-editor .\".concat(\"squiggly-info\" /* EditorInfoDecoration */, \"::before { display: block; content: ''; width: 100%; height: 100%; background: \", infoBackground, \"; }\"));\n  }\n  const hintBorderColor = theme.getColor(editorHintBorder);\n  if (hintBorderColor) {\n    collector.addRule(\".monaco-editor .\".concat(\"squiggly-hint\" /* EditorHintDecoration */, \" { border-bottom: 2px dotted \", hintBorderColor, \"; }\"));\n  }\n  const hintForeground = theme.getColor(editorHintForeground);\n  if (hintForeground) {\n    collector.addRule(\".monaco-editor .\".concat(\"squiggly-hint\" /* EditorHintDecoration */, \" { background: url(\\\"data:image/svg+xml,\", getDotDotDotSVGData(hintForeground), \"\\\") no-repeat bottom left; }\"));\n  }\n  const unnecessaryForeground = theme.getColor(editorUnnecessaryCodeOpacity);\n  if (unnecessaryForeground) {\n    collector.addRule(\".monaco-editor.showUnused .\".concat(\"squiggly-inline-unnecessary\" /* EditorUnnecessaryInlineDecoration */, \" { opacity: \", unnecessaryForeground.rgba.a, \"; }\"));\n  }\n  const unnecessaryBorder = theme.getColor(editorUnnecessaryCodeBorder);\n  if (unnecessaryBorder) {\n    collector.addRule(\".monaco-editor.showUnused .\".concat(\"squiggly-unnecessary\" /* EditorUnnecessaryDecoration */, \" { border-bottom: 2px dashed \", unnecessaryBorder, \"; }\"));\n  }\n  const deprecatedForeground = theme.getColor(editorForeground) || 'inherit';\n  collector.addRule(\".monaco-editor.showDeprecated .\".concat(\"squiggly-inline-deprecated\" /* EditorDeprecatedInlineDecoration */, \" { text-decoration: line-through; text-decoration-color: \", deprecatedForeground, \"}\"));\n});","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","nls","dom","onUnexpectedError","Emitter","Disposable","dispose","Schemas","Configuration","EditorExtensionsRegistry","ICodeEditorService","View","ViewUserInputEvents","filterValidationDecorations","Cursor","CursorColumns","Position","Range","Selection","InternalEditorAction","editorCommon","EditorContextKeys","modes","editorUnnecessaryCodeBorder","editorUnnecessaryCodeOpacity","editorErrorBorder","editorErrorForeground","editorHintBorder","editorHintForeground","editorInfoBorder","editorInfoForeground","editorWarningBorder","editorWarningForeground","editorForeground","editorErrorBackground","editorInfoBackground","editorWarningBackground","ViewModel","ICommandService","IContextKeyService","IInstantiationService","ServiceCollection","INotificationService","IThemeService","registerThemingParticipant","IAccessibilityService","withNullAsUndefined","MonospaceLineBreaksComputerFactory","DOMLineBreaksComputerFactory","WordOperations","EDITOR_ID","ModelData","constructor","model","viewModel","view","hasRealView","listenersToRemove","onBeforeDetached","CodeEditorWidget","domElement","_options","codeEditorWidgetOptions","instantiationService","codeEditorService","commandService","contextKeyService","themeService","notificationService","accessibilityService","_onDidDispose","_register","onDidDispose","event","_onDidChangeModelContent","onDidChangeModelContent","_onDidChangeModelLanguage","onDidChangeModelLanguage","_onDidChangeModelLanguageConfiguration","onDidChangeModelLanguageConfiguration","_onDidChangeModelOptions","onDidChangeModelOptions","_onDidChangeModelDecorations","onDidChangeModelDecorations","_onDidChangeConfiguration","onDidChangeConfiguration","_onDidChangeModel","onDidChangeModel","_onDidChangeCursorPosition","onDidChangeCursorPosition","_onDidChangeCursorSelection","onDidChangeCursorSelection","_onDidAttemptReadOnlyEdit","onDidAttemptReadOnlyEdit","_onDidLayoutChange","onDidLayoutChange","_editorTextFocus","BooleanEventEmitter","onDidFocusEditorText","onDidChangeToTrue","onDidBlurEditorText","onDidChangeToFalse","_editorWidgetFocus","onDidFocusEditorWidget","onDidBlurEditorWidget","_onWillType","onWillType","_onDidType","onDidType","_onDidCompositionStart","onDidCompositionStart","_onDidCompositionEnd","onDidCompositionEnd","_onDidPaste","onDidPaste","_onMouseUp","onMouseUp","_onMouseDown","onMouseDown","_onMouseDrag","onMouseDrag","_onMouseDrop","onMouseDrop","_onMouseDropCanceled","onMouseDropCanceled","_onContextMenu","onContextMenu","_onMouseMove","onMouseMove","_onMouseLeave","onMouseLeave","_onMouseWheel","onMouseWheel","_onKeyUp","onKeyUp","_onKeyDown","onKeyDown","_onDidContentSizeChange","onDidContentSizeChange","_onDidScrollChange","onDidScrollChange","_onDidChangeViewZones","onDidChangeViewZones","options","assign","_domElement","_overflowWidgetsDomNode","overflowWidgetsDomNode","_id","_decorationTypeKeysToIds","_decorationTypeSubtypes","isSimpleWidget","_telemetryData","telemetryData","_configuration","_createConfiguration","onDidChange","e","fire","hasChanged","layoutInfo","get","_contextKeyService","createScoped","_notificationService","_codeEditorService","_commandService","_themeService","EditorContextKeysManager","EditorModeContext","_instantiationService","createChild","_modelData","_contributions","_actions","_focusTracker","CodeEditorWidgetFocusTracker","onChange","setValue","hasFocus","_contentWidgets","_overlayWidgets","contributions","Array","isArray","getEditorContributions","contribution","createInstance","ctor","id","err","getEditorActions","forEach","action","internalAction","label","alias","precondition","invokeFunction","accessor","Promise","resolve","runEditorCommand","addCodeEditor","getId","getEditorType","EditorType","ICodeEditor","removeCodeEditor","keys","len","contributionId","_removeDecorationTypes","_postDetachModelCleanup","_detachModel","invokeWithinContext","fn","updateOptions","newOptions","getOptions","getOption","getRawOptions","getOverflowWidgetsDomNode","getConfiguredWordAtPosition","position","getWordAtPosition","getValue","undefined","preserveBOM","eolPreference","lineEnding","newValue","getModel","setModel","_model","hasTextFocus","detachedModel","_attachModel","hasModel","focus","oldModelUrl","uri","newModelUrl","decorationType","subTypes","subType","_removeDecorationType","getVisibleRanges","getVisibleRangesPlusViewportAboveBelow","getWhitespaces","viewLayout","_getVerticalOffsetForPosition","modelData","modelLineNumber","modelColumn","modelPosition","validatePosition","lineNumber","column","viewPosition","coordinatesConverter","convertModelPositionToViewPosition","getVerticalOffsetForLineNumber","getTopForLineNumber","getTopForPosition","setHiddenAreas","ranges","map","lift","getVisibleColumnFromPosition","rawPosition","tabSize","visibleColumnFromColumn","getLineContent","getPosition","setPosition","isIPosition","Error","setSelections","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","_sendRevealRange","modelRange","verticalType","revealHorizontal","scrollType","isIRange","validatedModelRange","validateRange","viewRange","convertModelRangeToViewRange","revealRange","revealLine","_revealLine","revealLineInCenter","revealLineInCenterIfOutsideViewport","revealLineNearTop","revealType","revealPosition","_revealPosition","revealPositionInCenter","revealPositionInCenterIfOutsideViewport","revealPositionNearTop","getSelection","getSelections","setSelection","something","isSelection","isISelection","isRange","_setSelectionImpl","selection","startLineNumber","startColumn","endLineNumber","endColumn","sel","revealLines","_revealLines","revealLinesInCenter","revealLinesInCenterIfOutsideViewport","revealLinesNearTop","range","revealVerticalInCenter","_revealRange","revealRangeInCenter","revealRangeInCenterIfOutsideViewport","revealRangeNearTop","revealRangeNearTopIfOutsideViewport","revealRangeAtTop","source","reason","getContentWidth","getScrollWidth","getScrollLeft","getCurrentScrollLeft","getContentHeight","getScrollHeight","getScrollTop","getCurrentScrollTop","setScrollLeft","newScrollLeft","setScrollPosition","scrollLeft","setScrollTop","newScrollTop","scrollTop","saveViewState","contributionsState","cursorState","saveCursorState","viewState","saveState","restoreViewState","s","codeEditorState","restoreCursorState","reducedState","reduceRestoreState","restoreState","getContribution","getActions","result","push","getSupportedActions","filter","isSupported","getAction","trigger","handlerId","payload","_startComposition","_endComposition","args","_type","text","_replacePreviousChar","replaceCharCnt","_paste","pasteOnNewLine","multicursorText","mode","_cut","run","then","_triggerEditorCommand","executeCommand","startComposition","endComposition","type","replacePreviousChar","startPosition","getStartPosition","paste","endPosition","cut","command","getEditorCommand","_getViewModel","pushUndoStop","pushStackElement","popUndoStop","popStackElement","executeEdits","edits","endCursorState","cursorStateComputer","executeCommands","commands","changeDecorations","callback","getLineDecorations","deltaDecorations","oldDecorations","newDecorations","removeDecorations","decorationTypeKey","oldDecorationsIds","hasOwnProperty","getLayoutInfo","createOverviewRuler","cssClassName","getContainerDomNode","getDomNode","domNode","delegateVerticalScrollbarMouseDown","browserEvent","layout","dimension","observeReferenceElement","render","isFocused","hasWidgetFocus","addContentWidget","widget","widgetData","console","warn","layoutContentWidget","widgetId","removeContentWidget","addOverlayWidget","layoutOverlayWidget","removeOverlayWidget","changeViewZones","change","getTargetAtClientPoint","clientX","clientY","getScrolledVisiblePosition","top","left","getOffsetForColumn","glyphMarginWidth","lineNumbersWidth","decorationsWidth","height","forceRedraw","setAriaOptions","applyFontInfo","applyFontInfoSlow","setAttribute","getLanguageIdentifier","language","setIsDominatedByLongLines","isDominatedByLongLines","setMaxLineNumber","getLineCount","onBeforeAttached","create","scheduleAtNextAnimationFrame","onDidChangeDecorations","onDidChangeLanguage","onDidChangeLanguageConfiguration","onDidChangeContent","onDidChangeOptions","onWillDispose","onEvent","kind","reachedMaxCursorCount","localize","MAX_CURSOR_COUNT","positions","selections","e1","secondaryPositions","slice","e2","secondarySelections","modelVersionId","oldSelections","oldModelVersionId","_createView","appendChild","toString","commandDelegate","viewUserInputEvents","removeAllDecorationsWithOwnerId","removeDomNode","removeAttribute","contains","removeChild","removeDecorationType","_onDidChangeToTrue","_onDidChangeToFalse","_value","value","editor","_editor","createKey","_editorSimpleInput","editorSimpleInput","bindTo","_editorFocus","_textInputFocus","textInputFocus","editorTextFocus","_editorTabMovesFocus","tabMovesFocus","_editorReadonly","readOnly","_inDiffEditor","inDiffEditor","_editorColumnSelection","columnSelection","_hasMultipleSelections","hasMultipleSelections","_hasNonEmptySelection","hasNonEmptySelection","_canUndo","canUndo","_canRedo","canRedo","_updateFromConfig","_updateFromSelection","_updateFromFocus","_updateFromModel","set","reset","some","isEmpty","Boolean","_langId","languageId","_hasCompletionItemProvider","hasCompletionItemProvider","_hasCodeActionsProvider","hasCodeActionsProvider","_hasCodeLensProvider","hasCodeLensProvider","_hasDefinitionProvider","hasDefinitionProvider","_hasDeclarationProvider","hasDeclarationProvider","_hasImplementationProvider","hasImplementationProvider","_hasTypeDefinitionProvider","hasTypeDefinitionProvider","_hasHoverProvider","hasHoverProvider","_hasDocumentHighlightProvider","hasDocumentHighlightProvider","_hasDocumentSymbolProvider","hasDocumentSymbolProvider","_hasReferenceProvider","hasReferenceProvider","_hasRenameProvider","hasRenameProvider","_hasSignatureHelpProvider","hasSignatureHelpProvider","_hasInlineHintsProvider","hasInlineHintsProvider","_hasDocumentFormattingProvider","hasDocumentFormattingProvider","_hasDocumentSelectionFormattingProvider","hasDocumentSelectionFormattingProvider","_hasMultipleDocumentFormattingProvider","hasMultipleDocumentFormattingProvider","_hasMultipleDocumentSelectionFormattingProvider","hasMultipleDocumentSelectionFormattingProvider","_isInWalkThrough","isInWalkThroughSnippet","update","_update","CompletionProviderRegistry","CodeActionProviderRegistry","CodeLensProviderRegistry","DefinitionProviderRegistry","DeclarationProviderRegistry","ImplementationProviderRegistry","TypeDefinitionProviderRegistry","HoverProviderRegistry","DocumentHighlightProviderRegistry","DocumentSymbolProviderRegistry","ReferenceProviderRegistry","RenameProviderRegistry","DocumentFormattingEditProviderRegistry","DocumentRangeFormattingEditProviderRegistry","SignatureHelpProviderRegistry","InlineHintsProviderRegistry","bufferChangeEvents","has","all","scheme","walkThroughSnippet","_onChange","_hasFocus","_domFocusTracker","trackFocus","onDidFocus","onDidBlur","squigglyStart","encodeURIComponent","squigglyEnd","getSquigglySVGData","color","dotdotdotStart","dotdotdotEnd","getDotDotDotSVGData","theme","collector","errorBorderColor","getColor","addRule","concat","errorForeground","errorBackground","warningBorderColor","warningForeground","warningBackground","infoBorderColor","infoForeground","infoBackground","hintBorderColor","hintForeground","unnecessaryForeground","rgba","a","unnecessaryBorder","deprecatedForeground"],"sources":["C:/Users/Administrator/Desktop/sqllineage-master/sqllineagejs/node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditorWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport './media/editor.css';\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable, dispose } from '../../../base/common/lifecycle.js';\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { Configuration } from '../config/configuration.js';\r\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\r\nimport { ICodeEditorService } from '../services/codeEditorService.js';\r\nimport { View } from '../view/viewImpl.js';\r\nimport { ViewUserInputEvents } from '../view/viewUserInputEvents.js';\r\nimport { filterValidationDecorations } from '../../common/config/editorOptions.js';\r\nimport { Cursor } from '../../common/controller/cursor.js';\r\nimport { CursorColumns } from '../../common/controller/cursorCommon.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Selection } from '../../common/core/selection.js';\r\nimport { InternalEditorAction } from '../../common/editorAction.js';\r\nimport * as editorCommon from '../../common/editorCommon.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport * as modes from '../../common/modes.js';\r\nimport { editorUnnecessaryCodeBorder, editorUnnecessaryCodeOpacity } from '../../common/view/editorColorRegistry.js';\r\nimport { editorErrorBorder, editorErrorForeground, editorHintBorder, editorHintForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, editorForeground, editorErrorBackground, editorInfoBackground, editorWarningBackground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { ViewModel } from '../../common/viewModel/viewModelImpl.js';\r\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\r\nimport { withNullAsUndefined } from '../../../base/common/types.js';\r\nimport { MonospaceLineBreaksComputerFactory } from '../../common/viewModel/monospaceLineBreaksComputer.js';\r\nimport { DOMLineBreaksComputerFactory } from '../view/domLineBreaksComputer.js';\r\nimport { WordOperations } from '../../common/controller/cursorWordOperations.js';\r\nlet EDITOR_ID = 0;\r\nclass ModelData {\r\n    constructor(model, viewModel, view, hasRealView, listenersToRemove) {\r\n        this.model = model;\r\n        this.viewModel = viewModel;\r\n        this.view = view;\r\n        this.hasRealView = hasRealView;\r\n        this.listenersToRemove = listenersToRemove;\r\n    }\r\n    dispose() {\r\n        dispose(this.listenersToRemove);\r\n        this.model.onBeforeDetached();\r\n        if (this.hasRealView) {\r\n            this.view.dispose();\r\n        }\r\n        this.viewModel.dispose();\r\n    }\r\n}\r\nlet CodeEditorWidget = class CodeEditorWidget extends Disposable {\r\n    constructor(domElement, _options, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService) {\r\n        super();\r\n        //#region Eventing\r\n        this._onDidDispose = this._register(new Emitter());\r\n        this.onDidDispose = this._onDidDispose.event;\r\n        this._onDidChangeModelContent = this._register(new Emitter());\r\n        this.onDidChangeModelContent = this._onDidChangeModelContent.event;\r\n        this._onDidChangeModelLanguage = this._register(new Emitter());\r\n        this.onDidChangeModelLanguage = this._onDidChangeModelLanguage.event;\r\n        this._onDidChangeModelLanguageConfiguration = this._register(new Emitter());\r\n        this.onDidChangeModelLanguageConfiguration = this._onDidChangeModelLanguageConfiguration.event;\r\n        this._onDidChangeModelOptions = this._register(new Emitter());\r\n        this.onDidChangeModelOptions = this._onDidChangeModelOptions.event;\r\n        this._onDidChangeModelDecorations = this._register(new Emitter());\r\n        this.onDidChangeModelDecorations = this._onDidChangeModelDecorations.event;\r\n        this._onDidChangeConfiguration = this._register(new Emitter());\r\n        this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\r\n        this._onDidChangeModel = this._register(new Emitter());\r\n        this.onDidChangeModel = this._onDidChangeModel.event;\r\n        this._onDidChangeCursorPosition = this._register(new Emitter());\r\n        this.onDidChangeCursorPosition = this._onDidChangeCursorPosition.event;\r\n        this._onDidChangeCursorSelection = this._register(new Emitter());\r\n        this.onDidChangeCursorSelection = this._onDidChangeCursorSelection.event;\r\n        this._onDidAttemptReadOnlyEdit = this._register(new Emitter());\r\n        this.onDidAttemptReadOnlyEdit = this._onDidAttemptReadOnlyEdit.event;\r\n        this._onDidLayoutChange = this._register(new Emitter());\r\n        this.onDidLayoutChange = this._onDidLayoutChange.event;\r\n        this._editorTextFocus = this._register(new BooleanEventEmitter());\r\n        this.onDidFocusEditorText = this._editorTextFocus.onDidChangeToTrue;\r\n        this.onDidBlurEditorText = this._editorTextFocus.onDidChangeToFalse;\r\n        this._editorWidgetFocus = this._register(new BooleanEventEmitter());\r\n        this.onDidFocusEditorWidget = this._editorWidgetFocus.onDidChangeToTrue;\r\n        this.onDidBlurEditorWidget = this._editorWidgetFocus.onDidChangeToFalse;\r\n        this._onWillType = this._register(new Emitter());\r\n        this.onWillType = this._onWillType.event;\r\n        this._onDidType = this._register(new Emitter());\r\n        this.onDidType = this._onDidType.event;\r\n        this._onDidCompositionStart = this._register(new Emitter());\r\n        this.onDidCompositionStart = this._onDidCompositionStart.event;\r\n        this._onDidCompositionEnd = this._register(new Emitter());\r\n        this.onDidCompositionEnd = this._onDidCompositionEnd.event;\r\n        this._onDidPaste = this._register(new Emitter());\r\n        this.onDidPaste = this._onDidPaste.event;\r\n        this._onMouseUp = this._register(new Emitter());\r\n        this.onMouseUp = this._onMouseUp.event;\r\n        this._onMouseDown = this._register(new Emitter());\r\n        this.onMouseDown = this._onMouseDown.event;\r\n        this._onMouseDrag = this._register(new Emitter());\r\n        this.onMouseDrag = this._onMouseDrag.event;\r\n        this._onMouseDrop = this._register(new Emitter());\r\n        this.onMouseDrop = this._onMouseDrop.event;\r\n        this._onMouseDropCanceled = this._register(new Emitter());\r\n        this.onMouseDropCanceled = this._onMouseDropCanceled.event;\r\n        this._onContextMenu = this._register(new Emitter());\r\n        this.onContextMenu = this._onContextMenu.event;\r\n        this._onMouseMove = this._register(new Emitter());\r\n        this.onMouseMove = this._onMouseMove.event;\r\n        this._onMouseLeave = this._register(new Emitter());\r\n        this.onMouseLeave = this._onMouseLeave.event;\r\n        this._onMouseWheel = this._register(new Emitter());\r\n        this.onMouseWheel = this._onMouseWheel.event;\r\n        this._onKeyUp = this._register(new Emitter());\r\n        this.onKeyUp = this._onKeyUp.event;\r\n        this._onKeyDown = this._register(new Emitter());\r\n        this.onKeyDown = this._onKeyDown.event;\r\n        this._onDidContentSizeChange = this._register(new Emitter());\r\n        this.onDidContentSizeChange = this._onDidContentSizeChange.event;\r\n        this._onDidScrollChange = this._register(new Emitter());\r\n        this.onDidScrollChange = this._onDidScrollChange.event;\r\n        this._onDidChangeViewZones = this._register(new Emitter());\r\n        this.onDidChangeViewZones = this._onDidChangeViewZones.event;\r\n        const options = Object.assign({}, _options);\r\n        this._domElement = domElement;\r\n        this._overflowWidgetsDomNode = options.overflowWidgetsDomNode;\r\n        delete options.overflowWidgetsDomNode;\r\n        this._id = (++EDITOR_ID);\r\n        this._decorationTypeKeysToIds = {};\r\n        this._decorationTypeSubtypes = {};\r\n        this.isSimpleWidget = codeEditorWidgetOptions.isSimpleWidget || false;\r\n        this._telemetryData = codeEditorWidgetOptions.telemetryData;\r\n        this._configuration = this._register(this._createConfiguration(options, accessibilityService));\r\n        this._register(this._configuration.onDidChange((e) => {\r\n            this._onDidChangeConfiguration.fire(e);\r\n            const options = this._configuration.options;\r\n            if (e.hasChanged(124 /* layoutInfo */)) {\r\n                const layoutInfo = options.get(124 /* layoutInfo */);\r\n                this._onDidLayoutChange.fire(layoutInfo);\r\n            }\r\n        }));\r\n        this._contextKeyService = this._register(contextKeyService.createScoped(this._domElement));\r\n        this._notificationService = notificationService;\r\n        this._codeEditorService = codeEditorService;\r\n        this._commandService = commandService;\r\n        this._themeService = themeService;\r\n        this._register(new EditorContextKeysManager(this, this._contextKeyService));\r\n        this._register(new EditorModeContext(this, this._contextKeyService));\r\n        this._instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\r\n        this._modelData = null;\r\n        this._contributions = {};\r\n        this._actions = {};\r\n        this._focusTracker = new CodeEditorWidgetFocusTracker(domElement);\r\n        this._focusTracker.onChange(() => {\r\n            this._editorWidgetFocus.setValue(this._focusTracker.hasFocus());\r\n        });\r\n        this._contentWidgets = {};\r\n        this._overlayWidgets = {};\r\n        let contributions;\r\n        if (Array.isArray(codeEditorWidgetOptions.contributions)) {\r\n            contributions = codeEditorWidgetOptions.contributions;\r\n        }\r\n        else {\r\n            contributions = EditorExtensionsRegistry.getEditorContributions();\r\n        }\r\n        for (const desc of contributions) {\r\n            try {\r\n                const contribution = this._instantiationService.createInstance(desc.ctor, this);\r\n                this._contributions[desc.id] = contribution;\r\n            }\r\n            catch (err) {\r\n                onUnexpectedError(err);\r\n            }\r\n        }\r\n        EditorExtensionsRegistry.getEditorActions().forEach((action) => {\r\n            const internalAction = new InternalEditorAction(action.id, action.label, action.alias, withNullAsUndefined(action.precondition), () => {\r\n                return this._instantiationService.invokeFunction((accessor) => {\r\n                    return Promise.resolve(action.runEditorCommand(accessor, this, null));\r\n                });\r\n            }, this._contextKeyService);\r\n            this._actions[internalAction.id] = internalAction;\r\n        });\r\n        this._codeEditorService.addCodeEditor(this);\r\n    }\r\n    _createConfiguration(options, accessibilityService) {\r\n        return new Configuration(this.isSimpleWidget, options, this._domElement, accessibilityService);\r\n    }\r\n    getId() {\r\n        return this.getEditorType() + ':' + this._id;\r\n    }\r\n    getEditorType() {\r\n        return editorCommon.EditorType.ICodeEditor;\r\n    }\r\n    dispose() {\r\n        this._codeEditorService.removeCodeEditor(this);\r\n        this._focusTracker.dispose();\r\n        const keys = Object.keys(this._contributions);\r\n        for (let i = 0, len = keys.length; i < len; i++) {\r\n            const contributionId = keys[i];\r\n            this._contributions[contributionId].dispose();\r\n        }\r\n        this._removeDecorationTypes();\r\n        this._postDetachModelCleanup(this._detachModel());\r\n        this._onDidDispose.fire();\r\n        super.dispose();\r\n    }\r\n    invokeWithinContext(fn) {\r\n        return this._instantiationService.invokeFunction(fn);\r\n    }\r\n    updateOptions(newOptions) {\r\n        this._configuration.updateOptions(newOptions);\r\n    }\r\n    getOptions() {\r\n        return this._configuration.options;\r\n    }\r\n    getOption(id) {\r\n        return this._configuration.options.get(id);\r\n    }\r\n    getRawOptions() {\r\n        return this._configuration.getRawOptions();\r\n    }\r\n    getOverflowWidgetsDomNode() {\r\n        return this._overflowWidgetsDomNode;\r\n    }\r\n    getConfiguredWordAtPosition(position) {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return WordOperations.getWordAtPosition(this._modelData.model, this._configuration.options.get(110 /* wordSeparators */), position);\r\n    }\r\n    getValue(options = null) {\r\n        if (!this._modelData) {\r\n            return '';\r\n        }\r\n        const preserveBOM = (options && options.preserveBOM) ? true : false;\r\n        let eolPreference = 0 /* TextDefined */;\r\n        if (options && options.lineEnding && options.lineEnding === '\\n') {\r\n            eolPreference = 1 /* LF */;\r\n        }\r\n        else if (options && options.lineEnding && options.lineEnding === '\\r\\n') {\r\n            eolPreference = 2 /* CRLF */;\r\n        }\r\n        return this._modelData.model.getValue(eolPreference, preserveBOM);\r\n    }\r\n    setValue(newValue) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        this._modelData.model.setValue(newValue);\r\n    }\r\n    getModel() {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.model;\r\n    }\r\n    setModel(_model = null) {\r\n        const model = _model;\r\n        if (this._modelData === null && model === null) {\r\n            // Current model is the new model\r\n            return;\r\n        }\r\n        if (this._modelData && this._modelData.model === model) {\r\n            // Current model is the new model\r\n            return;\r\n        }\r\n        const hasTextFocus = this.hasTextFocus();\r\n        const detachedModel = this._detachModel();\r\n        this._attachModel(model);\r\n        if (hasTextFocus && this.hasModel()) {\r\n            this.focus();\r\n        }\r\n        const e = {\r\n            oldModelUrl: detachedModel ? detachedModel.uri : null,\r\n            newModelUrl: model ? model.uri : null\r\n        };\r\n        this._removeDecorationTypes();\r\n        this._onDidChangeModel.fire(e);\r\n        this._postDetachModelCleanup(detachedModel);\r\n    }\r\n    _removeDecorationTypes() {\r\n        this._decorationTypeKeysToIds = {};\r\n        if (this._decorationTypeSubtypes) {\r\n            for (let decorationType in this._decorationTypeSubtypes) {\r\n                const subTypes = this._decorationTypeSubtypes[decorationType];\r\n                for (let subType in subTypes) {\r\n                    this._removeDecorationType(decorationType + '-' + subType);\r\n                }\r\n            }\r\n            this._decorationTypeSubtypes = {};\r\n        }\r\n    }\r\n    getVisibleRanges() {\r\n        if (!this._modelData) {\r\n            return [];\r\n        }\r\n        return this._modelData.viewModel.getVisibleRanges();\r\n    }\r\n    getVisibleRangesPlusViewportAboveBelow() {\r\n        if (!this._modelData) {\r\n            return [];\r\n        }\r\n        return this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow();\r\n    }\r\n    getWhitespaces() {\r\n        if (!this._modelData) {\r\n            return [];\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getWhitespaces();\r\n    }\r\n    static _getVerticalOffsetForPosition(modelData, modelLineNumber, modelColumn) {\r\n        const modelPosition = modelData.model.validatePosition({\r\n            lineNumber: modelLineNumber,\r\n            column: modelColumn\r\n        });\r\n        const viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\r\n        return modelData.viewModel.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber);\r\n    }\r\n    getTopForLineNumber(lineNumber) {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, 1);\r\n    }\r\n    getTopForPosition(lineNumber, column) {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, column);\r\n    }\r\n    setHiddenAreas(ranges) {\r\n        if (this._modelData) {\r\n            this._modelData.viewModel.setHiddenAreas(ranges.map(r => Range.lift(r)));\r\n        }\r\n    }\r\n    getVisibleColumnFromPosition(rawPosition) {\r\n        if (!this._modelData) {\r\n            return rawPosition.column;\r\n        }\r\n        const position = this._modelData.model.validatePosition(rawPosition);\r\n        const tabSize = this._modelData.model.getOptions().tabSize;\r\n        return CursorColumns.visibleColumnFromColumn(this._modelData.model.getLineContent(position.lineNumber), position.column, tabSize) + 1;\r\n    }\r\n    getPosition() {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.viewModel.getPosition();\r\n    }\r\n    setPosition(position) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (!Position.isIPosition(position)) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._modelData.viewModel.setSelections('api', [{\r\n                selectionStartLineNumber: position.lineNumber,\r\n                selectionStartColumn: position.column,\r\n                positionLineNumber: position.lineNumber,\r\n                positionColumn: position.column\r\n            }]);\r\n    }\r\n    _sendRevealRange(modelRange, verticalType, revealHorizontal, scrollType) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (!Range.isIRange(modelRange)) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        const validatedModelRange = this._modelData.model.validateRange(modelRange);\r\n        const viewRange = this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(validatedModelRange);\r\n        this._modelData.viewModel.revealRange('api', revealHorizontal, viewRange, verticalType, scrollType);\r\n    }\r\n    revealLine(lineNumber, scrollType = 0 /* Smooth */) {\r\n        this._revealLine(lineNumber, 0 /* Simple */, scrollType);\r\n    }\r\n    revealLineInCenter(lineNumber, scrollType = 0 /* Smooth */) {\r\n        this._revealLine(lineNumber, 1 /* Center */, scrollType);\r\n    }\r\n    revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0 /* Smooth */) {\r\n        this._revealLine(lineNumber, 2 /* CenterIfOutsideViewport */, scrollType);\r\n    }\r\n    revealLineNearTop(lineNumber, scrollType = 0 /* Smooth */) {\r\n        this._revealLine(lineNumber, 5 /* NearTop */, scrollType);\r\n    }\r\n    _revealLine(lineNumber, revealType, scrollType) {\r\n        if (typeof lineNumber !== 'number') {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._sendRevealRange(new Range(lineNumber, 1, lineNumber, 1), revealType, false, scrollType);\r\n    }\r\n    revealPosition(position, scrollType = 0 /* Smooth */) {\r\n        this._revealPosition(position, 0 /* Simple */, true, scrollType);\r\n    }\r\n    revealPositionInCenter(position, scrollType = 0 /* Smooth */) {\r\n        this._revealPosition(position, 1 /* Center */, true, scrollType);\r\n    }\r\n    revealPositionInCenterIfOutsideViewport(position, scrollType = 0 /* Smooth */) {\r\n        this._revealPosition(position, 2 /* CenterIfOutsideViewport */, true, scrollType);\r\n    }\r\n    revealPositionNearTop(position, scrollType = 0 /* Smooth */) {\r\n        this._revealPosition(position, 5 /* NearTop */, true, scrollType);\r\n    }\r\n    _revealPosition(position, verticalType, revealHorizontal, scrollType) {\r\n        if (!Position.isIPosition(position)) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._sendRevealRange(new Range(position.lineNumber, position.column, position.lineNumber, position.column), verticalType, revealHorizontal, scrollType);\r\n    }\r\n    getSelection() {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.viewModel.getSelection();\r\n    }\r\n    getSelections() {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.viewModel.getSelections();\r\n    }\r\n    setSelection(something) {\r\n        const isSelection = Selection.isISelection(something);\r\n        const isRange = Range.isIRange(something);\r\n        if (!isSelection && !isRange) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        if (isSelection) {\r\n            this._setSelectionImpl(something);\r\n        }\r\n        else if (isRange) {\r\n            // act as if it was an IRange\r\n            const selection = {\r\n                selectionStartLineNumber: something.startLineNumber,\r\n                selectionStartColumn: something.startColumn,\r\n                positionLineNumber: something.endLineNumber,\r\n                positionColumn: something.endColumn\r\n            };\r\n            this._setSelectionImpl(selection);\r\n        }\r\n    }\r\n    _setSelectionImpl(sel) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        const selection = new Selection(sel.selectionStartLineNumber, sel.selectionStartColumn, sel.positionLineNumber, sel.positionColumn);\r\n        this._modelData.viewModel.setSelections('api', [selection]);\r\n    }\r\n    revealLines(startLineNumber, endLineNumber, scrollType = 0 /* Smooth */) {\r\n        this._revealLines(startLineNumber, endLineNumber, 0 /* Simple */, scrollType);\r\n    }\r\n    revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0 /* Smooth */) {\r\n        this._revealLines(startLineNumber, endLineNumber, 1 /* Center */, scrollType);\r\n    }\r\n    revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0 /* Smooth */) {\r\n        this._revealLines(startLineNumber, endLineNumber, 2 /* CenterIfOutsideViewport */, scrollType);\r\n    }\r\n    revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0 /* Smooth */) {\r\n        this._revealLines(startLineNumber, endLineNumber, 5 /* NearTop */, scrollType);\r\n    }\r\n    _revealLines(startLineNumber, endLineNumber, verticalType, scrollType) {\r\n        if (typeof startLineNumber !== 'number' || typeof endLineNumber !== 'number') {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._sendRevealRange(new Range(startLineNumber, 1, endLineNumber, 1), verticalType, false, scrollType);\r\n    }\r\n    revealRange(range, scrollType = 0 /* Smooth */, revealVerticalInCenter = false, revealHorizontal = true) {\r\n        this._revealRange(range, revealVerticalInCenter ? 1 /* Center */ : 0 /* Simple */, revealHorizontal, scrollType);\r\n    }\r\n    revealRangeInCenter(range, scrollType = 0 /* Smooth */) {\r\n        this._revealRange(range, 1 /* Center */, true, scrollType);\r\n    }\r\n    revealRangeInCenterIfOutsideViewport(range, scrollType = 0 /* Smooth */) {\r\n        this._revealRange(range, 2 /* CenterIfOutsideViewport */, true, scrollType);\r\n    }\r\n    revealRangeNearTop(range, scrollType = 0 /* Smooth */) {\r\n        this._revealRange(range, 5 /* NearTop */, true, scrollType);\r\n    }\r\n    revealRangeNearTopIfOutsideViewport(range, scrollType = 0 /* Smooth */) {\r\n        this._revealRange(range, 6 /* NearTopIfOutsideViewport */, true, scrollType);\r\n    }\r\n    revealRangeAtTop(range, scrollType = 0 /* Smooth */) {\r\n        this._revealRange(range, 3 /* Top */, true, scrollType);\r\n    }\r\n    _revealRange(range, verticalType, revealHorizontal, scrollType) {\r\n        if (!Range.isIRange(range)) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._sendRevealRange(Range.lift(range), verticalType, revealHorizontal, scrollType);\r\n    }\r\n    setSelections(ranges, source = 'api', reason = 0 /* NotSet */) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (!ranges || ranges.length === 0) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        for (let i = 0, len = ranges.length; i < len; i++) {\r\n            if (!Selection.isISelection(ranges[i])) {\r\n                throw new Error('Invalid arguments');\r\n            }\r\n        }\r\n        this._modelData.viewModel.setSelections(source, ranges, reason);\r\n    }\r\n    getContentWidth() {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getContentWidth();\r\n    }\r\n    getScrollWidth() {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getScrollWidth();\r\n    }\r\n    getScrollLeft() {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getCurrentScrollLeft();\r\n    }\r\n    getContentHeight() {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getContentHeight();\r\n    }\r\n    getScrollHeight() {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getScrollHeight();\r\n    }\r\n    getScrollTop() {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getCurrentScrollTop();\r\n    }\r\n    setScrollLeft(newScrollLeft, scrollType = 1 /* Immediate */) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (typeof newScrollLeft !== 'number') {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._modelData.viewModel.setScrollPosition({\r\n            scrollLeft: newScrollLeft\r\n        }, scrollType);\r\n    }\r\n    setScrollTop(newScrollTop, scrollType = 1 /* Immediate */) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (typeof newScrollTop !== 'number') {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._modelData.viewModel.setScrollPosition({\r\n            scrollTop: newScrollTop\r\n        }, scrollType);\r\n    }\r\n    setScrollPosition(position, scrollType = 1 /* Immediate */) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        this._modelData.viewModel.setScrollPosition(position, scrollType);\r\n    }\r\n    saveViewState() {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        const contributionsState = {};\r\n        const keys = Object.keys(this._contributions);\r\n        for (const id of keys) {\r\n            const contribution = this._contributions[id];\r\n            if (typeof contribution.saveViewState === 'function') {\r\n                contributionsState[id] = contribution.saveViewState();\r\n            }\r\n        }\r\n        const cursorState = this._modelData.viewModel.saveCursorState();\r\n        const viewState = this._modelData.viewModel.saveState();\r\n        return {\r\n            cursorState: cursorState,\r\n            viewState: viewState,\r\n            contributionsState: contributionsState\r\n        };\r\n    }\r\n    restoreViewState(s) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        const codeEditorState = s;\r\n        if (codeEditorState && codeEditorState.cursorState && codeEditorState.viewState) {\r\n            const cursorState = codeEditorState.cursorState;\r\n            if (Array.isArray(cursorState)) {\r\n                this._modelData.viewModel.restoreCursorState(cursorState);\r\n            }\r\n            else {\r\n                // Backwards compatibility\r\n                this._modelData.viewModel.restoreCursorState([cursorState]);\r\n            }\r\n            const contributionsState = codeEditorState.contributionsState || {};\r\n            const keys = Object.keys(this._contributions);\r\n            for (let i = 0, len = keys.length; i < len; i++) {\r\n                const id = keys[i];\r\n                const contribution = this._contributions[id];\r\n                if (typeof contribution.restoreViewState === 'function') {\r\n                    contribution.restoreViewState(contributionsState[id]);\r\n                }\r\n            }\r\n            const reducedState = this._modelData.viewModel.reduceRestoreState(codeEditorState.viewState);\r\n            this._modelData.view.restoreState(reducedState);\r\n        }\r\n    }\r\n    getContribution(id) {\r\n        return (this._contributions[id] || null);\r\n    }\r\n    getActions() {\r\n        const result = [];\r\n        const keys = Object.keys(this._actions);\r\n        for (let i = 0, len = keys.length; i < len; i++) {\r\n            const id = keys[i];\r\n            result.push(this._actions[id]);\r\n        }\r\n        return result;\r\n    }\r\n    getSupportedActions() {\r\n        let result = this.getActions();\r\n        result = result.filter(action => action.isSupported());\r\n        return result;\r\n    }\r\n    getAction(id) {\r\n        return this._actions[id] || null;\r\n    }\r\n    trigger(source, handlerId, payload) {\r\n        payload = payload || {};\r\n        switch (handlerId) {\r\n            case \"compositionStart\" /* CompositionStart */:\r\n                this._startComposition();\r\n                return;\r\n            case \"compositionEnd\" /* CompositionEnd */:\r\n                this._endComposition(source);\r\n                return;\r\n            case \"type\" /* Type */: {\r\n                const args = payload;\r\n                this._type(source, args.text || '');\r\n                return;\r\n            }\r\n            case \"replacePreviousChar\" /* ReplacePreviousChar */: {\r\n                const args = payload;\r\n                this._replacePreviousChar(source, args.text || '', args.replaceCharCnt || 0);\r\n                return;\r\n            }\r\n            case \"paste\" /* Paste */: {\r\n                const args = payload;\r\n                this._paste(source, args.text || '', args.pasteOnNewLine || false, args.multicursorText || null, args.mode || null);\r\n                return;\r\n            }\r\n            case \"cut\" /* Cut */:\r\n                this._cut(source);\r\n                return;\r\n        }\r\n        const action = this.getAction(handlerId);\r\n        if (action) {\r\n            Promise.resolve(action.run()).then(undefined, onUnexpectedError);\r\n            return;\r\n        }\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (this._triggerEditorCommand(source, handlerId, payload)) {\r\n            return;\r\n        }\r\n        this._commandService.executeCommand(handlerId, payload);\r\n    }\r\n    _startComposition() {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        this._modelData.viewModel.startComposition();\r\n        this._onDidCompositionStart.fire();\r\n    }\r\n    _endComposition(source) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        this._modelData.viewModel.endComposition(source);\r\n        this._onDidCompositionEnd.fire();\r\n    }\r\n    _type(source, text) {\r\n        if (!this._modelData || text.length === 0) {\r\n            return;\r\n        }\r\n        if (source === 'keyboard') {\r\n            this._onWillType.fire(text);\r\n        }\r\n        this._modelData.viewModel.type(text, source);\r\n        if (source === 'keyboard') {\r\n            this._onDidType.fire(text);\r\n        }\r\n    }\r\n    _replacePreviousChar(source, text, replaceCharCnt) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        this._modelData.viewModel.replacePreviousChar(text, replaceCharCnt, source);\r\n    }\r\n    _paste(source, text, pasteOnNewLine, multicursorText, mode) {\r\n        if (!this._modelData || text.length === 0) {\r\n            return;\r\n        }\r\n        const startPosition = this._modelData.viewModel.getSelection().getStartPosition();\r\n        this._modelData.viewModel.paste(text, pasteOnNewLine, multicursorText, source);\r\n        const endPosition = this._modelData.viewModel.getSelection().getStartPosition();\r\n        if (source === 'keyboard') {\r\n            this._onDidPaste.fire({\r\n                range: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\r\n                mode: mode\r\n            });\r\n        }\r\n    }\r\n    _cut(source) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        this._modelData.viewModel.cut(source);\r\n    }\r\n    _triggerEditorCommand(source, handlerId, payload) {\r\n        const command = EditorExtensionsRegistry.getEditorCommand(handlerId);\r\n        if (command) {\r\n            payload = payload || {};\r\n            payload.source = source;\r\n            this._instantiationService.invokeFunction((accessor) => {\r\n                Promise.resolve(command.runEditorCommand(accessor, this, payload)).then(undefined, onUnexpectedError);\r\n            });\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    _getViewModel() {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.viewModel;\r\n    }\r\n    pushUndoStop() {\r\n        if (!this._modelData) {\r\n            return false;\r\n        }\r\n        if (this._configuration.options.get(75 /* readOnly */)) {\r\n            // read only editor => sorry!\r\n            return false;\r\n        }\r\n        this._modelData.model.pushStackElement();\r\n        return true;\r\n    }\r\n    popUndoStop() {\r\n        if (!this._modelData) {\r\n            return false;\r\n        }\r\n        if (this._configuration.options.get(75 /* readOnly */)) {\r\n            // read only editor => sorry!\r\n            return false;\r\n        }\r\n        this._modelData.model.popStackElement();\r\n        return true;\r\n    }\r\n    executeEdits(source, edits, endCursorState) {\r\n        if (!this._modelData) {\r\n            return false;\r\n        }\r\n        if (this._configuration.options.get(75 /* readOnly */)) {\r\n            // read only editor => sorry!\r\n            return false;\r\n        }\r\n        let cursorStateComputer;\r\n        if (!endCursorState) {\r\n            cursorStateComputer = () => null;\r\n        }\r\n        else if (Array.isArray(endCursorState)) {\r\n            cursorStateComputer = () => endCursorState;\r\n        }\r\n        else {\r\n            cursorStateComputer = endCursorState;\r\n        }\r\n        this._modelData.viewModel.executeEdits(source, edits, cursorStateComputer);\r\n        return true;\r\n    }\r\n    executeCommand(source, command) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        this._modelData.viewModel.executeCommand(command, source);\r\n    }\r\n    executeCommands(source, commands) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        this._modelData.viewModel.executeCommands(commands, source);\r\n    }\r\n    changeDecorations(callback) {\r\n        if (!this._modelData) {\r\n            // callback will not be called\r\n            return null;\r\n        }\r\n        return this._modelData.model.changeDecorations(callback, this._id);\r\n    }\r\n    getLineDecorations(lineNumber) {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.model.getLineDecorations(lineNumber, this._id, filterValidationDecorations(this._configuration.options));\r\n    }\r\n    deltaDecorations(oldDecorations, newDecorations) {\r\n        if (!this._modelData) {\r\n            return [];\r\n        }\r\n        if (oldDecorations.length === 0 && newDecorations.length === 0) {\r\n            return oldDecorations;\r\n        }\r\n        return this._modelData.model.deltaDecorations(oldDecorations, newDecorations, this._id);\r\n    }\r\n    removeDecorations(decorationTypeKey) {\r\n        // remove decorations for type and sub type\r\n        const oldDecorationsIds = this._decorationTypeKeysToIds[decorationTypeKey];\r\n        if (oldDecorationsIds) {\r\n            this.deltaDecorations(oldDecorationsIds, []);\r\n        }\r\n        if (this._decorationTypeKeysToIds.hasOwnProperty(decorationTypeKey)) {\r\n            delete this._decorationTypeKeysToIds[decorationTypeKey];\r\n        }\r\n        if (this._decorationTypeSubtypes.hasOwnProperty(decorationTypeKey)) {\r\n            delete this._decorationTypeSubtypes[decorationTypeKey];\r\n        }\r\n    }\r\n    getLayoutInfo() {\r\n        const options = this._configuration.options;\r\n        const layoutInfo = options.get(124 /* layoutInfo */);\r\n        return layoutInfo;\r\n    }\r\n    createOverviewRuler(cssClassName) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return null;\r\n        }\r\n        return this._modelData.view.createOverviewRuler(cssClassName);\r\n    }\r\n    getContainerDomNode() {\r\n        return this._domElement;\r\n    }\r\n    getDomNode() {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return null;\r\n        }\r\n        return this._modelData.view.domNode.domNode;\r\n    }\r\n    delegateVerticalScrollbarMouseDown(browserEvent) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        this._modelData.view.delegateVerticalScrollbarMouseDown(browserEvent);\r\n    }\r\n    layout(dimension) {\r\n        this._configuration.observeReferenceElement(dimension);\r\n        this.render();\r\n    }\r\n    focus() {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        this._modelData.view.focus();\r\n    }\r\n    hasTextFocus() {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return false;\r\n        }\r\n        return this._modelData.view.isFocused();\r\n    }\r\n    hasWidgetFocus() {\r\n        return this._focusTracker && this._focusTracker.hasFocus();\r\n    }\r\n    addContentWidget(widget) {\r\n        const widgetData = {\r\n            widget: widget,\r\n            position: widget.getPosition()\r\n        };\r\n        if (this._contentWidgets.hasOwnProperty(widget.getId())) {\r\n            console.warn('Overwriting a content widget with the same id.');\r\n        }\r\n        this._contentWidgets[widget.getId()] = widgetData;\r\n        if (this._modelData && this._modelData.hasRealView) {\r\n            this._modelData.view.addContentWidget(widgetData);\r\n        }\r\n    }\r\n    layoutContentWidget(widget) {\r\n        const widgetId = widget.getId();\r\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\r\n            const widgetData = this._contentWidgets[widgetId];\r\n            widgetData.position = widget.getPosition();\r\n            if (this._modelData && this._modelData.hasRealView) {\r\n                this._modelData.view.layoutContentWidget(widgetData);\r\n            }\r\n        }\r\n    }\r\n    removeContentWidget(widget) {\r\n        const widgetId = widget.getId();\r\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\r\n            const widgetData = this._contentWidgets[widgetId];\r\n            delete this._contentWidgets[widgetId];\r\n            if (this._modelData && this._modelData.hasRealView) {\r\n                this._modelData.view.removeContentWidget(widgetData);\r\n            }\r\n        }\r\n    }\r\n    addOverlayWidget(widget) {\r\n        const widgetData = {\r\n            widget: widget,\r\n            position: widget.getPosition()\r\n        };\r\n        if (this._overlayWidgets.hasOwnProperty(widget.getId())) {\r\n            console.warn('Overwriting an overlay widget with the same id.');\r\n        }\r\n        this._overlayWidgets[widget.getId()] = widgetData;\r\n        if (this._modelData && this._modelData.hasRealView) {\r\n            this._modelData.view.addOverlayWidget(widgetData);\r\n        }\r\n    }\r\n    layoutOverlayWidget(widget) {\r\n        const widgetId = widget.getId();\r\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\r\n            const widgetData = this._overlayWidgets[widgetId];\r\n            widgetData.position = widget.getPosition();\r\n            if (this._modelData && this._modelData.hasRealView) {\r\n                this._modelData.view.layoutOverlayWidget(widgetData);\r\n            }\r\n        }\r\n    }\r\n    removeOverlayWidget(widget) {\r\n        const widgetId = widget.getId();\r\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\r\n            const widgetData = this._overlayWidgets[widgetId];\r\n            delete this._overlayWidgets[widgetId];\r\n            if (this._modelData && this._modelData.hasRealView) {\r\n                this._modelData.view.removeOverlayWidget(widgetData);\r\n            }\r\n        }\r\n    }\r\n    changeViewZones(callback) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        this._modelData.view.change(callback);\r\n    }\r\n    getTargetAtClientPoint(clientX, clientY) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return null;\r\n        }\r\n        return this._modelData.view.getTargetAtClientPoint(clientX, clientY);\r\n    }\r\n    getScrolledVisiblePosition(rawPosition) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return null;\r\n        }\r\n        const position = this._modelData.model.validatePosition(rawPosition);\r\n        const options = this._configuration.options;\r\n        const layoutInfo = options.get(124 /* layoutInfo */);\r\n        const top = CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, position.lineNumber, position.column) - this.getScrollTop();\r\n        const left = this._modelData.view.getOffsetForColumn(position.lineNumber, position.column) + layoutInfo.glyphMarginWidth + layoutInfo.lineNumbersWidth + layoutInfo.decorationsWidth - this.getScrollLeft();\r\n        return {\r\n            top: top,\r\n            left: left,\r\n            height: options.get(53 /* lineHeight */)\r\n        };\r\n    }\r\n    getOffsetForColumn(lineNumber, column) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return -1;\r\n        }\r\n        return this._modelData.view.getOffsetForColumn(lineNumber, column);\r\n    }\r\n    render(forceRedraw = false) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        this._modelData.view.render(true, forceRedraw);\r\n    }\r\n    setAriaOptions(options) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        this._modelData.view.setAriaOptions(options);\r\n    }\r\n    applyFontInfo(target) {\r\n        Configuration.applyFontInfoSlow(target, this._configuration.options.get(38 /* fontInfo */));\r\n    }\r\n    _attachModel(model) {\r\n        if (!model) {\r\n            this._modelData = null;\r\n            return;\r\n        }\r\n        const listenersToRemove = [];\r\n        this._domElement.setAttribute('data-mode-id', model.getLanguageIdentifier().language);\r\n        this._configuration.setIsDominatedByLongLines(model.isDominatedByLongLines());\r\n        this._configuration.setMaxLineNumber(model.getLineCount());\r\n        model.onBeforeAttached();\r\n        const viewModel = new ViewModel(this._id, this._configuration, model, DOMLineBreaksComputerFactory.create(), MonospaceLineBreaksComputerFactory.create(this._configuration.options), (callback) => dom.scheduleAtNextAnimationFrame(callback));\r\n        listenersToRemove.push(model.onDidChangeDecorations((e) => this._onDidChangeModelDecorations.fire(e)));\r\n        listenersToRemove.push(model.onDidChangeLanguage((e) => {\r\n            this._domElement.setAttribute('data-mode-id', model.getLanguageIdentifier().language);\r\n            this._onDidChangeModelLanguage.fire(e);\r\n        }));\r\n        listenersToRemove.push(model.onDidChangeLanguageConfiguration((e) => this._onDidChangeModelLanguageConfiguration.fire(e)));\r\n        listenersToRemove.push(model.onDidChangeContent((e) => this._onDidChangeModelContent.fire(e)));\r\n        listenersToRemove.push(model.onDidChangeOptions((e) => this._onDidChangeModelOptions.fire(e)));\r\n        // Someone might destroy the model from under the editor, so prevent any exceptions by setting a null model\r\n        listenersToRemove.push(model.onWillDispose(() => this.setModel(null)));\r\n        listenersToRemove.push(viewModel.onEvent((e) => {\r\n            switch (e.kind) {\r\n                case 0 /* ContentSizeChanged */:\r\n                    this._onDidContentSizeChange.fire(e);\r\n                    break;\r\n                case 1 /* FocusChanged */:\r\n                    this._editorTextFocus.setValue(e.hasFocus);\r\n                    break;\r\n                case 2 /* ScrollChanged */:\r\n                    this._onDidScrollChange.fire(e);\r\n                    break;\r\n                case 3 /* ViewZonesChanged */:\r\n                    this._onDidChangeViewZones.fire();\r\n                    break;\r\n                case 4 /* ReadOnlyEditAttempt */:\r\n                    this._onDidAttemptReadOnlyEdit.fire();\r\n                    break;\r\n                case 5 /* CursorStateChanged */: {\r\n                    if (e.reachedMaxCursorCount) {\r\n                        this._notificationService.warn(nls.localize('cursors.maximum', \"The number of cursors has been limited to {0}.\", Cursor.MAX_CURSOR_COUNT));\r\n                    }\r\n                    const positions = [];\r\n                    for (let i = 0, len = e.selections.length; i < len; i++) {\r\n                        positions[i] = e.selections[i].getPosition();\r\n                    }\r\n                    const e1 = {\r\n                        position: positions[0],\r\n                        secondaryPositions: positions.slice(1),\r\n                        reason: e.reason,\r\n                        source: e.source\r\n                    };\r\n                    this._onDidChangeCursorPosition.fire(e1);\r\n                    const e2 = {\r\n                        selection: e.selections[0],\r\n                        secondarySelections: e.selections.slice(1),\r\n                        modelVersionId: e.modelVersionId,\r\n                        oldSelections: e.oldSelections,\r\n                        oldModelVersionId: e.oldModelVersionId,\r\n                        source: e.source,\r\n                        reason: e.reason\r\n                    };\r\n                    this._onDidChangeCursorSelection.fire(e2);\r\n                    break;\r\n                }\r\n            }\r\n        }));\r\n        const [view, hasRealView] = this._createView(viewModel);\r\n        if (hasRealView) {\r\n            this._domElement.appendChild(view.domNode.domNode);\r\n            let keys = Object.keys(this._contentWidgets);\r\n            for (let i = 0, len = keys.length; i < len; i++) {\r\n                const widgetId = keys[i];\r\n                view.addContentWidget(this._contentWidgets[widgetId]);\r\n            }\r\n            keys = Object.keys(this._overlayWidgets);\r\n            for (let i = 0, len = keys.length; i < len; i++) {\r\n                const widgetId = keys[i];\r\n                view.addOverlayWidget(this._overlayWidgets[widgetId]);\r\n            }\r\n            view.render(false, true);\r\n            view.domNode.domNode.setAttribute('data-uri', model.uri.toString());\r\n        }\r\n        this._modelData = new ModelData(model, viewModel, view, hasRealView, listenersToRemove);\r\n    }\r\n    _createView(viewModel) {\r\n        let commandDelegate;\r\n        if (this.isSimpleWidget) {\r\n            commandDelegate = {\r\n                paste: (text, pasteOnNewLine, multicursorText, mode) => {\r\n                    this._paste('keyboard', text, pasteOnNewLine, multicursorText, mode);\r\n                },\r\n                type: (text) => {\r\n                    this._type('keyboard', text);\r\n                },\r\n                replacePreviousChar: (text, replaceCharCnt) => {\r\n                    this._replacePreviousChar('keyboard', text, replaceCharCnt);\r\n                },\r\n                startComposition: () => {\r\n                    this._startComposition();\r\n                },\r\n                endComposition: () => {\r\n                    this._endComposition('keyboard');\r\n                },\r\n                cut: () => {\r\n                    this._cut('keyboard');\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            commandDelegate = {\r\n                paste: (text, pasteOnNewLine, multicursorText, mode) => {\r\n                    const payload = { text, pasteOnNewLine, multicursorText, mode };\r\n                    this._commandService.executeCommand(\"paste\" /* Paste */, payload);\r\n                },\r\n                type: (text) => {\r\n                    const payload = { text };\r\n                    this._commandService.executeCommand(\"type\" /* Type */, payload);\r\n                },\r\n                replacePreviousChar: (text, replaceCharCnt) => {\r\n                    const payload = { text, replaceCharCnt };\r\n                    this._commandService.executeCommand(\"replacePreviousChar\" /* ReplacePreviousChar */, payload);\r\n                },\r\n                startComposition: () => {\r\n                    this._commandService.executeCommand(\"compositionStart\" /* CompositionStart */, {});\r\n                },\r\n                endComposition: () => {\r\n                    this._commandService.executeCommand(\"compositionEnd\" /* CompositionEnd */, {});\r\n                },\r\n                cut: () => {\r\n                    this._commandService.executeCommand(\"cut\" /* Cut */, {});\r\n                }\r\n            };\r\n        }\r\n        const viewUserInputEvents = new ViewUserInputEvents(viewModel.coordinatesConverter);\r\n        viewUserInputEvents.onKeyDown = (e) => this._onKeyDown.fire(e);\r\n        viewUserInputEvents.onKeyUp = (e) => this._onKeyUp.fire(e);\r\n        viewUserInputEvents.onContextMenu = (e) => this._onContextMenu.fire(e);\r\n        viewUserInputEvents.onMouseMove = (e) => this._onMouseMove.fire(e);\r\n        viewUserInputEvents.onMouseLeave = (e) => this._onMouseLeave.fire(e);\r\n        viewUserInputEvents.onMouseDown = (e) => this._onMouseDown.fire(e);\r\n        viewUserInputEvents.onMouseUp = (e) => this._onMouseUp.fire(e);\r\n        viewUserInputEvents.onMouseDrag = (e) => this._onMouseDrag.fire(e);\r\n        viewUserInputEvents.onMouseDrop = (e) => this._onMouseDrop.fire(e);\r\n        viewUserInputEvents.onMouseDropCanceled = (e) => this._onMouseDropCanceled.fire(e);\r\n        viewUserInputEvents.onMouseWheel = (e) => this._onMouseWheel.fire(e);\r\n        const view = new View(commandDelegate, this._configuration, this._themeService, viewModel, viewUserInputEvents, this._overflowWidgetsDomNode);\r\n        return [view, true];\r\n    }\r\n    _postDetachModelCleanup(detachedModel) {\r\n        if (detachedModel) {\r\n            detachedModel.removeAllDecorationsWithOwnerId(this._id);\r\n        }\r\n    }\r\n    _detachModel() {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        const model = this._modelData.model;\r\n        const removeDomNode = this._modelData.hasRealView ? this._modelData.view.domNode.domNode : null;\r\n        this._modelData.dispose();\r\n        this._modelData = null;\r\n        this._domElement.removeAttribute('data-mode-id');\r\n        if (removeDomNode && this._domElement.contains(removeDomNode)) {\r\n            this._domElement.removeChild(removeDomNode);\r\n        }\r\n        return model;\r\n    }\r\n    _removeDecorationType(key) {\r\n        this._codeEditorService.removeDecorationType(key);\r\n    }\r\n    hasModel() {\r\n        return (this._modelData !== null);\r\n    }\r\n};\r\nCodeEditorWidget = __decorate([\r\n    __param(3, IInstantiationService),\r\n    __param(4, ICodeEditorService),\r\n    __param(5, ICommandService),\r\n    __param(6, IContextKeyService),\r\n    __param(7, IThemeService),\r\n    __param(8, INotificationService),\r\n    __param(9, IAccessibilityService)\r\n], CodeEditorWidget);\r\nexport { CodeEditorWidget };\r\nexport class BooleanEventEmitter extends Disposable {\r\n    constructor() {\r\n        super();\r\n        this._onDidChangeToTrue = this._register(new Emitter());\r\n        this.onDidChangeToTrue = this._onDidChangeToTrue.event;\r\n        this._onDidChangeToFalse = this._register(new Emitter());\r\n        this.onDidChangeToFalse = this._onDidChangeToFalse.event;\r\n        this._value = 0 /* NotSet */;\r\n    }\r\n    setValue(_value) {\r\n        const value = (_value ? 2 /* True */ : 1 /* False */);\r\n        if (this._value === value) {\r\n            return;\r\n        }\r\n        this._value = value;\r\n        if (this._value === 2 /* True */) {\r\n            this._onDidChangeToTrue.fire();\r\n        }\r\n        else if (this._value === 1 /* False */) {\r\n            this._onDidChangeToFalse.fire();\r\n        }\r\n    }\r\n}\r\nclass EditorContextKeysManager extends Disposable {\r\n    constructor(editor, contextKeyService) {\r\n        super();\r\n        this._editor = editor;\r\n        contextKeyService.createKey('editorId', editor.getId());\r\n        this._editorSimpleInput = EditorContextKeys.editorSimpleInput.bindTo(contextKeyService);\r\n        this._editorFocus = EditorContextKeys.focus.bindTo(contextKeyService);\r\n        this._textInputFocus = EditorContextKeys.textInputFocus.bindTo(contextKeyService);\r\n        this._editorTextFocus = EditorContextKeys.editorTextFocus.bindTo(contextKeyService);\r\n        this._editorTabMovesFocus = EditorContextKeys.tabMovesFocus.bindTo(contextKeyService);\r\n        this._editorReadonly = EditorContextKeys.readOnly.bindTo(contextKeyService);\r\n        this._inDiffEditor = EditorContextKeys.inDiffEditor.bindTo(contextKeyService);\r\n        this._editorColumnSelection = EditorContextKeys.columnSelection.bindTo(contextKeyService);\r\n        this._hasMultipleSelections = EditorContextKeys.hasMultipleSelections.bindTo(contextKeyService);\r\n        this._hasNonEmptySelection = EditorContextKeys.hasNonEmptySelection.bindTo(contextKeyService);\r\n        this._canUndo = EditorContextKeys.canUndo.bindTo(contextKeyService);\r\n        this._canRedo = EditorContextKeys.canRedo.bindTo(contextKeyService);\r\n        this._register(this._editor.onDidChangeConfiguration(() => this._updateFromConfig()));\r\n        this._register(this._editor.onDidChangeCursorSelection(() => this._updateFromSelection()));\r\n        this._register(this._editor.onDidFocusEditorWidget(() => this._updateFromFocus()));\r\n        this._register(this._editor.onDidBlurEditorWidget(() => this._updateFromFocus()));\r\n        this._register(this._editor.onDidFocusEditorText(() => this._updateFromFocus()));\r\n        this._register(this._editor.onDidBlurEditorText(() => this._updateFromFocus()));\r\n        this._register(this._editor.onDidChangeModel(() => this._updateFromModel()));\r\n        this._register(this._editor.onDidChangeConfiguration(() => this._updateFromModel()));\r\n        this._updateFromConfig();\r\n        this._updateFromSelection();\r\n        this._updateFromFocus();\r\n        this._updateFromModel();\r\n        this._editorSimpleInput.set(this._editor.isSimpleWidget);\r\n    }\r\n    _updateFromConfig() {\r\n        const options = this._editor.getOptions();\r\n        this._editorTabMovesFocus.set(options.get(123 /* tabFocusMode */));\r\n        this._editorReadonly.set(options.get(75 /* readOnly */));\r\n        this._inDiffEditor.set(options.get(49 /* inDiffEditor */));\r\n        this._editorColumnSelection.set(options.get(15 /* columnSelection */));\r\n    }\r\n    _updateFromSelection() {\r\n        const selections = this._editor.getSelections();\r\n        if (!selections) {\r\n            this._hasMultipleSelections.reset();\r\n            this._hasNonEmptySelection.reset();\r\n        }\r\n        else {\r\n            this._hasMultipleSelections.set(selections.length > 1);\r\n            this._hasNonEmptySelection.set(selections.some(s => !s.isEmpty()));\r\n        }\r\n    }\r\n    _updateFromFocus() {\r\n        this._editorFocus.set(this._editor.hasWidgetFocus() && !this._editor.isSimpleWidget);\r\n        this._editorTextFocus.set(this._editor.hasTextFocus() && !this._editor.isSimpleWidget);\r\n        this._textInputFocus.set(this._editor.hasTextFocus());\r\n    }\r\n    _updateFromModel() {\r\n        const model = this._editor.getModel();\r\n        this._canUndo.set(Boolean(model && model.canUndo()));\r\n        this._canRedo.set(Boolean(model && model.canRedo()));\r\n    }\r\n}\r\nexport class EditorModeContext extends Disposable {\r\n    constructor(_editor, _contextKeyService) {\r\n        super();\r\n        this._editor = _editor;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._langId = EditorContextKeys.languageId.bindTo(_contextKeyService);\r\n        this._hasCompletionItemProvider = EditorContextKeys.hasCompletionItemProvider.bindTo(_contextKeyService);\r\n        this._hasCodeActionsProvider = EditorContextKeys.hasCodeActionsProvider.bindTo(_contextKeyService);\r\n        this._hasCodeLensProvider = EditorContextKeys.hasCodeLensProvider.bindTo(_contextKeyService);\r\n        this._hasDefinitionProvider = EditorContextKeys.hasDefinitionProvider.bindTo(_contextKeyService);\r\n        this._hasDeclarationProvider = EditorContextKeys.hasDeclarationProvider.bindTo(_contextKeyService);\r\n        this._hasImplementationProvider = EditorContextKeys.hasImplementationProvider.bindTo(_contextKeyService);\r\n        this._hasTypeDefinitionProvider = EditorContextKeys.hasTypeDefinitionProvider.bindTo(_contextKeyService);\r\n        this._hasHoverProvider = EditorContextKeys.hasHoverProvider.bindTo(_contextKeyService);\r\n        this._hasDocumentHighlightProvider = EditorContextKeys.hasDocumentHighlightProvider.bindTo(_contextKeyService);\r\n        this._hasDocumentSymbolProvider = EditorContextKeys.hasDocumentSymbolProvider.bindTo(_contextKeyService);\r\n        this._hasReferenceProvider = EditorContextKeys.hasReferenceProvider.bindTo(_contextKeyService);\r\n        this._hasRenameProvider = EditorContextKeys.hasRenameProvider.bindTo(_contextKeyService);\r\n        this._hasSignatureHelpProvider = EditorContextKeys.hasSignatureHelpProvider.bindTo(_contextKeyService);\r\n        this._hasInlineHintsProvider = EditorContextKeys.hasInlineHintsProvider.bindTo(_contextKeyService);\r\n        this._hasDocumentFormattingProvider = EditorContextKeys.hasDocumentFormattingProvider.bindTo(_contextKeyService);\r\n        this._hasDocumentSelectionFormattingProvider = EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\r\n        this._hasMultipleDocumentFormattingProvider = EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo(_contextKeyService);\r\n        this._hasMultipleDocumentSelectionFormattingProvider = EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\r\n        this._isInWalkThrough = EditorContextKeys.isInWalkThroughSnippet.bindTo(_contextKeyService);\r\n        const update = () => this._update();\r\n        // update when model/mode changes\r\n        this._register(_editor.onDidChangeModel(update));\r\n        this._register(_editor.onDidChangeModelLanguage(update));\r\n        // update when registries change\r\n        this._register(modes.CompletionProviderRegistry.onDidChange(update));\r\n        this._register(modes.CodeActionProviderRegistry.onDidChange(update));\r\n        this._register(modes.CodeLensProviderRegistry.onDidChange(update));\r\n        this._register(modes.DefinitionProviderRegistry.onDidChange(update));\r\n        this._register(modes.DeclarationProviderRegistry.onDidChange(update));\r\n        this._register(modes.ImplementationProviderRegistry.onDidChange(update));\r\n        this._register(modes.TypeDefinitionProviderRegistry.onDidChange(update));\r\n        this._register(modes.HoverProviderRegistry.onDidChange(update));\r\n        this._register(modes.DocumentHighlightProviderRegistry.onDidChange(update));\r\n        this._register(modes.DocumentSymbolProviderRegistry.onDidChange(update));\r\n        this._register(modes.ReferenceProviderRegistry.onDidChange(update));\r\n        this._register(modes.RenameProviderRegistry.onDidChange(update));\r\n        this._register(modes.DocumentFormattingEditProviderRegistry.onDidChange(update));\r\n        this._register(modes.DocumentRangeFormattingEditProviderRegistry.onDidChange(update));\r\n        this._register(modes.SignatureHelpProviderRegistry.onDidChange(update));\r\n        this._register(modes.InlineHintsProviderRegistry.onDidChange(update));\r\n        update();\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n    }\r\n    reset() {\r\n        this._contextKeyService.bufferChangeEvents(() => {\r\n            this._langId.reset();\r\n            this._hasCompletionItemProvider.reset();\r\n            this._hasCodeActionsProvider.reset();\r\n            this._hasCodeLensProvider.reset();\r\n            this._hasDefinitionProvider.reset();\r\n            this._hasDeclarationProvider.reset();\r\n            this._hasImplementationProvider.reset();\r\n            this._hasTypeDefinitionProvider.reset();\r\n            this._hasHoverProvider.reset();\r\n            this._hasDocumentHighlightProvider.reset();\r\n            this._hasDocumentSymbolProvider.reset();\r\n            this._hasReferenceProvider.reset();\r\n            this._hasRenameProvider.reset();\r\n            this._hasDocumentFormattingProvider.reset();\r\n            this._hasDocumentSelectionFormattingProvider.reset();\r\n            this._hasSignatureHelpProvider.reset();\r\n            this._isInWalkThrough.reset();\r\n        });\r\n    }\r\n    _update() {\r\n        const model = this._editor.getModel();\r\n        if (!model) {\r\n            this.reset();\r\n            return;\r\n        }\r\n        this._contextKeyService.bufferChangeEvents(() => {\r\n            this._langId.set(model.getLanguageIdentifier().language);\r\n            this._hasCompletionItemProvider.set(modes.CompletionProviderRegistry.has(model));\r\n            this._hasCodeActionsProvider.set(modes.CodeActionProviderRegistry.has(model));\r\n            this._hasCodeLensProvider.set(modes.CodeLensProviderRegistry.has(model));\r\n            this._hasDefinitionProvider.set(modes.DefinitionProviderRegistry.has(model));\r\n            this._hasDeclarationProvider.set(modes.DeclarationProviderRegistry.has(model));\r\n            this._hasImplementationProvider.set(modes.ImplementationProviderRegistry.has(model));\r\n            this._hasTypeDefinitionProvider.set(modes.TypeDefinitionProviderRegistry.has(model));\r\n            this._hasHoverProvider.set(modes.HoverProviderRegistry.has(model));\r\n            this._hasDocumentHighlightProvider.set(modes.DocumentHighlightProviderRegistry.has(model));\r\n            this._hasDocumentSymbolProvider.set(modes.DocumentSymbolProviderRegistry.has(model));\r\n            this._hasReferenceProvider.set(modes.ReferenceProviderRegistry.has(model));\r\n            this._hasRenameProvider.set(modes.RenameProviderRegistry.has(model));\r\n            this._hasSignatureHelpProvider.set(modes.SignatureHelpProviderRegistry.has(model));\r\n            this._hasInlineHintsProvider.set(modes.InlineHintsProviderRegistry.has(model));\r\n            this._hasDocumentFormattingProvider.set(modes.DocumentFormattingEditProviderRegistry.has(model) || modes.DocumentRangeFormattingEditProviderRegistry.has(model));\r\n            this._hasDocumentSelectionFormattingProvider.set(modes.DocumentRangeFormattingEditProviderRegistry.has(model));\r\n            this._hasMultipleDocumentFormattingProvider.set(modes.DocumentFormattingEditProviderRegistry.all(model).length + modes.DocumentRangeFormattingEditProviderRegistry.all(model).length > 1);\r\n            this._hasMultipleDocumentSelectionFormattingProvider.set(modes.DocumentRangeFormattingEditProviderRegistry.all(model).length > 1);\r\n            this._isInWalkThrough.set(model.uri.scheme === Schemas.walkThroughSnippet);\r\n        });\r\n    }\r\n}\r\nclass CodeEditorWidgetFocusTracker extends Disposable {\r\n    constructor(domElement) {\r\n        super();\r\n        this._onChange = this._register(new Emitter());\r\n        this.onChange = this._onChange.event;\r\n        this._hasFocus = false;\r\n        this._domFocusTracker = this._register(dom.trackFocus(domElement));\r\n        this._register(this._domFocusTracker.onDidFocus(() => {\r\n            this._hasFocus = true;\r\n            this._onChange.fire(undefined);\r\n        }));\r\n        this._register(this._domFocusTracker.onDidBlur(() => {\r\n            this._hasFocus = false;\r\n            this._onChange.fire(undefined);\r\n        }));\r\n    }\r\n    hasFocus() {\r\n        return this._hasFocus;\r\n    }\r\n}\r\nconst squigglyStart = encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='`);\r\nconst squigglyEnd = encodeURIComponent(`'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>`);\r\nfunction getSquigglySVGData(color) {\r\n    return squigglyStart + encodeURIComponent(color.toString()) + squigglyEnd;\r\n}\r\nconst dotdotdotStart = encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"3\" width=\"12\"><g fill=\"`);\r\nconst dotdotdotEnd = encodeURIComponent(`\"><circle cx=\"1\" cy=\"1\" r=\"1\"/><circle cx=\"5\" cy=\"1\" r=\"1\"/><circle cx=\"9\" cy=\"1\" r=\"1\"/></g></svg>`);\r\nfunction getDotDotDotSVGData(color) {\r\n    return dotdotdotStart + encodeURIComponent(color.toString()) + dotdotdotEnd;\r\n}\r\nregisterThemingParticipant((theme, collector) => {\r\n    const errorBorderColor = theme.getColor(editorErrorBorder);\r\n    if (errorBorderColor) {\r\n        collector.addRule(`.monaco-editor .${\"squiggly-error\" /* EditorErrorDecoration */} { border-bottom: 4px double ${errorBorderColor}; }`);\r\n    }\r\n    const errorForeground = theme.getColor(editorErrorForeground);\r\n    if (errorForeground) {\r\n        collector.addRule(`.monaco-editor .${\"squiggly-error\" /* EditorErrorDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(errorForeground)}\") repeat-x bottom left; }`);\r\n    }\r\n    const errorBackground = theme.getColor(editorErrorBackground);\r\n    if (errorBackground) {\r\n        collector.addRule(`.monaco-editor .${\"squiggly-error\" /* EditorErrorDecoration */}::before { display: block; content: ''; width: 100%; height: 100%; background: ${errorBackground}; }`);\r\n    }\r\n    const warningBorderColor = theme.getColor(editorWarningBorder);\r\n    if (warningBorderColor) {\r\n        collector.addRule(`.monaco-editor .${\"squiggly-warning\" /* EditorWarningDecoration */} { border-bottom: 4px double ${warningBorderColor}; }`);\r\n    }\r\n    const warningForeground = theme.getColor(editorWarningForeground);\r\n    if (warningForeground) {\r\n        collector.addRule(`.monaco-editor .${\"squiggly-warning\" /* EditorWarningDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(warningForeground)}\") repeat-x bottom left; }`);\r\n    }\r\n    const warningBackground = theme.getColor(editorWarningBackground);\r\n    if (warningBackground) {\r\n        collector.addRule(`.monaco-editor .${\"squiggly-warning\" /* EditorWarningDecoration */}::before { display: block; content: ''; width: 100%; height: 100%; background: ${warningBackground}; }`);\r\n    }\r\n    const infoBorderColor = theme.getColor(editorInfoBorder);\r\n    if (infoBorderColor) {\r\n        collector.addRule(`.monaco-editor .${\"squiggly-info\" /* EditorInfoDecoration */} { border-bottom: 4px double ${infoBorderColor}; }`);\r\n    }\r\n    const infoForeground = theme.getColor(editorInfoForeground);\r\n    if (infoForeground) {\r\n        collector.addRule(`.monaco-editor .${\"squiggly-info\" /* EditorInfoDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(infoForeground)}\") repeat-x bottom left; }`);\r\n    }\r\n    const infoBackground = theme.getColor(editorInfoBackground);\r\n    if (infoBackground) {\r\n        collector.addRule(`.monaco-editor .${\"squiggly-info\" /* EditorInfoDecoration */}::before { display: block; content: ''; width: 100%; height: 100%; background: ${infoBackground}; }`);\r\n    }\r\n    const hintBorderColor = theme.getColor(editorHintBorder);\r\n    if (hintBorderColor) {\r\n        collector.addRule(`.monaco-editor .${\"squiggly-hint\" /* EditorHintDecoration */} { border-bottom: 2px dotted ${hintBorderColor}; }`);\r\n    }\r\n    const hintForeground = theme.getColor(editorHintForeground);\r\n    if (hintForeground) {\r\n        collector.addRule(`.monaco-editor .${\"squiggly-hint\" /* EditorHintDecoration */} { background: url(\"data:image/svg+xml,${getDotDotDotSVGData(hintForeground)}\") no-repeat bottom left; }`);\r\n    }\r\n    const unnecessaryForeground = theme.getColor(editorUnnecessaryCodeOpacity);\r\n    if (unnecessaryForeground) {\r\n        collector.addRule(`.monaco-editor.showUnused .${\"squiggly-inline-unnecessary\" /* EditorUnnecessaryInlineDecoration */} { opacity: ${unnecessaryForeground.rgba.a}; }`);\r\n    }\r\n    const unnecessaryBorder = theme.getColor(editorUnnecessaryCodeBorder);\r\n    if (unnecessaryBorder) {\r\n        collector.addRule(`.monaco-editor.showUnused .${\"squiggly-unnecessary\" /* EditorUnnecessaryDecoration */} { border-bottom: 2px dashed ${unnecessaryBorder}; }`);\r\n    }\r\n    const deprecatedForeground = theme.getColor(editorForeground) || 'inherit';\r\n    collector.addRule(`.monaco-editor.showDeprecated .${\"squiggly-inline-deprecated\" /* EditorDeprecatedInlineDecoration */} { text-decoration: line-through; text-decoration-color: ${deprecatedForeground}}`);\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}