{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport './referencesWidget.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { dispose, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { basenameOrAuthority, dirname } from '../../../../base/common/resources.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions, TextModel } from '../../../common/model/textModel.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, OneReferenceRenderer, StringRepresentationProvider, IdentityProvider } from './referencesTree.js';\nimport * as nls from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { WorkbenchAsyncDataTree } from '../../../../platform/list/browser/listService.js';\nimport { activeContrastBorder } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService, registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport * as peekView from '../../peekView/peekView.js';\nimport { FileReferences, OneReference } from '../referencesModel.js';\nimport { SplitView, Sizing } from '../../../../base/browser/ui/splitview/splitview.js';\nimport { IUndoRedoService } from '../../../../platform/undoRedo/common/undoRedo.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nclass DecorationsManager {\n  constructor(_editor, _model) {\n    this._editor = _editor;\n    this._model = _model;\n    this._decorations = new Map();\n    this._decorationIgnoreSet = new Set();\n    this._callOnDispose = new DisposableStore();\n    this._callOnModelChange = new DisposableStore();\n    this._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\n    this._onModelChanged();\n  }\n  dispose() {\n    this._callOnModelChange.dispose();\n    this._callOnDispose.dispose();\n    this.removeDecorations();\n  }\n  _onModelChanged() {\n    this._callOnModelChange.clear();\n    const model = this._editor.getModel();\n    if (!model) {\n      return;\n    }\n    for (let ref of this._model.references) {\n      if (ref.uri.toString() === model.uri.toString()) {\n        this._addDecorations(ref.parent);\n        return;\n      }\n    }\n  }\n  _addDecorations(reference) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\n    const newDecorations = [];\n    const newDecorationsActualIndex = [];\n    for (let i = 0, len = reference.children.length; i < len; i++) {\n      let oneReference = reference.children[i];\n      if (this._decorationIgnoreSet.has(oneReference.id)) {\n        continue;\n      }\n      if (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\n        continue;\n      }\n      newDecorations.push({\n        range: oneReference.range,\n        options: DecorationsManager.DecorationOptions\n      });\n      newDecorationsActualIndex.push(i);\n    }\n    const decorations = this._editor.deltaDecorations([], newDecorations);\n    for (let i = 0; i < decorations.length; i++) {\n      this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\n    }\n  }\n  _onDecorationChanged() {\n    const toRemove = [];\n    const model = this._editor.getModel();\n    if (!model) {\n      return;\n    }\n    for (let [decorationId, reference] of this._decorations) {\n      const newRange = model.getDecorationRange(decorationId);\n      if (!newRange) {\n        continue;\n      }\n      let ignore = false;\n      if (Range.equalsRange(newRange, reference.range)) {\n        continue;\n      }\n      if (Range.spansMultipleLines(newRange)) {\n        ignore = true;\n      } else {\n        const lineLength = reference.range.endColumn - reference.range.startColumn;\n        const newLineLength = newRange.endColumn - newRange.startColumn;\n        if (lineLength !== newLineLength) {\n          ignore = true;\n        }\n      }\n      if (ignore) {\n        this._decorationIgnoreSet.add(reference.id);\n        toRemove.push(decorationId);\n      } else {\n        reference.range = newRange;\n      }\n    }\n    for (let i = 0, len = toRemove.length; i < len; i++) {\n      this._decorations.delete(toRemove[i]);\n    }\n    this._editor.deltaDecorations(toRemove, []);\n  }\n  removeDecorations() {\n    this._editor.deltaDecorations([...this._decorations.keys()], []);\n    this._decorations.clear();\n  }\n}\nDecorationsManager.DecorationOptions = ModelDecorationOptions.register({\n  stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\n  className: 'reference-decoration'\n});\nexport class LayoutData {\n  constructor() {\n    this.ratio = 0.7;\n    this.heightInLines = 18;\n  }\n  static fromJSON(raw) {\n    let ratio;\n    let heightInLines;\n    try {\n      const data = JSON.parse(raw);\n      ratio = data.ratio;\n      heightInLines = data.heightInLines;\n    } catch (_a) {\n      //\n    }\n    return {\n      ratio: ratio || 0.7,\n      heightInLines: heightInLines || 18\n    };\n  }\n}\nclass ReferencesTree extends WorkbenchAsyncDataTree {}\n/**\r\n * ZoneWidget that is shown inside the editor\r\n */\nlet ReferenceWidget = class ReferenceWidget extends peekView.PeekViewWidget {\n  constructor(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel, _undoRedoService, _keybindingService) {\n    super(editor, {\n      showFrame: false,\n      showArrow: true,\n      isResizeable: true,\n      isAccessible: true\n    }, _instantiationService);\n    this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n    this.layoutData = layoutData;\n    this._textModelResolverService = _textModelResolverService;\n    this._instantiationService = _instantiationService;\n    this._peekViewService = _peekViewService;\n    this._uriLabel = _uriLabel;\n    this._undoRedoService = _undoRedoService;\n    this._keybindingService = _keybindingService;\n    this._disposeOnNewModel = new DisposableStore();\n    this._callOnDispose = new DisposableStore();\n    this._onDidSelectReference = new Emitter();\n    this.onDidSelectReference = this._onDidSelectReference.event;\n    this._dim = new dom.Dimension(0, 0);\n    this._applyTheme(themeService.getColorTheme());\n    this._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n    this._peekViewService.addExclusiveWidget(editor, this);\n    this.create();\n  }\n  dispose() {\n    this.setModel(undefined);\n    this._callOnDispose.dispose();\n    this._disposeOnNewModel.dispose();\n    dispose(this._preview);\n    dispose(this._previewNotAvailableMessage);\n    dispose(this._tree);\n    dispose(this._previewModelReference);\n    this._splitView.dispose();\n    super.dispose();\n  }\n  _applyTheme(theme) {\n    const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\n    this.style({\n      arrowColor: borderColor,\n      frameColor: borderColor,\n      headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\n      primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\n      secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\n    });\n  }\n  show(where) {\n    this.editor.revealRangeInCenterIfOutsideViewport(where, 0 /* Smooth */);\n    super.show(where, this.layoutData.heightInLines || 18);\n  }\n  focusOnReferenceTree() {\n    this._tree.domFocus();\n  }\n  focusOnPreviewEditor() {\n    this._preview.focus();\n  }\n  isPreviewEditorFocused() {\n    return this._preview.hasTextFocus();\n  }\n  _onTitleClick(e) {\n    if (this._preview && this._preview.getModel()) {\n      this._onDidSelectReference.fire({\n        element: this._getFocusedReference(),\n        kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\n        source: 'title'\n      });\n    }\n  }\n  _fillBody(containerElement) {\n    this.setCssClass('reference-zone-widget');\n    // message pane\n    this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\n    dom.hide(this._messageContainer);\n    this._splitView = new SplitView(containerElement, {\n      orientation: 1 /* HORIZONTAL */\n    });\n    // editor\n    this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\n    let options = {\n      scrollBeyondLastLine: false,\n      scrollbar: {\n        verticalScrollbarSize: 14,\n        horizontal: 'auto',\n        useShadows: true,\n        verticalHasArrows: false,\n        horizontalHasArrows: false,\n        alwaysConsumeMouseWheel: false\n      },\n      overviewRulerLanes: 2,\n      fixedOverflowWidgets: true,\n      minimap: {\n        enabled: false\n      }\n    };\n    this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, this.editor);\n    dom.hide(this._previewContainer);\n    this._previewNotAvailableMessage = new TextModel(nls.localize('missingPreviewMessage', \"no preview available\"), TextModel.DEFAULT_CREATION_OPTIONS, null, null, this._undoRedoService);\n    // tree\n    this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\n    const treeOptions = {\n      keyboardSupport: this._defaultTreeKeyboardSupport,\n      accessibilityProvider: new AccessibilityProvider(),\n      keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\n      identityProvider: new IdentityProvider(),\n      openOnSingleClick: true,\n      openOnFocus: true,\n      overrideStyles: {\n        listBackground: peekView.peekViewResultsBackground\n      }\n    };\n    if (this._defaultTreeKeyboardSupport) {\n      // the tree will consume `Escape` and prevent the widget from closing\n      this._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', e => {\n        if (e.equals(9 /* Escape */)) {\n          this._keybindingService.dispatchEvent(e, e.target);\n          e.stopPropagation();\n        }\n      }, true));\n    }\n    this._tree = this._instantiationService.createInstance(ReferencesTree, 'ReferencesWidget', this._treeContainer, new Delegate(), [this._instantiationService.createInstance(FileReferencesRenderer), this._instantiationService.createInstance(OneReferenceRenderer)], this._instantiationService.createInstance(DataSource), treeOptions);\n    // split stuff\n    this._splitView.addView({\n      onDidChange: Event.None,\n      element: this._previewContainer,\n      minimumSize: 200,\n      maximumSize: Number.MAX_VALUE,\n      layout: width => {\n        this._preview.layout({\n          height: this._dim.height,\n          width\n        });\n      }\n    }, Sizing.Distribute);\n    this._splitView.addView({\n      onDidChange: Event.None,\n      element: this._treeContainer,\n      minimumSize: 100,\n      maximumSize: Number.MAX_VALUE,\n      layout: width => {\n        this._treeContainer.style.height = \"\".concat(this._dim.height, \"px\");\n        this._treeContainer.style.width = \"\".concat(width, \"px\");\n        this._tree.layout(this._dim.height, width);\n      }\n    }, Sizing.Distribute);\n    this._disposables.add(this._splitView.onDidSashChange(() => {\n      if (this._dim.width) {\n        this.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\n      }\n    }, undefined));\n    // listen on selection and focus\n    let onEvent = (element, kind) => {\n      if (element instanceof OneReference) {\n        if (kind === 'show') {\n          this._revealReference(element, false);\n        }\n        this._onDidSelectReference.fire({\n          element,\n          kind,\n          source: 'tree'\n        });\n      }\n    };\n    this._tree.onDidOpen(e => {\n      if (e.sideBySide) {\n        onEvent(e.element, 'side');\n      } else if (e.editorOptions.pinned) {\n        onEvent(e.element, 'goto');\n      } else {\n        onEvent(e.element, 'show');\n      }\n    });\n    dom.hide(this._treeContainer);\n  }\n  _onWidth(width) {\n    if (this._dim) {\n      this._doLayoutBody(this._dim.height, width);\n    }\n  }\n  _doLayoutBody(heightInPixel, widthInPixel) {\n    super._doLayoutBody(heightInPixel, widthInPixel);\n    this._dim = new dom.Dimension(widthInPixel, heightInPixel);\n    this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\n    this._splitView.layout(widthInPixel);\n    this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\n  }\n  setSelection(selection) {\n    return this._revealReference(selection, true).then(() => {\n      if (!this._model) {\n        // disposed\n        return;\n      }\n      // show in tree\n      this._tree.setSelection([selection]);\n      this._tree.setFocus([selection]);\n    });\n  }\n  setModel(newModel) {\n    // clean up\n    this._disposeOnNewModel.clear();\n    this._model = newModel;\n    if (this._model) {\n      return this._onNewModel();\n    }\n    return Promise.resolve();\n  }\n  _onNewModel() {\n    if (!this._model) {\n      return Promise.resolve(undefined);\n    }\n    if (this._model.isEmpty) {\n      this.setTitle('');\n      this._messageContainer.innerText = nls.localize('noResults', \"No results\");\n      dom.show(this._messageContainer);\n      return Promise.resolve(undefined);\n    }\n    dom.hide(this._messageContainer);\n    this._decorationsManager = new DecorationsManager(this._preview, this._model);\n    this._disposeOnNewModel.add(this._decorationsManager);\n    // listen on model changes\n    this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\n    // listen on editor\n    this._disposeOnNewModel.add(this._preview.onMouseDown(e => {\n      const {\n        event,\n        target\n      } = e;\n      if (event.detail !== 2) {\n        return;\n      }\n      const element = this._getFocusedReference();\n      if (!element) {\n        return;\n      }\n      this._onDidSelectReference.fire({\n        element: {\n          uri: element.uri,\n          range: target.range\n        },\n        kind: event.ctrlKey || event.metaKey || event.altKey ? 'side' : 'open',\n        source: 'editor'\n      });\n    }));\n    // make sure things are rendered\n    this.container.classList.add('results-loaded');\n    dom.show(this._treeContainer);\n    dom.show(this._previewContainer);\n    this._splitView.layout(this._dim.width);\n    this.focusOnReferenceTree();\n    // pick input and a reference to begin with\n    return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\n  }\n  _getFocusedReference() {\n    const [element] = this._tree.getFocus();\n    if (element instanceof OneReference) {\n      return element;\n    } else if (element instanceof FileReferences) {\n      if (element.children.length > 0) {\n        return element.children[0];\n      }\n    }\n    return undefined;\n  }\n  revealReference(reference) {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this._revealReference(reference, false);\n      this._onDidSelectReference.fire({\n        element: reference,\n        kind: 'goto',\n        source: 'tree'\n      });\n    });\n  }\n  _revealReference(reference, revealParent) {\n    return __awaiter(this, void 0, void 0, function* () {\n      // check if there is anything to do...\n      if (this._revealedReference === reference) {\n        return;\n      }\n      this._revealedReference = reference;\n      // Update widget header\n      if (reference.uri.scheme !== Schemas.inMemory) {\n        this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\n      } else {\n        this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\n      }\n      const promise = this._textModelResolverService.createModelReference(reference.uri);\n      if (this._tree.getInput() === reference.parent) {\n        this._tree.reveal(reference);\n      } else {\n        if (revealParent) {\n          this._tree.reveal(reference.parent);\n        }\n        yield this._tree.expand(reference.parent);\n        this._tree.reveal(reference);\n      }\n      const ref = yield promise;\n      if (!this._model) {\n        // disposed\n        ref.dispose();\n        return;\n      }\n      dispose(this._previewModelReference);\n      // show in editor\n      const model = ref.object;\n      if (model) {\n        const scrollType = this._preview.getModel() === model.textEditorModel ? 0 /* Smooth */ : 1 /* Immediate */;\n        const sel = Range.lift(reference.range).collapseToStart();\n        this._previewModelReference = ref;\n        this._preview.setModel(model.textEditorModel);\n        this._preview.setSelection(sel);\n        this._preview.revealRangeInCenter(sel, scrollType);\n      } else {\n        this._preview.setModel(this._previewNotAvailableMessage);\n        ref.dispose();\n      }\n    });\n  }\n};\nReferenceWidget = __decorate([__param(3, IThemeService), __param(4, ITextModelService), __param(5, IInstantiationService), __param(6, peekView.IPeekViewService), __param(7, ILabelService), __param(8, IUndoRedoService), __param(9, IKeybindingService)], ReferenceWidget);\nexport { ReferenceWidget };\n// theming\nregisterThemingParticipant((theme, collector) => {\n  const findMatchHighlightColor = theme.getColor(peekView.peekViewResultsMatchHighlight);\n  if (findMatchHighlightColor) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: \".concat(findMatchHighlightColor, \"; }\"));\n  }\n  const referenceHighlightColor = theme.getColor(peekView.peekViewEditorMatchHighlight);\n  if (referenceHighlightColor) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: \".concat(referenceHighlightColor, \"; }\"));\n  }\n  const referenceHighlightBorder = theme.getColor(peekView.peekViewEditorMatchHighlightBorder);\n  if (referenceHighlightBorder) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid \".concat(referenceHighlightBorder, \"; box-sizing: border-box; }\"));\n  }\n  const hcOutline = theme.getColor(activeContrastBorder);\n  if (hcOutline) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted \".concat(hcOutline, \"; box-sizing: border-box; }\"));\n  }\n  const resultsBackground = theme.getColor(peekView.peekViewResultsBackground);\n  if (resultsBackground) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree { background-color: \".concat(resultsBackground, \"; }\"));\n  }\n  const resultsMatchForeground = theme.getColor(peekView.peekViewResultsMatchForeground);\n  if (resultsMatchForeground) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree { color: \".concat(resultsMatchForeground, \"; }\"));\n  }\n  const resultsFileForeground = theme.getColor(peekView.peekViewResultsFileForeground);\n  if (resultsFileForeground) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree .reference-file { color: \".concat(resultsFileForeground, \"; }\"));\n  }\n  const resultsSelectedBackground = theme.getColor(peekView.peekViewResultsSelectionBackground);\n  if (resultsSelectedBackground) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: \".concat(resultsSelectedBackground, \"; }\"));\n  }\n  const resultsSelectedForeground = theme.getColor(peekView.peekViewResultsSelectionForeground);\n  if (resultsSelectedForeground) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: \".concat(resultsSelectedForeground, \" !important; }\"));\n  }\n  const editorBackground = theme.getColor(peekView.peekViewEditorBackground);\n  if (editorBackground) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,\" + \".monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {\" + \"\\tbackground-color: \".concat(editorBackground, \";\") + \"}\");\n  }\n  const editorGutterBackground = theme.getColor(peekView.peekViewEditorGutterBackground);\n  if (editorGutterBackground) {\n    collector.addRule(\".monaco-editor .reference-zone-widget .preview .monaco-editor .margin {\" + \"\\tbackground-color: \".concat(editorGutterBackground, \";\") + \"}\");\n  }\n});","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","dom","Color","Emitter","Event","dispose","DisposableStore","Schemas","basenameOrAuthority","dirname","EmbeddedCodeEditorWidget","Range","ModelDecorationOptions","TextModel","ITextModelService","AccessibilityProvider","DataSource","Delegate","FileReferencesRenderer","OneReferenceRenderer","StringRepresentationProvider","IdentityProvider","nls","IInstantiationService","ILabelService","WorkbenchAsyncDataTree","activeContrastBorder","IThemeService","registerThemingParticipant","peekView","FileReferences","OneReference","SplitView","Sizing","IUndoRedoService","IKeybindingService","DecorationsManager","constructor","_editor","_model","_decorations","Map","_decorationIgnoreSet","Set","_callOnDispose","_callOnModelChange","add","onDidChangeModel","_onModelChanged","removeDecorations","clear","model","getModel","ref","references","uri","toString","_addDecorations","parent","reference","hasModel","onDidChangeDecorations","_onDecorationChanged","newDecorations","newDecorationsActualIndex","len","children","oneReference","has","id","push","range","options","DecorationOptions","decorations","deltaDecorations","set","toRemove","decorationId","newRange","getDecorationRange","ignore","equalsRange","spansMultipleLines","lineLength","endColumn","startColumn","newLineLength","delete","keys","register","stickiness","className","LayoutData","ratio","heightInLines","fromJSON","raw","data","JSON","parse","_a","ReferencesTree","ReferenceWidget","PeekViewWidget","editor","_defaultTreeKeyboardSupport","layoutData","themeService","_textModelResolverService","_instantiationService","_peekViewService","_uriLabel","_undoRedoService","_keybindingService","showFrame","showArrow","isResizeable","isAccessible","_disposeOnNewModel","_onDidSelectReference","onDidSelectReference","event","_dim","Dimension","_applyTheme","getColorTheme","onDidColorThemeChange","bind","addExclusiveWidget","create","setModel","undefined","_preview","_previewNotAvailableMessage","_tree","_previewModelReference","_splitView","theme","borderColor","getColor","peekViewBorder","transparent","style","arrowColor","frameColor","headerBackgroundColor","peekViewTitleBackground","primaryHeadingColor","peekViewTitleForeground","secondaryHeadingColor","peekViewTitleInfoForeground","show","where","revealRangeInCenterIfOutsideViewport","focusOnReferenceTree","domFocus","focusOnPreviewEditor","focus","isPreviewEditorFocused","hasTextFocus","_onTitleClick","fire","element","_getFocusedReference","kind","ctrlKey","metaKey","altKey","source","_fillBody","containerElement","setCssClass","_messageContainer","append","$","hide","orientation","_previewContainer","scrollBeyondLastLine","scrollbar","verticalScrollbarSize","horizontal","useShadows","verticalHasArrows","horizontalHasArrows","alwaysConsumeMouseWheel","overviewRulerLanes","fixedOverflowWidgets","minimap","enabled","createInstance","localize","DEFAULT_CREATION_OPTIONS","_treeContainer","treeOptions","keyboardSupport","accessibilityProvider","keyboardNavigationLabelProvider","identityProvider","openOnSingleClick","openOnFocus","overrideStyles","listBackground","peekViewResultsBackground","addStandardDisposableListener","equals","dispatchEvent","stopPropagation","addView","onDidChange","None","minimumSize","maximumSize","Number","MAX_VALUE","layout","width","height","Distribute","concat","_disposables","onDidSashChange","getViewSize","onEvent","_revealReference","onDidOpen","sideBySide","editorOptions","pinned","_onWidth","_doLayoutBody","heightInPixel","widthInPixel","_viewZone","resizeView","setSelection","selection","setFocus","newModel","_onNewModel","isEmpty","setTitle","innerText","_decorationsManager","onDidChangeReferenceRange","rerender","onMouseDown","detail","container","classList","setInput","groups","getFocus","revealReference","revealParent","_revealedReference","scheme","inMemory","getUriLabel","promise","createModelReference","getInput","reveal","expand","object","scrollType","textEditorModel","sel","lift","collapseToStart","revealRangeInCenter","IPeekViewService","collector","findMatchHighlightColor","peekViewResultsMatchHighlight","addRule","referenceHighlightColor","peekViewEditorMatchHighlight","referenceHighlightBorder","peekViewEditorMatchHighlightBorder","hcOutline","resultsBackground","resultsMatchForeground","peekViewResultsMatchForeground","resultsFileForeground","peekViewResultsFileForeground","resultsSelectedBackground","peekViewResultsSelectionBackground","resultsSelectedForeground","peekViewResultsSelectionForeground","editorBackground","peekViewEditorBackground","editorGutterBackground","peekViewEditorGutterBackground"],"sources":["C:/Users/Administrator/Desktop/sqllineage-master/sqllineagejs/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport './referencesWidget.css';\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { Color } from '../../../../base/common/color.js';\r\nimport { Emitter, Event } from '../../../../base/common/event.js';\r\nimport { dispose, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { Schemas } from '../../../../base/common/network.js';\r\nimport { basenameOrAuthority, dirname } from '../../../../base/common/resources.js';\r\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ModelDecorationOptions, TextModel } from '../../../common/model/textModel.js';\r\nimport { ITextModelService } from '../../../common/services/resolverService.js';\r\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, OneReferenceRenderer, StringRepresentationProvider, IdentityProvider } from './referencesTree.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { ILabelService } from '../../../../platform/label/common/label.js';\r\nimport { WorkbenchAsyncDataTree } from '../../../../platform/list/browser/listService.js';\r\nimport { activeContrastBorder } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { IThemeService, registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\r\nimport * as peekView from '../../peekView/peekView.js';\r\nimport { FileReferences, OneReference } from '../referencesModel.js';\r\nimport { SplitView, Sizing } from '../../../../base/browser/ui/splitview/splitview.js';\r\nimport { IUndoRedoService } from '../../../../platform/undoRedo/common/undoRedo.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nclass DecorationsManager {\r\n    constructor(_editor, _model) {\r\n        this._editor = _editor;\r\n        this._model = _model;\r\n        this._decorations = new Map();\r\n        this._decorationIgnoreSet = new Set();\r\n        this._callOnDispose = new DisposableStore();\r\n        this._callOnModelChange = new DisposableStore();\r\n        this._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\r\n        this._onModelChanged();\r\n    }\r\n    dispose() {\r\n        this._callOnModelChange.dispose();\r\n        this._callOnDispose.dispose();\r\n        this.removeDecorations();\r\n    }\r\n    _onModelChanged() {\r\n        this._callOnModelChange.clear();\r\n        const model = this._editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        for (let ref of this._model.references) {\r\n            if (ref.uri.toString() === model.uri.toString()) {\r\n                this._addDecorations(ref.parent);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    _addDecorations(reference) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\r\n        const newDecorations = [];\r\n        const newDecorationsActualIndex = [];\r\n        for (let i = 0, len = reference.children.length; i < len; i++) {\r\n            let oneReference = reference.children[i];\r\n            if (this._decorationIgnoreSet.has(oneReference.id)) {\r\n                continue;\r\n            }\r\n            if (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\r\n                continue;\r\n            }\r\n            newDecorations.push({\r\n                range: oneReference.range,\r\n                options: DecorationsManager.DecorationOptions\r\n            });\r\n            newDecorationsActualIndex.push(i);\r\n        }\r\n        const decorations = this._editor.deltaDecorations([], newDecorations);\r\n        for (let i = 0; i < decorations.length; i++) {\r\n            this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\r\n        }\r\n    }\r\n    _onDecorationChanged() {\r\n        const toRemove = [];\r\n        const model = this._editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        for (let [decorationId, reference] of this._decorations) {\r\n            const newRange = model.getDecorationRange(decorationId);\r\n            if (!newRange) {\r\n                continue;\r\n            }\r\n            let ignore = false;\r\n            if (Range.equalsRange(newRange, reference.range)) {\r\n                continue;\r\n            }\r\n            if (Range.spansMultipleLines(newRange)) {\r\n                ignore = true;\r\n            }\r\n            else {\r\n                const lineLength = reference.range.endColumn - reference.range.startColumn;\r\n                const newLineLength = newRange.endColumn - newRange.startColumn;\r\n                if (lineLength !== newLineLength) {\r\n                    ignore = true;\r\n                }\r\n            }\r\n            if (ignore) {\r\n                this._decorationIgnoreSet.add(reference.id);\r\n                toRemove.push(decorationId);\r\n            }\r\n            else {\r\n                reference.range = newRange;\r\n            }\r\n        }\r\n        for (let i = 0, len = toRemove.length; i < len; i++) {\r\n            this._decorations.delete(toRemove[i]);\r\n        }\r\n        this._editor.deltaDecorations(toRemove, []);\r\n    }\r\n    removeDecorations() {\r\n        this._editor.deltaDecorations([...this._decorations.keys()], []);\r\n        this._decorations.clear();\r\n    }\r\n}\r\nDecorationsManager.DecorationOptions = ModelDecorationOptions.register({\r\n    stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n    className: 'reference-decoration'\r\n});\r\nexport class LayoutData {\r\n    constructor() {\r\n        this.ratio = 0.7;\r\n        this.heightInLines = 18;\r\n    }\r\n    static fromJSON(raw) {\r\n        let ratio;\r\n        let heightInLines;\r\n        try {\r\n            const data = JSON.parse(raw);\r\n            ratio = data.ratio;\r\n            heightInLines = data.heightInLines;\r\n        }\r\n        catch (_a) {\r\n            //\r\n        }\r\n        return {\r\n            ratio: ratio || 0.7,\r\n            heightInLines: heightInLines || 18\r\n        };\r\n    }\r\n}\r\nclass ReferencesTree extends WorkbenchAsyncDataTree {\r\n}\r\n/**\r\n * ZoneWidget that is shown inside the editor\r\n */\r\nlet ReferenceWidget = class ReferenceWidget extends peekView.PeekViewWidget {\r\n    constructor(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel, _undoRedoService, _keybindingService) {\r\n        super(editor, { showFrame: false, showArrow: true, isResizeable: true, isAccessible: true }, _instantiationService);\r\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\r\n        this.layoutData = layoutData;\r\n        this._textModelResolverService = _textModelResolverService;\r\n        this._instantiationService = _instantiationService;\r\n        this._peekViewService = _peekViewService;\r\n        this._uriLabel = _uriLabel;\r\n        this._undoRedoService = _undoRedoService;\r\n        this._keybindingService = _keybindingService;\r\n        this._disposeOnNewModel = new DisposableStore();\r\n        this._callOnDispose = new DisposableStore();\r\n        this._onDidSelectReference = new Emitter();\r\n        this.onDidSelectReference = this._onDidSelectReference.event;\r\n        this._dim = new dom.Dimension(0, 0);\r\n        this._applyTheme(themeService.getColorTheme());\r\n        this._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\r\n        this._peekViewService.addExclusiveWidget(editor, this);\r\n        this.create();\r\n    }\r\n    dispose() {\r\n        this.setModel(undefined);\r\n        this._callOnDispose.dispose();\r\n        this._disposeOnNewModel.dispose();\r\n        dispose(this._preview);\r\n        dispose(this._previewNotAvailableMessage);\r\n        dispose(this._tree);\r\n        dispose(this._previewModelReference);\r\n        this._splitView.dispose();\r\n        super.dispose();\r\n    }\r\n    _applyTheme(theme) {\r\n        const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\r\n        this.style({\r\n            arrowColor: borderColor,\r\n            frameColor: borderColor,\r\n            headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\r\n            primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\r\n            secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\r\n        });\r\n    }\r\n    show(where) {\r\n        this.editor.revealRangeInCenterIfOutsideViewport(where, 0 /* Smooth */);\r\n        super.show(where, this.layoutData.heightInLines || 18);\r\n    }\r\n    focusOnReferenceTree() {\r\n        this._tree.domFocus();\r\n    }\r\n    focusOnPreviewEditor() {\r\n        this._preview.focus();\r\n    }\r\n    isPreviewEditorFocused() {\r\n        return this._preview.hasTextFocus();\r\n    }\r\n    _onTitleClick(e) {\r\n        if (this._preview && this._preview.getModel()) {\r\n            this._onDidSelectReference.fire({\r\n                element: this._getFocusedReference(),\r\n                kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\r\n                source: 'title'\r\n            });\r\n        }\r\n    }\r\n    _fillBody(containerElement) {\r\n        this.setCssClass('reference-zone-widget');\r\n        // message pane\r\n        this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\r\n        dom.hide(this._messageContainer);\r\n        this._splitView = new SplitView(containerElement, { orientation: 1 /* HORIZONTAL */ });\r\n        // editor\r\n        this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\r\n        let options = {\r\n            scrollBeyondLastLine: false,\r\n            scrollbar: {\r\n                verticalScrollbarSize: 14,\r\n                horizontal: 'auto',\r\n                useShadows: true,\r\n                verticalHasArrows: false,\r\n                horizontalHasArrows: false,\r\n                alwaysConsumeMouseWheel: false\r\n            },\r\n            overviewRulerLanes: 2,\r\n            fixedOverflowWidgets: true,\r\n            minimap: {\r\n                enabled: false\r\n            }\r\n        };\r\n        this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, this.editor);\r\n        dom.hide(this._previewContainer);\r\n        this._previewNotAvailableMessage = new TextModel(nls.localize('missingPreviewMessage', \"no preview available\"), TextModel.DEFAULT_CREATION_OPTIONS, null, null, this._undoRedoService);\r\n        // tree\r\n        this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\r\n        const treeOptions = {\r\n            keyboardSupport: this._defaultTreeKeyboardSupport,\r\n            accessibilityProvider: new AccessibilityProvider(),\r\n            keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\r\n            identityProvider: new IdentityProvider(),\r\n            openOnSingleClick: true,\r\n            openOnFocus: true,\r\n            overrideStyles: {\r\n                listBackground: peekView.peekViewResultsBackground\r\n            }\r\n        };\r\n        if (this._defaultTreeKeyboardSupport) {\r\n            // the tree will consume `Escape` and prevent the widget from closing\r\n            this._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', (e) => {\r\n                if (e.equals(9 /* Escape */)) {\r\n                    this._keybindingService.dispatchEvent(e, e.target);\r\n                    e.stopPropagation();\r\n                }\r\n            }, true));\r\n        }\r\n        this._tree = this._instantiationService.createInstance(ReferencesTree, 'ReferencesWidget', this._treeContainer, new Delegate(), [\r\n            this._instantiationService.createInstance(FileReferencesRenderer),\r\n            this._instantiationService.createInstance(OneReferenceRenderer),\r\n        ], this._instantiationService.createInstance(DataSource), treeOptions);\r\n        // split stuff\r\n        this._splitView.addView({\r\n            onDidChange: Event.None,\r\n            element: this._previewContainer,\r\n            minimumSize: 200,\r\n            maximumSize: Number.MAX_VALUE,\r\n            layout: (width) => {\r\n                this._preview.layout({ height: this._dim.height, width });\r\n            }\r\n        }, Sizing.Distribute);\r\n        this._splitView.addView({\r\n            onDidChange: Event.None,\r\n            element: this._treeContainer,\r\n            minimumSize: 100,\r\n            maximumSize: Number.MAX_VALUE,\r\n            layout: (width) => {\r\n                this._treeContainer.style.height = `${this._dim.height}px`;\r\n                this._treeContainer.style.width = `${width}px`;\r\n                this._tree.layout(this._dim.height, width);\r\n            }\r\n        }, Sizing.Distribute);\r\n        this._disposables.add(this._splitView.onDidSashChange(() => {\r\n            if (this._dim.width) {\r\n                this.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\r\n            }\r\n        }, undefined));\r\n        // listen on selection and focus\r\n        let onEvent = (element, kind) => {\r\n            if (element instanceof OneReference) {\r\n                if (kind === 'show') {\r\n                    this._revealReference(element, false);\r\n                }\r\n                this._onDidSelectReference.fire({ element, kind, source: 'tree' });\r\n            }\r\n        };\r\n        this._tree.onDidOpen(e => {\r\n            if (e.sideBySide) {\r\n                onEvent(e.element, 'side');\r\n            }\r\n            else if (e.editorOptions.pinned) {\r\n                onEvent(e.element, 'goto');\r\n            }\r\n            else {\r\n                onEvent(e.element, 'show');\r\n            }\r\n        });\r\n        dom.hide(this._treeContainer);\r\n    }\r\n    _onWidth(width) {\r\n        if (this._dim) {\r\n            this._doLayoutBody(this._dim.height, width);\r\n        }\r\n    }\r\n    _doLayoutBody(heightInPixel, widthInPixel) {\r\n        super._doLayoutBody(heightInPixel, widthInPixel);\r\n        this._dim = new dom.Dimension(widthInPixel, heightInPixel);\r\n        this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\r\n        this._splitView.layout(widthInPixel);\r\n        this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\r\n    }\r\n    setSelection(selection) {\r\n        return this._revealReference(selection, true).then(() => {\r\n            if (!this._model) {\r\n                // disposed\r\n                return;\r\n            }\r\n            // show in tree\r\n            this._tree.setSelection([selection]);\r\n            this._tree.setFocus([selection]);\r\n        });\r\n    }\r\n    setModel(newModel) {\r\n        // clean up\r\n        this._disposeOnNewModel.clear();\r\n        this._model = newModel;\r\n        if (this._model) {\r\n            return this._onNewModel();\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n    _onNewModel() {\r\n        if (!this._model) {\r\n            return Promise.resolve(undefined);\r\n        }\r\n        if (this._model.isEmpty) {\r\n            this.setTitle('');\r\n            this._messageContainer.innerText = nls.localize('noResults', \"No results\");\r\n            dom.show(this._messageContainer);\r\n            return Promise.resolve(undefined);\r\n        }\r\n        dom.hide(this._messageContainer);\r\n        this._decorationsManager = new DecorationsManager(this._preview, this._model);\r\n        this._disposeOnNewModel.add(this._decorationsManager);\r\n        // listen on model changes\r\n        this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\r\n        // listen on editor\r\n        this._disposeOnNewModel.add(this._preview.onMouseDown(e => {\r\n            const { event, target } = e;\r\n            if (event.detail !== 2) {\r\n                return;\r\n            }\r\n            const element = this._getFocusedReference();\r\n            if (!element) {\r\n                return;\r\n            }\r\n            this._onDidSelectReference.fire({\r\n                element: { uri: element.uri, range: target.range },\r\n                kind: (event.ctrlKey || event.metaKey || event.altKey) ? 'side' : 'open',\r\n                source: 'editor'\r\n            });\r\n        }));\r\n        // make sure things are rendered\r\n        this.container.classList.add('results-loaded');\r\n        dom.show(this._treeContainer);\r\n        dom.show(this._previewContainer);\r\n        this._splitView.layout(this._dim.width);\r\n        this.focusOnReferenceTree();\r\n        // pick input and a reference to begin with\r\n        return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\r\n    }\r\n    _getFocusedReference() {\r\n        const [element] = this._tree.getFocus();\r\n        if (element instanceof OneReference) {\r\n            return element;\r\n        }\r\n        else if (element instanceof FileReferences) {\r\n            if (element.children.length > 0) {\r\n                return element.children[0];\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    revealReference(reference) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this._revealReference(reference, false);\r\n            this._onDidSelectReference.fire({ element: reference, kind: 'goto', source: 'tree' });\r\n        });\r\n    }\r\n    _revealReference(reference, revealParent) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            // check if there is anything to do...\r\n            if (this._revealedReference === reference) {\r\n                return;\r\n            }\r\n            this._revealedReference = reference;\r\n            // Update widget header\r\n            if (reference.uri.scheme !== Schemas.inMemory) {\r\n                this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\r\n            }\r\n            else {\r\n                this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\r\n            }\r\n            const promise = this._textModelResolverService.createModelReference(reference.uri);\r\n            if (this._tree.getInput() === reference.parent) {\r\n                this._tree.reveal(reference);\r\n            }\r\n            else {\r\n                if (revealParent) {\r\n                    this._tree.reveal(reference.parent);\r\n                }\r\n                yield this._tree.expand(reference.parent);\r\n                this._tree.reveal(reference);\r\n            }\r\n            const ref = yield promise;\r\n            if (!this._model) {\r\n                // disposed\r\n                ref.dispose();\r\n                return;\r\n            }\r\n            dispose(this._previewModelReference);\r\n            // show in editor\r\n            const model = ref.object;\r\n            if (model) {\r\n                const scrollType = this._preview.getModel() === model.textEditorModel ? 0 /* Smooth */ : 1 /* Immediate */;\r\n                const sel = Range.lift(reference.range).collapseToStart();\r\n                this._previewModelReference = ref;\r\n                this._preview.setModel(model.textEditorModel);\r\n                this._preview.setSelection(sel);\r\n                this._preview.revealRangeInCenter(sel, scrollType);\r\n            }\r\n            else {\r\n                this._preview.setModel(this._previewNotAvailableMessage);\r\n                ref.dispose();\r\n            }\r\n        });\r\n    }\r\n};\r\nReferenceWidget = __decorate([\r\n    __param(3, IThemeService),\r\n    __param(4, ITextModelService),\r\n    __param(5, IInstantiationService),\r\n    __param(6, peekView.IPeekViewService),\r\n    __param(7, ILabelService),\r\n    __param(8, IUndoRedoService),\r\n    __param(9, IKeybindingService)\r\n], ReferenceWidget);\r\nexport { ReferenceWidget };\r\n// theming\r\nregisterThemingParticipant((theme, collector) => {\r\n    const findMatchHighlightColor = theme.getColor(peekView.peekViewResultsMatchHighlight);\r\n    if (findMatchHighlightColor) {\r\n        collector.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: ${findMatchHighlightColor}; }`);\r\n    }\r\n    const referenceHighlightColor = theme.getColor(peekView.peekViewEditorMatchHighlight);\r\n    if (referenceHighlightColor) {\r\n        collector.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: ${referenceHighlightColor}; }`);\r\n    }\r\n    const referenceHighlightBorder = theme.getColor(peekView.peekViewEditorMatchHighlightBorder);\r\n    if (referenceHighlightBorder) {\r\n        collector.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid ${referenceHighlightBorder}; box-sizing: border-box; }`);\r\n    }\r\n    const hcOutline = theme.getColor(activeContrastBorder);\r\n    if (hcOutline) {\r\n        collector.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted ${hcOutline}; box-sizing: border-box; }`);\r\n    }\r\n    const resultsBackground = theme.getColor(peekView.peekViewResultsBackground);\r\n    if (resultsBackground) {\r\n        collector.addRule(`.monaco-editor .reference-zone-widget .ref-tree { background-color: ${resultsBackground}; }`);\r\n    }\r\n    const resultsMatchForeground = theme.getColor(peekView.peekViewResultsMatchForeground);\r\n    if (resultsMatchForeground) {\r\n        collector.addRule(`.monaco-editor .reference-zone-widget .ref-tree { color: ${resultsMatchForeground}; }`);\r\n    }\r\n    const resultsFileForeground = theme.getColor(peekView.peekViewResultsFileForeground);\r\n    if (resultsFileForeground) {\r\n        collector.addRule(`.monaco-editor .reference-zone-widget .ref-tree .reference-file { color: ${resultsFileForeground}; }`);\r\n    }\r\n    const resultsSelectedBackground = theme.getColor(peekView.peekViewResultsSelectionBackground);\r\n    if (resultsSelectedBackground) {\r\n        collector.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: ${resultsSelectedBackground}; }`);\r\n    }\r\n    const resultsSelectedForeground = theme.getColor(peekView.peekViewResultsSelectionForeground);\r\n    if (resultsSelectedForeground) {\r\n        collector.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: ${resultsSelectedForeground} !important; }`);\r\n    }\r\n    const editorBackground = theme.getColor(peekView.peekViewEditorBackground);\r\n    if (editorBackground) {\r\n        collector.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,` +\r\n            `.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {` +\r\n            `\tbackground-color: ${editorBackground};` +\r\n            `}`);\r\n    }\r\n    const editorGutterBackground = theme.getColor(peekView.peekViewEditorGutterBackground);\r\n    if (editorGutterBackground) {\r\n        collector.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .margin {` +\r\n            `\tbackground-color: ${editorGutterBackground};` +\r\n            `}`);\r\n    }\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}