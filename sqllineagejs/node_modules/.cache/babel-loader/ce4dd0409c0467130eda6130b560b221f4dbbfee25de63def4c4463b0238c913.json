{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport * as nls from '../../../nls.js';\nimport { registerEditorContribution, registerModelAndPositionCommand, EditorAction, EditorCommand, registerEditorAction, registerEditorCommand } from '../../browser/editorExtensions.js';\nimport * as arrays from '../../../base/common/arrays.js';\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { Position } from '../../common/core/position.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Range } from '../../common/core/range.js';\nimport { LinkedEditingRangeProviderRegistry } from '../../common/modes.js';\nimport { first, createCancelablePromise, Delayer } from '../../../base/common/async.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { ContextKeyExpr, RawContextKey, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { isPromiseCanceledError, onUnexpectedError, onUnexpectedExternalError } from '../../../base/common/errors.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { registerColor } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { Color } from '../../../base/common/color.js';\nimport { LanguageConfigurationRegistry } from '../../common/modes/languageConfigurationRegistry.js';\nexport const CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE = new RawContextKey('LinkedEditingInputVisible', false);\nconst DECORATION_CLASS_NAME = 'linked-editing-decoration';\nlet LinkedEditingContribution = class LinkedEditingContribution extends Disposable {\n  constructor(editor, contextKeyService) {\n    super();\n    this._debounceDuration = 200;\n    this._localToDispose = this._register(new DisposableStore());\n    this._editor = editor;\n    this._enabled = false;\n    this._visibleContextKey = CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n    this._currentDecorations = [];\n    this._languageWordPattern = null;\n    this._currentWordPattern = null;\n    this._ignoreChangeEvent = false;\n    this._localToDispose = this._register(new DisposableStore());\n    this._rangeUpdateTriggerPromise = null;\n    this._rangeSyncTriggerPromise = null;\n    this._currentRequest = null;\n    this._currentRequestPosition = null;\n    this._currentRequestModelVersion = null;\n    this._register(this._editor.onDidChangeModel(() => this.reinitialize()));\n    this._register(this._editor.onDidChangeConfiguration(e => {\n      if (e.hasChanged(56 /* linkedEditing */) || e.hasChanged(76 /* renameOnType */)) {\n        this.reinitialize();\n      }\n    }));\n    this._register(LinkedEditingRangeProviderRegistry.onDidChange(() => this.reinitialize()));\n    this._register(this._editor.onDidChangeModelLanguage(() => this.reinitialize()));\n    this.reinitialize();\n  }\n  static get(editor) {\n    return editor.getContribution(LinkedEditingContribution.ID);\n  }\n  reinitialize() {\n    const model = this._editor.getModel();\n    const isEnabled = model !== null && (this._editor.getOption(56 /* linkedEditing */) || this._editor.getOption(76 /* renameOnType */)) && LinkedEditingRangeProviderRegistry.has(model);\n    if (isEnabled === this._enabled) {\n      return;\n    }\n    this._enabled = isEnabled;\n    this.clearRanges();\n    this._localToDispose.clear();\n    if (!isEnabled || model === null) {\n      return;\n    }\n    this._languageWordPattern = LanguageConfigurationRegistry.getWordDefinition(model.getLanguageIdentifier().id);\n    this._localToDispose.add(model.onDidChangeLanguageConfiguration(() => {\n      this._languageWordPattern = LanguageConfigurationRegistry.getWordDefinition(model.getLanguageIdentifier().id);\n    }));\n    const rangeUpdateScheduler = new Delayer(this._debounceDuration);\n    const triggerRangeUpdate = () => {\n      this._rangeUpdateTriggerPromise = rangeUpdateScheduler.trigger(() => this.updateRanges(), this._debounceDuration);\n    };\n    const rangeSyncScheduler = new Delayer(0);\n    const triggerRangeSync = decorations => {\n      this._rangeSyncTriggerPromise = rangeSyncScheduler.trigger(() => this._syncRanges(decorations));\n    };\n    this._localToDispose.add(this._editor.onDidChangeCursorPosition(() => {\n      triggerRangeUpdate();\n    }));\n    this._localToDispose.add(this._editor.onDidChangeModelContent(e => {\n      if (!this._ignoreChangeEvent) {\n        if (this._currentDecorations.length > 0) {\n          const referenceRange = model.getDecorationRange(this._currentDecorations[0]);\n          if (referenceRange && e.changes.every(c => referenceRange.intersectRanges(c.range))) {\n            triggerRangeSync(this._currentDecorations);\n            return;\n          }\n        }\n      }\n      triggerRangeUpdate();\n    }));\n    this._localToDispose.add({\n      dispose: () => {\n        rangeUpdateScheduler.cancel();\n        rangeSyncScheduler.cancel();\n      }\n    });\n    this.updateRanges();\n  }\n  _syncRanges(decorations) {\n    // dalayed invocation, make sure we're still on\n    if (!this._editor.hasModel() || decorations !== this._currentDecorations || decorations.length === 0) {\n      // nothing to do\n      return;\n    }\n    const model = this._editor.getModel();\n    const referenceRange = model.getDecorationRange(decorations[0]);\n    if (!referenceRange || referenceRange.startLineNumber !== referenceRange.endLineNumber) {\n      return this.clearRanges();\n    }\n    const referenceValue = model.getValueInRange(referenceRange);\n    if (this._currentWordPattern) {\n      const match = referenceValue.match(this._currentWordPattern);\n      const matchLength = match ? match[0].length : 0;\n      if (matchLength !== referenceValue.length) {\n        return this.clearRanges();\n      }\n    }\n    let edits = [];\n    for (let i = 1, len = decorations.length; i < len; i++) {\n      const mirrorRange = model.getDecorationRange(decorations[i]);\n      if (!mirrorRange) {\n        continue;\n      }\n      if (mirrorRange.startLineNumber !== mirrorRange.endLineNumber) {\n        edits.push({\n          range: mirrorRange,\n          text: referenceValue\n        });\n      } else {\n        let oldValue = model.getValueInRange(mirrorRange);\n        let newValue = referenceValue;\n        let rangeStartColumn = mirrorRange.startColumn;\n        let rangeEndColumn = mirrorRange.endColumn;\n        const commonPrefixLength = strings.commonPrefixLength(oldValue, newValue);\n        rangeStartColumn += commonPrefixLength;\n        oldValue = oldValue.substr(commonPrefixLength);\n        newValue = newValue.substr(commonPrefixLength);\n        const commonSuffixLength = strings.commonSuffixLength(oldValue, newValue);\n        rangeEndColumn -= commonSuffixLength;\n        oldValue = oldValue.substr(0, oldValue.length - commonSuffixLength);\n        newValue = newValue.substr(0, newValue.length - commonSuffixLength);\n        if (rangeStartColumn !== rangeEndColumn || newValue.length !== 0) {\n          edits.push({\n            range: new Range(mirrorRange.startLineNumber, rangeStartColumn, mirrorRange.endLineNumber, rangeEndColumn),\n            text: newValue\n          });\n        }\n      }\n    }\n    if (edits.length === 0) {\n      return;\n    }\n    try {\n      this._editor.popUndoStop();\n      this._ignoreChangeEvent = true;\n      const prevEditOperationType = this._editor._getViewModel().getPrevEditOperationType();\n      this._editor.executeEdits('linkedEditing', edits);\n      this._editor._getViewModel().setPrevEditOperationType(prevEditOperationType);\n    } finally {\n      this._ignoreChangeEvent = false;\n    }\n  }\n  dispose() {\n    this.clearRanges();\n    super.dispose();\n  }\n  clearRanges() {\n    this._visibleContextKey.set(false);\n    this._currentDecorations = this._editor.deltaDecorations(this._currentDecorations, []);\n    if (this._currentRequest) {\n      this._currentRequest.cancel();\n      this._currentRequest = null;\n      this._currentRequestPosition = null;\n    }\n  }\n  updateRanges() {\n    let force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!this._editor.hasModel()) {\n        this.clearRanges();\n        return;\n      }\n      const position = this._editor.getPosition();\n      if (!this._enabled && !force || this._editor.getSelections().length > 1) {\n        // disabled or multicursor\n        this.clearRanges();\n        return;\n      }\n      const model = this._editor.getModel();\n      const modelVersionId = model.getVersionId();\n      if (this._currentRequestPosition && this._currentRequestModelVersion === modelVersionId) {\n        if (position.equals(this._currentRequestPosition)) {\n          return; // same position\n        }\n\n        if (this._currentDecorations && this._currentDecorations.length > 0) {\n          const range = model.getDecorationRange(this._currentDecorations[0]);\n          if (range && range.containsPosition(position)) {\n            return; // just moving inside the existing primary range\n          }\n        }\n      }\n\n      this._currentRequestPosition = position;\n      this._currentRequestModelVersion = modelVersionId;\n      const request = createCancelablePromise(token => __awaiter(this, void 0, void 0, function* () {\n        try {\n          const response = yield getLinkedEditingRanges(model, position, token);\n          if (request !== this._currentRequest) {\n            return;\n          }\n          this._currentRequest = null;\n          if (modelVersionId !== model.getVersionId()) {\n            return;\n          }\n          let ranges = [];\n          if (response === null || response === void 0 ? void 0 : response.ranges) {\n            ranges = response.ranges;\n          }\n          this._currentWordPattern = (response === null || response === void 0 ? void 0 : response.wordPattern) || this._languageWordPattern;\n          let foundReferenceRange = false;\n          for (let i = 0, len = ranges.length; i < len; i++) {\n            if (Range.containsPosition(ranges[i], position)) {\n              foundReferenceRange = true;\n              if (i !== 0) {\n                const referenceRange = ranges[i];\n                ranges.splice(i, 1);\n                ranges.unshift(referenceRange);\n              }\n              break;\n            }\n          }\n          if (!foundReferenceRange) {\n            // Cannot do linked editing if the ranges are not where the cursor is...\n            this.clearRanges();\n            return;\n          }\n          const decorations = ranges.map(range => ({\n            range: range,\n            options: LinkedEditingContribution.DECORATION\n          }));\n          this._visibleContextKey.set(true);\n          this._currentDecorations = this._editor.deltaDecorations(this._currentDecorations, decorations);\n        } catch (err) {\n          if (!isPromiseCanceledError(err)) {\n            onUnexpectedError(err);\n          }\n          if (this._currentRequest === request || !this._currentRequest) {\n            // stop if we are still the latest request\n            this.clearRanges();\n          }\n        }\n      }));\n      this._currentRequest = request;\n      return request;\n    });\n  }\n};\nLinkedEditingContribution.ID = 'editor.contrib.linkedEditing';\nLinkedEditingContribution.DECORATION = ModelDecorationOptions.register({\n  stickiness: 0 /* AlwaysGrowsWhenTypingAtEdges */,\n  className: DECORATION_CLASS_NAME\n});\nLinkedEditingContribution = __decorate([__param(1, IContextKeyService)], LinkedEditingContribution);\nexport { LinkedEditingContribution };\nexport class LinkedEditingAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.linkedEditing',\n      label: nls.localize('linkedEditing.label', \"Start Linked Editing\"),\n      alias: 'Start Linked Editing',\n      precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 60 /* F2 */,\n        weight: 100 /* EditorContrib */\n      }\n    });\n  }\n\n  runCommand(accessor, args) {\n    const editorService = accessor.get(ICodeEditorService);\n    const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n    if (URI.isUri(uri) && Position.isIPosition(pos)) {\n      return editorService.openCodeEditor({\n        resource: uri\n      }, editorService.getActiveCodeEditor()).then(editor => {\n        if (!editor) {\n          return;\n        }\n        editor.setPosition(pos);\n        editor.invokeWithinContext(accessor => {\n          this.reportTelemetry(accessor, editor);\n          return this.run(accessor, editor);\n        });\n      }, onUnexpectedError);\n    }\n    return super.runCommand(accessor, args);\n  }\n  run(_accessor, editor) {\n    const controller = LinkedEditingContribution.get(editor);\n    if (controller) {\n      return Promise.resolve(controller.updateRanges(true));\n    }\n    return Promise.resolve();\n  }\n}\nconst LinkedEditingCommand = EditorCommand.bindToContribution(LinkedEditingContribution.get);\nregisterEditorCommand(new LinkedEditingCommand({\n  id: 'cancelLinkedEditingInput',\n  precondition: CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE,\n  handler: x => x.clearRanges(),\n  kbOpts: {\n    kbExpr: EditorContextKeys.editorTextFocus,\n    weight: 100 /* EditorContrib */ + 99,\n    primary: 9 /* Escape */,\n    secondary: [1024 /* Shift */ | 9 /* Escape */]\n  }\n}));\n\nfunction getLinkedEditingRanges(model, position, token) {\n  const orderedByScore = LinkedEditingRangeProviderRegistry.ordered(model);\n  // in order of score ask the linked editing range provider\n  // until someone response with a good result\n  // (good = not null)\n  return first(orderedByScore.map(provider => () => __awaiter(this, void 0, void 0, function* () {\n    try {\n      return yield provider.provideLinkedEditingRanges(model, position, token);\n    } catch (e) {\n      onUnexpectedExternalError(e);\n      return undefined;\n    }\n  })), result => !!result && arrays.isNonEmptyArray(result === null || result === void 0 ? void 0 : result.ranges));\n}\nexport const editorLinkedEditingBackground = registerColor('editor.linkedEditingBackground', {\n  dark: Color.fromHex('#f00').transparent(0.3),\n  light: Color.fromHex('#f00').transparent(0.3),\n  hc: Color.fromHex('#f00').transparent(0.3)\n}, nls.localize('editorLinkedEditingBackground', 'Background color when the editor auto renames on type.'));\nregisterThemingParticipant((theme, collector) => {\n  const editorLinkedEditingBackgroundColor = theme.getColor(editorLinkedEditingBackground);\n  if (editorLinkedEditingBackgroundColor) {\n    collector.addRule(\".monaco-editor .\".concat(DECORATION_CLASS_NAME, \" { background: \").concat(editorLinkedEditingBackgroundColor, \"; border-left-color: \").concat(editorLinkedEditingBackgroundColor, \"; }\"));\n  }\n});\nregisterModelAndPositionCommand('_executeLinkedEditingProvider', (model, position) => getLinkedEditingRanges(model, position, CancellationToken.None));\nregisterEditorContribution(LinkedEditingContribution.ID, LinkedEditingContribution);\nregisterEditorAction(LinkedEditingAction);","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","nls","registerEditorContribution","registerModelAndPositionCommand","EditorAction","EditorCommand","registerEditorAction","registerEditorCommand","arrays","Disposable","DisposableStore","Position","CancellationToken","Range","LinkedEditingRangeProviderRegistry","first","createCancelablePromise","Delayer","ModelDecorationOptions","ContextKeyExpr","RawContextKey","IContextKeyService","EditorContextKeys","URI","ICodeEditorService","isPromiseCanceledError","onUnexpectedError","onUnexpectedExternalError","strings","registerColor","registerThemingParticipant","Color","LanguageConfigurationRegistry","CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE","DECORATION_CLASS_NAME","LinkedEditingContribution","constructor","editor","contextKeyService","_debounceDuration","_localToDispose","_register","_editor","_enabled","_visibleContextKey","bindTo","_currentDecorations","_languageWordPattern","_currentWordPattern","_ignoreChangeEvent","_rangeUpdateTriggerPromise","_rangeSyncTriggerPromise","_currentRequest","_currentRequestPosition","_currentRequestModelVersion","onDidChangeModel","reinitialize","onDidChangeConfiguration","hasChanged","onDidChange","onDidChangeModelLanguage","get","getContribution","ID","model","getModel","isEnabled","getOption","has","clearRanges","clear","getWordDefinition","getLanguageIdentifier","id","add","onDidChangeLanguageConfiguration","rangeUpdateScheduler","triggerRangeUpdate","trigger","updateRanges","rangeSyncScheduler","triggerRangeSync","decorations","_syncRanges","onDidChangeCursorPosition","onDidChangeModelContent","referenceRange","getDecorationRange","changes","every","intersectRanges","range","dispose","cancel","hasModel","startLineNumber","endLineNumber","referenceValue","getValueInRange","match","matchLength","edits","len","mirrorRange","push","text","oldValue","newValue","rangeStartColumn","startColumn","rangeEndColumn","endColumn","commonPrefixLength","substr","commonSuffixLength","popUndoStop","prevEditOperationType","_getViewModel","getPrevEditOperationType","executeEdits","setPrevEditOperationType","set","deltaDecorations","force","undefined","position","getPosition","getSelections","modelVersionId","getVersionId","equals","containsPosition","request","token","response","getLinkedEditingRanges","ranges","wordPattern","foundReferenceRange","splice","unshift","map","options","DECORATION","err","register","stickiness","className","LinkedEditingAction","label","localize","alias","precondition","and","writable","hasRenameProvider","kbOpts","kbExpr","editorTextFocus","primary","weight","runCommand","accessor","args","editorService","uri","pos","Array","isArray","isUri","isIPosition","openCodeEditor","resource","getActiveCodeEditor","setPosition","invokeWithinContext","reportTelemetry","run","_accessor","controller","LinkedEditingCommand","bindToContribution","handler","x","secondary","orderedByScore","ordered","provider","provideLinkedEditingRanges","isNonEmptyArray","editorLinkedEditingBackground","dark","fromHex","transparent","light","hc","theme","collector","editorLinkedEditingBackgroundColor","getColor","addRule","concat","None"],"sources":["C:/Users/Administrator/Desktop/sqllineage-master/sqllineagejs/node_modules/monaco-editor/esm/vs/editor/contrib/linkedEditing/linkedEditing.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nimport * as nls from '../../../nls.js';\r\nimport { registerEditorContribution, registerModelAndPositionCommand, EditorAction, EditorCommand, registerEditorAction, registerEditorCommand } from '../../browser/editorExtensions.js';\r\nimport * as arrays from '../../../base/common/arrays.js';\r\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { LinkedEditingRangeProviderRegistry } from '../../common/modes.js';\r\nimport { first, createCancelablePromise, Delayer } from '../../../base/common/async.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { ContextKeyExpr, RawContextKey, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { isPromiseCanceledError, onUnexpectedError, onUnexpectedExternalError } from '../../../base/common/errors.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { registerColor } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { Color } from '../../../base/common/color.js';\r\nimport { LanguageConfigurationRegistry } from '../../common/modes/languageConfigurationRegistry.js';\r\nexport const CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE = new RawContextKey('LinkedEditingInputVisible', false);\r\nconst DECORATION_CLASS_NAME = 'linked-editing-decoration';\r\nlet LinkedEditingContribution = class LinkedEditingContribution extends Disposable {\r\n    constructor(editor, contextKeyService) {\r\n        super();\r\n        this._debounceDuration = 200;\r\n        this._localToDispose = this._register(new DisposableStore());\r\n        this._editor = editor;\r\n        this._enabled = false;\r\n        this._visibleContextKey = CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\r\n        this._currentDecorations = [];\r\n        this._languageWordPattern = null;\r\n        this._currentWordPattern = null;\r\n        this._ignoreChangeEvent = false;\r\n        this._localToDispose = this._register(new DisposableStore());\r\n        this._rangeUpdateTriggerPromise = null;\r\n        this._rangeSyncTriggerPromise = null;\r\n        this._currentRequest = null;\r\n        this._currentRequestPosition = null;\r\n        this._currentRequestModelVersion = null;\r\n        this._register(this._editor.onDidChangeModel(() => this.reinitialize()));\r\n        this._register(this._editor.onDidChangeConfiguration(e => {\r\n            if (e.hasChanged(56 /* linkedEditing */) || e.hasChanged(76 /* renameOnType */)) {\r\n                this.reinitialize();\r\n            }\r\n        }));\r\n        this._register(LinkedEditingRangeProviderRegistry.onDidChange(() => this.reinitialize()));\r\n        this._register(this._editor.onDidChangeModelLanguage(() => this.reinitialize()));\r\n        this.reinitialize();\r\n    }\r\n    static get(editor) {\r\n        return editor.getContribution(LinkedEditingContribution.ID);\r\n    }\r\n    reinitialize() {\r\n        const model = this._editor.getModel();\r\n        const isEnabled = model !== null && (this._editor.getOption(56 /* linkedEditing */) || this._editor.getOption(76 /* renameOnType */)) && LinkedEditingRangeProviderRegistry.has(model);\r\n        if (isEnabled === this._enabled) {\r\n            return;\r\n        }\r\n        this._enabled = isEnabled;\r\n        this.clearRanges();\r\n        this._localToDispose.clear();\r\n        if (!isEnabled || model === null) {\r\n            return;\r\n        }\r\n        this._languageWordPattern = LanguageConfigurationRegistry.getWordDefinition(model.getLanguageIdentifier().id);\r\n        this._localToDispose.add(model.onDidChangeLanguageConfiguration(() => {\r\n            this._languageWordPattern = LanguageConfigurationRegistry.getWordDefinition(model.getLanguageIdentifier().id);\r\n        }));\r\n        const rangeUpdateScheduler = new Delayer(this._debounceDuration);\r\n        const triggerRangeUpdate = () => {\r\n            this._rangeUpdateTriggerPromise = rangeUpdateScheduler.trigger(() => this.updateRanges(), this._debounceDuration);\r\n        };\r\n        const rangeSyncScheduler = new Delayer(0);\r\n        const triggerRangeSync = (decorations) => {\r\n            this._rangeSyncTriggerPromise = rangeSyncScheduler.trigger(() => this._syncRanges(decorations));\r\n        };\r\n        this._localToDispose.add(this._editor.onDidChangeCursorPosition(() => {\r\n            triggerRangeUpdate();\r\n        }));\r\n        this._localToDispose.add(this._editor.onDidChangeModelContent((e) => {\r\n            if (!this._ignoreChangeEvent) {\r\n                if (this._currentDecorations.length > 0) {\r\n                    const referenceRange = model.getDecorationRange(this._currentDecorations[0]);\r\n                    if (referenceRange && e.changes.every(c => referenceRange.intersectRanges(c.range))) {\r\n                        triggerRangeSync(this._currentDecorations);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            triggerRangeUpdate();\r\n        }));\r\n        this._localToDispose.add({\r\n            dispose: () => {\r\n                rangeUpdateScheduler.cancel();\r\n                rangeSyncScheduler.cancel();\r\n            }\r\n        });\r\n        this.updateRanges();\r\n    }\r\n    _syncRanges(decorations) {\r\n        // dalayed invocation, make sure we're still on\r\n        if (!this._editor.hasModel() || decorations !== this._currentDecorations || decorations.length === 0) {\r\n            // nothing to do\r\n            return;\r\n        }\r\n        const model = this._editor.getModel();\r\n        const referenceRange = model.getDecorationRange(decorations[0]);\r\n        if (!referenceRange || referenceRange.startLineNumber !== referenceRange.endLineNumber) {\r\n            return this.clearRanges();\r\n        }\r\n        const referenceValue = model.getValueInRange(referenceRange);\r\n        if (this._currentWordPattern) {\r\n            const match = referenceValue.match(this._currentWordPattern);\r\n            const matchLength = match ? match[0].length : 0;\r\n            if (matchLength !== referenceValue.length) {\r\n                return this.clearRanges();\r\n            }\r\n        }\r\n        let edits = [];\r\n        for (let i = 1, len = decorations.length; i < len; i++) {\r\n            const mirrorRange = model.getDecorationRange(decorations[i]);\r\n            if (!mirrorRange) {\r\n                continue;\r\n            }\r\n            if (mirrorRange.startLineNumber !== mirrorRange.endLineNumber) {\r\n                edits.push({\r\n                    range: mirrorRange,\r\n                    text: referenceValue\r\n                });\r\n            }\r\n            else {\r\n                let oldValue = model.getValueInRange(mirrorRange);\r\n                let newValue = referenceValue;\r\n                let rangeStartColumn = mirrorRange.startColumn;\r\n                let rangeEndColumn = mirrorRange.endColumn;\r\n                const commonPrefixLength = strings.commonPrefixLength(oldValue, newValue);\r\n                rangeStartColumn += commonPrefixLength;\r\n                oldValue = oldValue.substr(commonPrefixLength);\r\n                newValue = newValue.substr(commonPrefixLength);\r\n                const commonSuffixLength = strings.commonSuffixLength(oldValue, newValue);\r\n                rangeEndColumn -= commonSuffixLength;\r\n                oldValue = oldValue.substr(0, oldValue.length - commonSuffixLength);\r\n                newValue = newValue.substr(0, newValue.length - commonSuffixLength);\r\n                if (rangeStartColumn !== rangeEndColumn || newValue.length !== 0) {\r\n                    edits.push({\r\n                        range: new Range(mirrorRange.startLineNumber, rangeStartColumn, mirrorRange.endLineNumber, rangeEndColumn),\r\n                        text: newValue\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        if (edits.length === 0) {\r\n            return;\r\n        }\r\n        try {\r\n            this._editor.popUndoStop();\r\n            this._ignoreChangeEvent = true;\r\n            const prevEditOperationType = this._editor._getViewModel().getPrevEditOperationType();\r\n            this._editor.executeEdits('linkedEditing', edits);\r\n            this._editor._getViewModel().setPrevEditOperationType(prevEditOperationType);\r\n        }\r\n        finally {\r\n            this._ignoreChangeEvent = false;\r\n        }\r\n    }\r\n    dispose() {\r\n        this.clearRanges();\r\n        super.dispose();\r\n    }\r\n    clearRanges() {\r\n        this._visibleContextKey.set(false);\r\n        this._currentDecorations = this._editor.deltaDecorations(this._currentDecorations, []);\r\n        if (this._currentRequest) {\r\n            this._currentRequest.cancel();\r\n            this._currentRequest = null;\r\n            this._currentRequestPosition = null;\r\n        }\r\n    }\r\n    updateRanges(force = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._editor.hasModel()) {\r\n                this.clearRanges();\r\n                return;\r\n            }\r\n            const position = this._editor.getPosition();\r\n            if (!this._enabled && !force || this._editor.getSelections().length > 1) {\r\n                // disabled or multicursor\r\n                this.clearRanges();\r\n                return;\r\n            }\r\n            const model = this._editor.getModel();\r\n            const modelVersionId = model.getVersionId();\r\n            if (this._currentRequestPosition && this._currentRequestModelVersion === modelVersionId) {\r\n                if (position.equals(this._currentRequestPosition)) {\r\n                    return; // same position\r\n                }\r\n                if (this._currentDecorations && this._currentDecorations.length > 0) {\r\n                    const range = model.getDecorationRange(this._currentDecorations[0]);\r\n                    if (range && range.containsPosition(position)) {\r\n                        return; // just moving inside the existing primary range\r\n                    }\r\n                }\r\n            }\r\n            this._currentRequestPosition = position;\r\n            this._currentRequestModelVersion = modelVersionId;\r\n            const request = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\r\n                try {\r\n                    const response = yield getLinkedEditingRanges(model, position, token);\r\n                    if (request !== this._currentRequest) {\r\n                        return;\r\n                    }\r\n                    this._currentRequest = null;\r\n                    if (modelVersionId !== model.getVersionId()) {\r\n                        return;\r\n                    }\r\n                    let ranges = [];\r\n                    if (response === null || response === void 0 ? void 0 : response.ranges) {\r\n                        ranges = response.ranges;\r\n                    }\r\n                    this._currentWordPattern = (response === null || response === void 0 ? void 0 : response.wordPattern) || this._languageWordPattern;\r\n                    let foundReferenceRange = false;\r\n                    for (let i = 0, len = ranges.length; i < len; i++) {\r\n                        if (Range.containsPosition(ranges[i], position)) {\r\n                            foundReferenceRange = true;\r\n                            if (i !== 0) {\r\n                                const referenceRange = ranges[i];\r\n                                ranges.splice(i, 1);\r\n                                ranges.unshift(referenceRange);\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (!foundReferenceRange) {\r\n                        // Cannot do linked editing if the ranges are not where the cursor is...\r\n                        this.clearRanges();\r\n                        return;\r\n                    }\r\n                    const decorations = ranges.map(range => ({ range: range, options: LinkedEditingContribution.DECORATION }));\r\n                    this._visibleContextKey.set(true);\r\n                    this._currentDecorations = this._editor.deltaDecorations(this._currentDecorations, decorations);\r\n                }\r\n                catch (err) {\r\n                    if (!isPromiseCanceledError(err)) {\r\n                        onUnexpectedError(err);\r\n                    }\r\n                    if (this._currentRequest === request || !this._currentRequest) {\r\n                        // stop if we are still the latest request\r\n                        this.clearRanges();\r\n                    }\r\n                }\r\n            }));\r\n            this._currentRequest = request;\r\n            return request;\r\n        });\r\n    }\r\n};\r\nLinkedEditingContribution.ID = 'editor.contrib.linkedEditing';\r\nLinkedEditingContribution.DECORATION = ModelDecorationOptions.register({\r\n    stickiness: 0 /* AlwaysGrowsWhenTypingAtEdges */,\r\n    className: DECORATION_CLASS_NAME\r\n});\r\nLinkedEditingContribution = __decorate([\r\n    __param(1, IContextKeyService)\r\n], LinkedEditingContribution);\r\nexport { LinkedEditingContribution };\r\nexport class LinkedEditingAction extends EditorAction {\r\n    constructor() {\r\n        super({\r\n            id: 'editor.action.linkedEditing',\r\n            label: nls.localize('linkedEditing.label', \"Start Linked Editing\"),\r\n            alias: 'Start Linked Editing',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 60 /* F2 */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        });\r\n    }\r\n    runCommand(accessor, args) {\r\n        const editorService = accessor.get(ICodeEditorService);\r\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\r\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\r\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\r\n                if (!editor) {\r\n                    return;\r\n                }\r\n                editor.setPosition(pos);\r\n                editor.invokeWithinContext(accessor => {\r\n                    this.reportTelemetry(accessor, editor);\r\n                    return this.run(accessor, editor);\r\n                });\r\n            }, onUnexpectedError);\r\n        }\r\n        return super.runCommand(accessor, args);\r\n    }\r\n    run(_accessor, editor) {\r\n        const controller = LinkedEditingContribution.get(editor);\r\n        if (controller) {\r\n            return Promise.resolve(controller.updateRanges(true));\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n}\r\nconst LinkedEditingCommand = EditorCommand.bindToContribution(LinkedEditingContribution.get);\r\nregisterEditorCommand(new LinkedEditingCommand({\r\n    id: 'cancelLinkedEditingInput',\r\n    precondition: CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE,\r\n    handler: x => x.clearRanges(),\r\n    kbOpts: {\r\n        kbExpr: EditorContextKeys.editorTextFocus,\r\n        weight: 100 /* EditorContrib */ + 99,\r\n        primary: 9 /* Escape */,\r\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\r\n    }\r\n}));\r\nfunction getLinkedEditingRanges(model, position, token) {\r\n    const orderedByScore = LinkedEditingRangeProviderRegistry.ordered(model);\r\n    // in order of score ask the linked editing range provider\r\n    // until someone response with a good result\r\n    // (good = not null)\r\n    return first(orderedByScore.map(provider => () => __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            return yield provider.provideLinkedEditingRanges(model, position, token);\r\n        }\r\n        catch (e) {\r\n            onUnexpectedExternalError(e);\r\n            return undefined;\r\n        }\r\n    })), result => !!result && arrays.isNonEmptyArray(result === null || result === void 0 ? void 0 : result.ranges));\r\n}\r\nexport const editorLinkedEditingBackground = registerColor('editor.linkedEditingBackground', { dark: Color.fromHex('#f00').transparent(0.3), light: Color.fromHex('#f00').transparent(0.3), hc: Color.fromHex('#f00').transparent(0.3) }, nls.localize('editorLinkedEditingBackground', 'Background color when the editor auto renames on type.'));\r\nregisterThemingParticipant((theme, collector) => {\r\n    const editorLinkedEditingBackgroundColor = theme.getColor(editorLinkedEditingBackground);\r\n    if (editorLinkedEditingBackgroundColor) {\r\n        collector.addRule(`.monaco-editor .${DECORATION_CLASS_NAME} { background: ${editorLinkedEditingBackgroundColor}; border-left-color: ${editorLinkedEditingBackgroundColor}; }`);\r\n    }\r\n});\r\nregisterModelAndPositionCommand('_executeLinkedEditingProvider', (model, position) => getLinkedEditingRanges(model, position, CancellationToken.None));\r\nregisterEditorContribution(LinkedEditingContribution.ID, LinkedEditingContribution);\r\nregisterEditorAction(LinkedEditingAction);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}