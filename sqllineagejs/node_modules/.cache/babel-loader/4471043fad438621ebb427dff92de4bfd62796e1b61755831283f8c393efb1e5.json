{"ast":null,"code":"import{createAsyncThunk,createSlice}from'@reduxjs/toolkit';import{assemble_absolute_endpoint,client}from\"../../api/client\";const initialState={file:\"\",dialect:\"\",content:\"\",contentComposed:\"\",editable:false,editorStatus:'idle',editorError:null,dagContent:[],dagColumn:[],dagLevel:\"table\",dagVerbose:\"\",dagStatus:'idle',dagError:null};export const fetchContent=createAsyncThunk('editor/fetchContent',async payload=>{return await client.post(assemble_absolute_endpoint(\"/script\"),payload);});export const fetchDAG=createAsyncThunk('dag/fetchDAG',async payload=>{let dialect=localStorage.getItem(\"dialect\");if(dialect!==null){payload[\"dialect\"]=dialect;}return await client.post(assemble_absolute_endpoint(\"/lineage\"),payload);});export const editorSlice=createSlice({name:'editor',initialState,reducers:{setContentComposed(state,action){state.contentComposed=action.payload;},setEditable(state,action){state.editable=action.payload;},setFile(state,action){state.file=action.payload;},setDialect(state,action){state.dialect=action.payload;},setDagLevel(state,action){state.dagLevel=action.payload;}},extraReducers:{[fetchContent.pending]:state=>{state.editorStatus=\"loading\";},[fetchContent.fulfilled]:(state,action)=>{state.editorStatus=\"succeeded\";state.content=action.payload.content;},[fetchContent.rejected]:(state,action)=>{state.editorStatus=\"failed\";state.editorError=action.error.message;},[fetchDAG.pending]:state=>{state.dagStatus=\"loading\";},[fetchDAG.fulfilled]:(state,action)=>{state.dagStatus=\"succeeded\";state.dagContent=action.payload.dag;state.dagVerbose=action.payload.verbose;state.dagColumn=action.payload.column;},[fetchDAG.rejected]:(state,action)=>{state.dagStatus=\"failed\";state.dagError=action.error.message;}}});export const selectEditor=state=>state.editor;export const{setContentComposed,setDagLevel,setEditable,setFile,setDialect}=editorSlice.actions;export default editorSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","assemble_absolute_endpoint","client","initialState","file","dialect","content","contentComposed","editable","editorStatus","editorError","dagContent","dagColumn","dagLevel","dagVerbose","dagStatus","dagError","fetchContent","payload","post","fetchDAG","localStorage","getItem","editorSlice","name","reducers","setContentComposed","state","action","setEditable","setFile","setDialect","setDagLevel","extraReducers","pending","fulfilled","rejected","error","message","dag","verbose","column","selectEditor","editor","actions","reducer"],"sources":["C:/Users/Administrator/Desktop/sqllineage-master/sqllineagejs/src/features/editor/editorSlice.js"],"sourcesContent":["import {createAsyncThunk, createSlice} from '@reduxjs/toolkit';\nimport {assemble_absolute_endpoint, client} from \"../../api/client\";\n\nconst initialState = {\n  file: \"\",\n  dialect: \"\",\n  content: \"\",\n  contentComposed: \"\",\n  editable: false,\n  editorStatus: 'idle',\n  editorError: null,\n  dagContent: [],\n  dagColumn: [],\n  dagLevel: \"table\",\n  dagVerbose: \"\",\n  dagStatus: 'idle',\n  dagError: null\n}\n\nexport const fetchContent = createAsyncThunk('editor/fetchContent', async (payload) => {\n  return await client.post(assemble_absolute_endpoint(\"/script\"), payload);\n})\n\nexport const fetchDAG = createAsyncThunk('dag/fetchDAG', async (payload) => {\n  let dialect = localStorage.getItem(\"dialect\");\n  if (dialect !== null) {\n    payload[\"dialect\"] = dialect\n  }\n  return await client.post(assemble_absolute_endpoint(\"/lineage\"), payload);\n})\n\nexport const editorSlice = createSlice({\n  name: 'editor',\n  initialState,\n  reducers: {\n    setContentComposed(state, action) {\n      state.contentComposed = action.payload\n    },\n    setEditable(state, action) {\n      state.editable = action.payload\n    },\n    setFile(state, action) {\n      state.file = action.payload\n    },\n    setDialect(state, action) {\n      state.dialect = action.payload\n    },\n    setDagLevel(state, action) {\n      state.dagLevel = action.payload\n    }\n  },\n  extraReducers: {\n    [fetchContent.pending]: (state) => {\n      state.editorStatus = \"loading\"\n    },\n    [fetchContent.fulfilled]: (state, action) => {\n      state.editorStatus = \"succeeded\";\n      state.content = action.payload.content\n    },\n    [fetchContent.rejected]: (state, action) => {\n      state.editorStatus = \"failed\"\n      state.editorError = action.error.message\n    },\n    [fetchDAG.pending]: (state) => {\n      state.dagStatus = \"loading\"\n    },\n    [fetchDAG.fulfilled]: (state, action) => {\n      state.dagStatus = \"succeeded\";\n      state.dagContent = action.payload.dag;\n      state.dagVerbose = action.payload.verbose;\n      state.dagColumn = action.payload.column;\n    },\n    [fetchDAG.rejected]: (state, action) => {\n      state.dagStatus = \"failed\";\n      state.dagError = action.error.message;\n    }\n  }\n});\n\nexport const selectEditor = state => state.editor;\nexport const {setContentComposed, setDagLevel, setEditable, setFile, setDialect} = editorSlice.actions;\n\nexport default editorSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}