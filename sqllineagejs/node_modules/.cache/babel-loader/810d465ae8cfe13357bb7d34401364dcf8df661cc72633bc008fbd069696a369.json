{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { domEvent, stop } from '../../../base/browser/event.js';\nimport * as aria from '../../../base/browser/ui/aria/aria.js';\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Event } from '../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport './parameterHints.css';\nimport { IModeService } from '../../common/services/modeService.js';\nimport { MarkdownRenderer } from '../../browser/core/markdownRenderer.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../nls.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { editorHoverBackground, editorHoverBorder, textCodeBlockBackground, textLinkForeground, editorHoverForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, ThemeIcon } from '../../../platform/theme/common/themeService.js';\nimport { ParameterHintsModel } from './parameterHintsModel.js';\nimport { escapeRegExpCharacters } from '../../../base/common/strings.js';\nimport { Codicon } from '../../../base/common/codicons.js';\nimport { assertIsDefined } from '../../../base/common/types.js';\nimport { ColorScheme } from '../../../platform/theme/common/theme.js';\nimport { registerIcon } from '../../../platform/theme/common/iconRegistry.js';\nconst $ = dom.$;\nconst parameterHintsNextIcon = registerIcon('parameter-hints-next', Codicon.chevronDown, nls.localize('parameterHintsNextIcon', 'Icon for show next parameter hint.'));\nconst parameterHintsPreviousIcon = registerIcon('parameter-hints-previous', Codicon.chevronUp, nls.localize('parameterHintsPreviousIcon', 'Icon for show previous parameter hint.'));\nlet ParameterHintsWidget = class ParameterHintsWidget extends Disposable {\n  constructor(editor, contextKeyService, openerService, modeService) {\n    super();\n    this.editor = editor;\n    this.renderDisposeables = this._register(new DisposableStore());\n    this.visible = false;\n    this.announcedLabel = null;\n    // Editor.IContentWidget.allowEditorOverflow\n    this.allowEditorOverflow = true;\n    this.markdownRenderer = this._register(new MarkdownRenderer({\n      editor\n    }, modeService, openerService));\n    this.model = this._register(new ParameterHintsModel(editor));\n    this.keyVisible = Context.Visible.bindTo(contextKeyService);\n    this.keyMultipleSignatures = Context.MultipleSignatures.bindTo(contextKeyService);\n    this._register(this.model.onChangedHints(newParameterHints => {\n      if (newParameterHints) {\n        this.show();\n        this.render(newParameterHints);\n      } else {\n        this.hide();\n      }\n    }));\n  }\n  createParamaterHintDOMNodes() {\n    const element = $('.editor-widget.parameter-hints-widget');\n    const wrapper = dom.append(element, $('.phwrapper'));\n    wrapper.tabIndex = -1;\n    const controls = dom.append(wrapper, $('.controls'));\n    const previous = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsPreviousIcon)));\n    const overloads = dom.append(controls, $('.overloads'));\n    const next = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsNextIcon)));\n    const onPreviousClick = stop(domEvent(previous, 'click'));\n    this._register(onPreviousClick(this.previous, this));\n    const onNextClick = stop(domEvent(next, 'click'));\n    this._register(onNextClick(this.next, this));\n    const body = $('.body');\n    const scrollbar = new DomScrollableElement(body, {});\n    this._register(scrollbar);\n    wrapper.appendChild(scrollbar.getDomNode());\n    const signature = dom.append(body, $('.signature'));\n    const docs = dom.append(body, $('.docs'));\n    element.style.userSelect = 'text';\n    this.domNodes = {\n      element,\n      signature,\n      overloads,\n      docs,\n      scrollbar\n    };\n    this.editor.addContentWidget(this);\n    this.hide();\n    this._register(this.editor.onDidChangeCursorSelection(e => {\n      if (this.visible) {\n        this.editor.layoutContentWidget(this);\n      }\n    }));\n    const updateFont = () => {\n      if (!this.domNodes) {\n        return;\n      }\n      const fontInfo = this.editor.getOption(38 /* fontInfo */);\n      this.domNodes.element.style.fontSize = \"\".concat(fontInfo.fontSize, \"px\");\n    };\n    updateFont();\n    this._register(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(e => e.hasChanged(38 /* fontInfo */)).on(updateFont, null));\n    this._register(this.editor.onDidLayoutChange(e => this.updateMaxHeight()));\n    this.updateMaxHeight();\n  }\n  show() {\n    if (this.visible) {\n      return;\n    }\n    if (!this.domNodes) {\n      this.createParamaterHintDOMNodes();\n    }\n    this.keyVisible.set(true);\n    this.visible = true;\n    setTimeout(() => {\n      if (this.domNodes) {\n        this.domNodes.element.classList.add('visible');\n      }\n    }, 100);\n    this.editor.layoutContentWidget(this);\n  }\n  hide() {\n    this.renderDisposeables.clear();\n    if (!this.visible) {\n      return;\n    }\n    this.keyVisible.reset();\n    this.visible = false;\n    this.announcedLabel = null;\n    if (this.domNodes) {\n      this.domNodes.element.classList.remove('visible');\n    }\n    this.editor.layoutContentWidget(this);\n  }\n  getPosition() {\n    if (this.visible) {\n      return {\n        position: this.editor.getPosition(),\n        preference: [1 /* ABOVE */, 2 /* BELOW */]\n      };\n    }\n\n    return null;\n  }\n  render(hints) {\n    var _a;\n    this.renderDisposeables.clear();\n    if (!this.domNodes) {\n      return;\n    }\n    const multiple = hints.signatures.length > 1;\n    this.domNodes.element.classList.toggle('multiple', multiple);\n    this.keyMultipleSignatures.set(multiple);\n    this.domNodes.signature.innerText = '';\n    this.domNodes.docs.innerText = '';\n    const signature = hints.signatures[hints.activeSignature];\n    if (!signature) {\n      return;\n    }\n    const code = dom.append(this.domNodes.signature, $('.code'));\n    const fontInfo = this.editor.getOption(38 /* fontInfo */);\n    code.style.fontSize = \"\".concat(fontInfo.fontSize, \"px\");\n    code.style.fontFamily = fontInfo.fontFamily;\n    const hasParameters = signature.parameters.length > 0;\n    const activeParameterIndex = (_a = signature.activeParameter) !== null && _a !== void 0 ? _a : hints.activeParameter;\n    if (!hasParameters) {\n      const label = dom.append(code, $('span'));\n      label.textContent = signature.label;\n    } else {\n      this.renderParameters(code, signature, activeParameterIndex);\n    }\n    const activeParameter = signature.parameters[activeParameterIndex];\n    if (activeParameter === null || activeParameter === void 0 ? void 0 : activeParameter.documentation) {\n      const documentation = $('span.documentation');\n      if (typeof activeParameter.documentation === 'string') {\n        documentation.textContent = activeParameter.documentation;\n      } else {\n        const renderedContents = this.renderMarkdownDocs(activeParameter.documentation);\n        documentation.appendChild(renderedContents.element);\n      }\n      dom.append(this.domNodes.docs, $('p', {}, documentation));\n    }\n    if (signature.documentation === undefined) {\n      /** no op */\n    } else if (typeof signature.documentation === 'string') {\n      dom.append(this.domNodes.docs, $('p', {}, signature.documentation));\n    } else {\n      const renderedContents = this.renderMarkdownDocs(signature.documentation);\n      dom.append(this.domNodes.docs, renderedContents.element);\n    }\n    const hasDocs = this.hasDocs(signature, activeParameter);\n    this.domNodes.signature.classList.toggle('has-docs', hasDocs);\n    this.domNodes.docs.classList.toggle('empty', !hasDocs);\n    this.domNodes.overloads.textContent = String(hints.activeSignature + 1).padStart(hints.signatures.length.toString().length, '0') + '/' + hints.signatures.length;\n    if (activeParameter) {\n      const labelToAnnounce = this.getParameterLabel(signature, activeParameterIndex);\n      // Select method gets called on every user type while parameter hints are visible.\n      // We do not want to spam the user with same announcements, so we only announce if the current parameter changed.\n      if (this.announcedLabel !== labelToAnnounce) {\n        aria.alert(nls.localize('hint', \"{0}, hint\", labelToAnnounce));\n        this.announcedLabel = labelToAnnounce;\n      }\n    }\n    this.editor.layoutContentWidget(this);\n    this.domNodes.scrollbar.scanDomNode();\n  }\n  renderMarkdownDocs(markdown) {\n    const renderedContents = this.renderDisposeables.add(this.markdownRenderer.render(markdown, {\n      asyncRenderCallback: () => {\n        var _a;\n        (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.scrollbar.scanDomNode();\n      }\n    }));\n    renderedContents.element.classList.add('markdown-docs');\n    return renderedContents;\n  }\n  hasDocs(signature, activeParameter) {\n    if (activeParameter && typeof activeParameter.documentation === 'string' && assertIsDefined(activeParameter.documentation).length > 0) {\n      return true;\n    }\n    if (activeParameter && typeof activeParameter.documentation === 'object' && assertIsDefined(activeParameter.documentation).value.length > 0) {\n      return true;\n    }\n    if (signature.documentation && typeof signature.documentation === 'string' && assertIsDefined(signature.documentation).length > 0) {\n      return true;\n    }\n    if (signature.documentation && typeof signature.documentation === 'object' && assertIsDefined(signature.documentation.value).length > 0) {\n      return true;\n    }\n    return false;\n  }\n  renderParameters(parent, signature, activeParameterIndex) {\n    const [start, end] = this.getParameterLabelOffsets(signature, activeParameterIndex);\n    const beforeSpan = document.createElement('span');\n    beforeSpan.textContent = signature.label.substring(0, start);\n    const paramSpan = document.createElement('span');\n    paramSpan.textContent = signature.label.substring(start, end);\n    paramSpan.className = 'parameter active';\n    const afterSpan = document.createElement('span');\n    afterSpan.textContent = signature.label.substring(end);\n    dom.append(parent, beforeSpan, paramSpan, afterSpan);\n  }\n  getParameterLabel(signature, paramIdx) {\n    const param = signature.parameters[paramIdx];\n    if (Array.isArray(param.label)) {\n      return signature.label.substring(param.label[0], param.label[1]);\n    } else {\n      return param.label;\n    }\n  }\n  getParameterLabelOffsets(signature, paramIdx) {\n    const param = signature.parameters[paramIdx];\n    if (!param) {\n      return [0, 0];\n    } else if (Array.isArray(param.label)) {\n      return param.label;\n    } else if (!param.label.length) {\n      return [0, 0];\n    } else {\n      const regex = new RegExp(\"(\\\\W|^)\".concat(escapeRegExpCharacters(param.label), \"(?=\\\\W|$)\"), 'g');\n      regex.test(signature.label);\n      const idx = regex.lastIndex - param.label.length;\n      return idx >= 0 ? [idx, regex.lastIndex] : [0, 0];\n    }\n  }\n  next() {\n    this.editor.focus();\n    this.model.next();\n  }\n  previous() {\n    this.editor.focus();\n    this.model.previous();\n  }\n  cancel() {\n    this.model.cancel();\n  }\n  getDomNode() {\n    if (!this.domNodes) {\n      this.createParamaterHintDOMNodes();\n    }\n    return this.domNodes.element;\n  }\n  getId() {\n    return ParameterHintsWidget.ID;\n  }\n  trigger(context) {\n    this.model.trigger(context, 0);\n  }\n  updateMaxHeight() {\n    if (!this.domNodes) {\n      return;\n    }\n    const height = Math.max(this.editor.getLayoutInfo().height / 4, 250);\n    const maxHeight = \"\".concat(height, \"px\");\n    this.domNodes.element.style.maxHeight = maxHeight;\n    const wrapper = this.domNodes.element.getElementsByClassName('phwrapper');\n    if (wrapper.length) {\n      wrapper[0].style.maxHeight = maxHeight;\n    }\n  }\n};\nParameterHintsWidget.ID = 'editor.widget.parameterHintsWidget';\nParameterHintsWidget = __decorate([__param(1, IContextKeyService), __param(2, IOpenerService), __param(3, IModeService)], ParameterHintsWidget);\nexport { ParameterHintsWidget };\nregisterThemingParticipant((theme, collector) => {\n  const border = theme.getColor(editorHoverBorder);\n  if (border) {\n    const borderWidth = theme.type === ColorScheme.HIGH_CONTRAST ? 2 : 1;\n    collector.addRule(\".monaco-editor .parameter-hints-widget { border: \".concat(borderWidth, \"px solid \").concat(border, \"; }\"));\n    collector.addRule(\".monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid \".concat(border.transparent(0.5), \"; }\"));\n    collector.addRule(\".monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid \".concat(border.transparent(0.5), \"; }\"));\n  }\n  const background = theme.getColor(editorHoverBackground);\n  if (background) {\n    collector.addRule(\".monaco-editor .parameter-hints-widget { background-color: \".concat(background, \"; }\"));\n  }\n  const link = theme.getColor(textLinkForeground);\n  if (link) {\n    collector.addRule(\".monaco-editor .parameter-hints-widget a { color: \".concat(link, \"; }\"));\n  }\n  const foreground = theme.getColor(editorHoverForeground);\n  if (foreground) {\n    collector.addRule(\".monaco-editor .parameter-hints-widget { color: \".concat(foreground, \"; }\"));\n  }\n  const codeBackground = theme.getColor(textCodeBlockBackground);\n  if (codeBackground) {\n    collector.addRule(\".monaco-editor .parameter-hints-widget code { background-color: \".concat(codeBackground, \"; }\"));\n  }\n});","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","dom","domEvent","stop","aria","DomScrollableElement","Event","Disposable","DisposableStore","IModeService","MarkdownRenderer","Context","nls","IContextKeyService","IOpenerService","editorHoverBackground","editorHoverBorder","textCodeBlockBackground","textLinkForeground","editorHoverForeground","registerThemingParticipant","ThemeIcon","ParameterHintsModel","escapeRegExpCharacters","Codicon","assertIsDefined","ColorScheme","registerIcon","$","parameterHintsNextIcon","chevronDown","localize","parameterHintsPreviousIcon","chevronUp","ParameterHintsWidget","constructor","editor","contextKeyService","openerService","modeService","renderDisposeables","_register","visible","announcedLabel","allowEditorOverflow","markdownRenderer","model","keyVisible","Visible","bindTo","keyMultipleSignatures","MultipleSignatures","onChangedHints","newParameterHints","show","render","hide","createParamaterHintDOMNodes","element","wrapper","append","tabIndex","controls","previous","asCSSSelector","overloads","next","onPreviousClick","onNextClick","body","scrollbar","appendChild","getDomNode","signature","docs","style","userSelect","domNodes","addContentWidget","onDidChangeCursorSelection","e","layoutContentWidget","updateFont","fontInfo","getOption","fontSize","concat","chain","onDidChangeConfiguration","bind","filter","hasChanged","on","onDidLayoutChange","updateMaxHeight","set","setTimeout","classList","add","clear","reset","remove","getPosition","position","preference","hints","_a","multiple","signatures","toggle","innerText","activeSignature","code","fontFamily","hasParameters","parameters","activeParameterIndex","activeParameter","label","textContent","renderParameters","documentation","renderedContents","renderMarkdownDocs","undefined","hasDocs","String","padStart","toString","labelToAnnounce","getParameterLabel","alert","scanDomNode","markdown","asyncRenderCallback","value","parent","start","end","getParameterLabelOffsets","beforeSpan","document","createElement","substring","paramSpan","className","afterSpan","paramIdx","param","Array","isArray","regex","RegExp","test","idx","lastIndex","focus","cancel","getId","ID","trigger","context","height","Math","max","getLayoutInfo","maxHeight","getElementsByClassName","theme","collector","border","getColor","borderWidth","type","HIGH_CONTRAST","addRule","transparent","background","link","foreground","codeBackground"],"sources":["C:/Users/Administrator/Desktop/sqllineage-master/sqllineagejs/node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/parameterHintsWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { domEvent, stop } from '../../../base/browser/event.js';\r\nimport * as aria from '../../../base/browser/ui/aria/aria.js';\r\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { Event } from '../../../base/common/event.js';\r\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport './parameterHints.css';\r\nimport { IModeService } from '../../common/services/modeService.js';\r\nimport { MarkdownRenderer } from '../../browser/core/markdownRenderer.js';\r\nimport { Context } from './provideSignatureHelp.js';\r\nimport * as nls from '../../../nls.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { editorHoverBackground, editorHoverBorder, textCodeBlockBackground, textLinkForeground, editorHoverForeground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant, ThemeIcon } from '../../../platform/theme/common/themeService.js';\r\nimport { ParameterHintsModel } from './parameterHintsModel.js';\r\nimport { escapeRegExpCharacters } from '../../../base/common/strings.js';\r\nimport { Codicon } from '../../../base/common/codicons.js';\r\nimport { assertIsDefined } from '../../../base/common/types.js';\r\nimport { ColorScheme } from '../../../platform/theme/common/theme.js';\r\nimport { registerIcon } from '../../../platform/theme/common/iconRegistry.js';\r\nconst $ = dom.$;\r\nconst parameterHintsNextIcon = registerIcon('parameter-hints-next', Codicon.chevronDown, nls.localize('parameterHintsNextIcon', 'Icon for show next parameter hint.'));\r\nconst parameterHintsPreviousIcon = registerIcon('parameter-hints-previous', Codicon.chevronUp, nls.localize('parameterHintsPreviousIcon', 'Icon for show previous parameter hint.'));\r\nlet ParameterHintsWidget = class ParameterHintsWidget extends Disposable {\r\n    constructor(editor, contextKeyService, openerService, modeService) {\r\n        super();\r\n        this.editor = editor;\r\n        this.renderDisposeables = this._register(new DisposableStore());\r\n        this.visible = false;\r\n        this.announcedLabel = null;\r\n        // Editor.IContentWidget.allowEditorOverflow\r\n        this.allowEditorOverflow = true;\r\n        this.markdownRenderer = this._register(new MarkdownRenderer({ editor }, modeService, openerService));\r\n        this.model = this._register(new ParameterHintsModel(editor));\r\n        this.keyVisible = Context.Visible.bindTo(contextKeyService);\r\n        this.keyMultipleSignatures = Context.MultipleSignatures.bindTo(contextKeyService);\r\n        this._register(this.model.onChangedHints(newParameterHints => {\r\n            if (newParameterHints) {\r\n                this.show();\r\n                this.render(newParameterHints);\r\n            }\r\n            else {\r\n                this.hide();\r\n            }\r\n        }));\r\n    }\r\n    createParamaterHintDOMNodes() {\r\n        const element = $('.editor-widget.parameter-hints-widget');\r\n        const wrapper = dom.append(element, $('.phwrapper'));\r\n        wrapper.tabIndex = -1;\r\n        const controls = dom.append(wrapper, $('.controls'));\r\n        const previous = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsPreviousIcon)));\r\n        const overloads = dom.append(controls, $('.overloads'));\r\n        const next = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsNextIcon)));\r\n        const onPreviousClick = stop(domEvent(previous, 'click'));\r\n        this._register(onPreviousClick(this.previous, this));\r\n        const onNextClick = stop(domEvent(next, 'click'));\r\n        this._register(onNextClick(this.next, this));\r\n        const body = $('.body');\r\n        const scrollbar = new DomScrollableElement(body, {});\r\n        this._register(scrollbar);\r\n        wrapper.appendChild(scrollbar.getDomNode());\r\n        const signature = dom.append(body, $('.signature'));\r\n        const docs = dom.append(body, $('.docs'));\r\n        element.style.userSelect = 'text';\r\n        this.domNodes = {\r\n            element,\r\n            signature,\r\n            overloads,\r\n            docs,\r\n            scrollbar,\r\n        };\r\n        this.editor.addContentWidget(this);\r\n        this.hide();\r\n        this._register(this.editor.onDidChangeCursorSelection(e => {\r\n            if (this.visible) {\r\n                this.editor.layoutContentWidget(this);\r\n            }\r\n        }));\r\n        const updateFont = () => {\r\n            if (!this.domNodes) {\r\n                return;\r\n            }\r\n            const fontInfo = this.editor.getOption(38 /* fontInfo */);\r\n            this.domNodes.element.style.fontSize = `${fontInfo.fontSize}px`;\r\n        };\r\n        updateFont();\r\n        this._register(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor))\r\n            .filter(e => e.hasChanged(38 /* fontInfo */))\r\n            .on(updateFont, null));\r\n        this._register(this.editor.onDidLayoutChange(e => this.updateMaxHeight()));\r\n        this.updateMaxHeight();\r\n    }\r\n    show() {\r\n        if (this.visible) {\r\n            return;\r\n        }\r\n        if (!this.domNodes) {\r\n            this.createParamaterHintDOMNodes();\r\n        }\r\n        this.keyVisible.set(true);\r\n        this.visible = true;\r\n        setTimeout(() => {\r\n            if (this.domNodes) {\r\n                this.domNodes.element.classList.add('visible');\r\n            }\r\n        }, 100);\r\n        this.editor.layoutContentWidget(this);\r\n    }\r\n    hide() {\r\n        this.renderDisposeables.clear();\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n        this.keyVisible.reset();\r\n        this.visible = false;\r\n        this.announcedLabel = null;\r\n        if (this.domNodes) {\r\n            this.domNodes.element.classList.remove('visible');\r\n        }\r\n        this.editor.layoutContentWidget(this);\r\n    }\r\n    getPosition() {\r\n        if (this.visible) {\r\n            return {\r\n                position: this.editor.getPosition(),\r\n                preference: [1 /* ABOVE */, 2 /* BELOW */]\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    render(hints) {\r\n        var _a;\r\n        this.renderDisposeables.clear();\r\n        if (!this.domNodes) {\r\n            return;\r\n        }\r\n        const multiple = hints.signatures.length > 1;\r\n        this.domNodes.element.classList.toggle('multiple', multiple);\r\n        this.keyMultipleSignatures.set(multiple);\r\n        this.domNodes.signature.innerText = '';\r\n        this.domNodes.docs.innerText = '';\r\n        const signature = hints.signatures[hints.activeSignature];\r\n        if (!signature) {\r\n            return;\r\n        }\r\n        const code = dom.append(this.domNodes.signature, $('.code'));\r\n        const fontInfo = this.editor.getOption(38 /* fontInfo */);\r\n        code.style.fontSize = `${fontInfo.fontSize}px`;\r\n        code.style.fontFamily = fontInfo.fontFamily;\r\n        const hasParameters = signature.parameters.length > 0;\r\n        const activeParameterIndex = (_a = signature.activeParameter) !== null && _a !== void 0 ? _a : hints.activeParameter;\r\n        if (!hasParameters) {\r\n            const label = dom.append(code, $('span'));\r\n            label.textContent = signature.label;\r\n        }\r\n        else {\r\n            this.renderParameters(code, signature, activeParameterIndex);\r\n        }\r\n        const activeParameter = signature.parameters[activeParameterIndex];\r\n        if (activeParameter === null || activeParameter === void 0 ? void 0 : activeParameter.documentation) {\r\n            const documentation = $('span.documentation');\r\n            if (typeof activeParameter.documentation === 'string') {\r\n                documentation.textContent = activeParameter.documentation;\r\n            }\r\n            else {\r\n                const renderedContents = this.renderMarkdownDocs(activeParameter.documentation);\r\n                documentation.appendChild(renderedContents.element);\r\n            }\r\n            dom.append(this.domNodes.docs, $('p', {}, documentation));\r\n        }\r\n        if (signature.documentation === undefined) {\r\n            /** no op */\r\n        }\r\n        else if (typeof signature.documentation === 'string') {\r\n            dom.append(this.domNodes.docs, $('p', {}, signature.documentation));\r\n        }\r\n        else {\r\n            const renderedContents = this.renderMarkdownDocs(signature.documentation);\r\n            dom.append(this.domNodes.docs, renderedContents.element);\r\n        }\r\n        const hasDocs = this.hasDocs(signature, activeParameter);\r\n        this.domNodes.signature.classList.toggle('has-docs', hasDocs);\r\n        this.domNodes.docs.classList.toggle('empty', !hasDocs);\r\n        this.domNodes.overloads.textContent =\r\n            String(hints.activeSignature + 1).padStart(hints.signatures.length.toString().length, '0') + '/' + hints.signatures.length;\r\n        if (activeParameter) {\r\n            const labelToAnnounce = this.getParameterLabel(signature, activeParameterIndex);\r\n            // Select method gets called on every user type while parameter hints are visible.\r\n            // We do not want to spam the user with same announcements, so we only announce if the current parameter changed.\r\n            if (this.announcedLabel !== labelToAnnounce) {\r\n                aria.alert(nls.localize('hint', \"{0}, hint\", labelToAnnounce));\r\n                this.announcedLabel = labelToAnnounce;\r\n            }\r\n        }\r\n        this.editor.layoutContentWidget(this);\r\n        this.domNodes.scrollbar.scanDomNode();\r\n    }\r\n    renderMarkdownDocs(markdown) {\r\n        const renderedContents = this.renderDisposeables.add(this.markdownRenderer.render(markdown, {\r\n            asyncRenderCallback: () => {\r\n                var _a;\r\n                (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.scrollbar.scanDomNode();\r\n            }\r\n        }));\r\n        renderedContents.element.classList.add('markdown-docs');\r\n        return renderedContents;\r\n    }\r\n    hasDocs(signature, activeParameter) {\r\n        if (activeParameter && typeof activeParameter.documentation === 'string' && assertIsDefined(activeParameter.documentation).length > 0) {\r\n            return true;\r\n        }\r\n        if (activeParameter && typeof activeParameter.documentation === 'object' && assertIsDefined(activeParameter.documentation).value.length > 0) {\r\n            return true;\r\n        }\r\n        if (signature.documentation && typeof signature.documentation === 'string' && assertIsDefined(signature.documentation).length > 0) {\r\n            return true;\r\n        }\r\n        if (signature.documentation && typeof signature.documentation === 'object' && assertIsDefined(signature.documentation.value).length > 0) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    renderParameters(parent, signature, activeParameterIndex) {\r\n        const [start, end] = this.getParameterLabelOffsets(signature, activeParameterIndex);\r\n        const beforeSpan = document.createElement('span');\r\n        beforeSpan.textContent = signature.label.substring(0, start);\r\n        const paramSpan = document.createElement('span');\r\n        paramSpan.textContent = signature.label.substring(start, end);\r\n        paramSpan.className = 'parameter active';\r\n        const afterSpan = document.createElement('span');\r\n        afterSpan.textContent = signature.label.substring(end);\r\n        dom.append(parent, beforeSpan, paramSpan, afterSpan);\r\n    }\r\n    getParameterLabel(signature, paramIdx) {\r\n        const param = signature.parameters[paramIdx];\r\n        if (Array.isArray(param.label)) {\r\n            return signature.label.substring(param.label[0], param.label[1]);\r\n        }\r\n        else {\r\n            return param.label;\r\n        }\r\n    }\r\n    getParameterLabelOffsets(signature, paramIdx) {\r\n        const param = signature.parameters[paramIdx];\r\n        if (!param) {\r\n            return [0, 0];\r\n        }\r\n        else if (Array.isArray(param.label)) {\r\n            return param.label;\r\n        }\r\n        else if (!param.label.length) {\r\n            return [0, 0];\r\n        }\r\n        else {\r\n            const regex = new RegExp(`(\\\\W|^)${escapeRegExpCharacters(param.label)}(?=\\\\W|$)`, 'g');\r\n            regex.test(signature.label);\r\n            const idx = regex.lastIndex - param.label.length;\r\n            return idx >= 0\r\n                ? [idx, regex.lastIndex]\r\n                : [0, 0];\r\n        }\r\n    }\r\n    next() {\r\n        this.editor.focus();\r\n        this.model.next();\r\n    }\r\n    previous() {\r\n        this.editor.focus();\r\n        this.model.previous();\r\n    }\r\n    cancel() {\r\n        this.model.cancel();\r\n    }\r\n    getDomNode() {\r\n        if (!this.domNodes) {\r\n            this.createParamaterHintDOMNodes();\r\n        }\r\n        return this.domNodes.element;\r\n    }\r\n    getId() {\r\n        return ParameterHintsWidget.ID;\r\n    }\r\n    trigger(context) {\r\n        this.model.trigger(context, 0);\r\n    }\r\n    updateMaxHeight() {\r\n        if (!this.domNodes) {\r\n            return;\r\n        }\r\n        const height = Math.max(this.editor.getLayoutInfo().height / 4, 250);\r\n        const maxHeight = `${height}px`;\r\n        this.domNodes.element.style.maxHeight = maxHeight;\r\n        const wrapper = this.domNodes.element.getElementsByClassName('phwrapper');\r\n        if (wrapper.length) {\r\n            wrapper[0].style.maxHeight = maxHeight;\r\n        }\r\n    }\r\n};\r\nParameterHintsWidget.ID = 'editor.widget.parameterHintsWidget';\r\nParameterHintsWidget = __decorate([\r\n    __param(1, IContextKeyService),\r\n    __param(2, IOpenerService),\r\n    __param(3, IModeService)\r\n], ParameterHintsWidget);\r\nexport { ParameterHintsWidget };\r\nregisterThemingParticipant((theme, collector) => {\r\n    const border = theme.getColor(editorHoverBorder);\r\n    if (border) {\r\n        const borderWidth = theme.type === ColorScheme.HIGH_CONTRAST ? 2 : 1;\r\n        collector.addRule(`.monaco-editor .parameter-hints-widget { border: ${borderWidth}px solid ${border}; }`);\r\n        collector.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${border.transparent(0.5)}; }`);\r\n        collector.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${border.transparent(0.5)}; }`);\r\n    }\r\n    const background = theme.getColor(editorHoverBackground);\r\n    if (background) {\r\n        collector.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${background}; }`);\r\n    }\r\n    const link = theme.getColor(textLinkForeground);\r\n    if (link) {\r\n        collector.addRule(`.monaco-editor .parameter-hints-widget a { color: ${link}; }`);\r\n    }\r\n    const foreground = theme.getColor(editorHoverForeground);\r\n    if (foreground) {\r\n        collector.addRule(`.monaco-editor .parameter-hints-widget { color: ${foreground}; }`);\r\n    }\r\n    const codeBackground = theme.getColor(textCodeBlockBackground);\r\n    if (codeBackground) {\r\n        collector.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${codeBackground}; }`);\r\n    }\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}