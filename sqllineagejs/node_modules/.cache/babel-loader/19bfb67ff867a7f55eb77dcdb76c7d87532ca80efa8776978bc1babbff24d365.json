{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nexport class ColorZone {\n  constructor(from, to, colorId) {\n    this.from = from | 0;\n    this.to = to | 0;\n    this.colorId = colorId | 0;\n  }\n  static compare(a, b) {\n    if (a.colorId === b.colorId) {\n      if (a.from === b.from) {\n        return a.to - b.to;\n      }\n      return a.from - b.from;\n    }\n    return a.colorId - b.colorId;\n  }\n}\n/**\r\n * A zone in the overview ruler\r\n */\nexport class OverviewRulerZone {\n  constructor(startLineNumber, endLineNumber, color) {\n    this.startLineNumber = startLineNumber;\n    this.endLineNumber = endLineNumber;\n    this.color = color;\n    this._colorZone = null;\n  }\n  static compare(a, b) {\n    if (a.color === b.color) {\n      if (a.startLineNumber === b.startLineNumber) {\n        return a.endLineNumber - b.endLineNumber;\n      }\n      return a.startLineNumber - b.startLineNumber;\n    }\n    return a.color < b.color ? -1 : 1;\n  }\n  setColorZone(colorZone) {\n    this._colorZone = colorZone;\n  }\n  getColorZones() {\n    return this._colorZone;\n  }\n}\nexport class OverviewZoneManager {\n  constructor(getVerticalOffsetForLine) {\n    this._getVerticalOffsetForLine = getVerticalOffsetForLine;\n    this._zones = [];\n    this._colorZonesInvalid = false;\n    this._lineHeight = 0;\n    this._domWidth = 0;\n    this._domHeight = 0;\n    this._outerHeight = 0;\n    this._pixelRatio = 1;\n    this._lastAssignedId = 0;\n    this._color2Id = Object.create(null);\n    this._id2Color = [];\n  }\n  getId2Color() {\n    return this._id2Color;\n  }\n  setZones(newZones) {\n    this._zones = newZones;\n    this._zones.sort(OverviewRulerZone.compare);\n  }\n  setLineHeight(lineHeight) {\n    if (this._lineHeight === lineHeight) {\n      return false;\n    }\n    this._lineHeight = lineHeight;\n    this._colorZonesInvalid = true;\n    return true;\n  }\n  setPixelRatio(pixelRatio) {\n    this._pixelRatio = pixelRatio;\n    this._colorZonesInvalid = true;\n  }\n  getDOMWidth() {\n    return this._domWidth;\n  }\n  getCanvasWidth() {\n    return this._domWidth * this._pixelRatio;\n  }\n  setDOMWidth(width) {\n    if (this._domWidth === width) {\n      return false;\n    }\n    this._domWidth = width;\n    this._colorZonesInvalid = true;\n    return true;\n  }\n  getDOMHeight() {\n    return this._domHeight;\n  }\n  getCanvasHeight() {\n    return this._domHeight * this._pixelRatio;\n  }\n  setDOMHeight(height) {\n    if (this._domHeight === height) {\n      return false;\n    }\n    this._domHeight = height;\n    this._colorZonesInvalid = true;\n    return true;\n  }\n  getOuterHeight() {\n    return this._outerHeight;\n  }\n  setOuterHeight(outerHeight) {\n    if (this._outerHeight === outerHeight) {\n      return false;\n    }\n    this._outerHeight = outerHeight;\n    this._colorZonesInvalid = true;\n    return true;\n  }\n  resolveColorZones() {\n    const colorZonesInvalid = this._colorZonesInvalid;\n    const lineHeight = Math.floor(this._lineHeight); // @perf\n    const totalHeight = Math.floor(this.getCanvasHeight()); // @perf\n    const outerHeight = Math.floor(this._outerHeight); // @perf\n    const heightRatio = totalHeight / outerHeight;\n    const halfMinimumHeight = Math.floor(4 /* MINIMUM_HEIGHT */ * this._pixelRatio / 2);\n    let allColorZones = [];\n    for (let i = 0, len = this._zones.length; i < len; i++) {\n      const zone = this._zones[i];\n      if (!colorZonesInvalid) {\n        const colorZone = zone.getColorZones();\n        if (colorZone) {\n          allColorZones.push(colorZone);\n          continue;\n        }\n      }\n      const y1 = Math.floor(heightRatio * this._getVerticalOffsetForLine(zone.startLineNumber));\n      const y2 = Math.floor(heightRatio * (this._getVerticalOffsetForLine(zone.endLineNumber) + lineHeight));\n      let ycenter = Math.floor((y1 + y2) / 2);\n      let halfHeight = y2 - ycenter;\n      if (halfHeight < halfMinimumHeight) {\n        halfHeight = halfMinimumHeight;\n      }\n      if (ycenter - halfHeight < 0) {\n        ycenter = halfHeight;\n      }\n      if (ycenter + halfHeight > totalHeight) {\n        ycenter = totalHeight - halfHeight;\n      }\n      const color = zone.color;\n      let colorId = this._color2Id[color];\n      if (!colorId) {\n        colorId = ++this._lastAssignedId;\n        this._color2Id[color] = colorId;\n        this._id2Color[colorId] = color;\n      }\n      const colorZone = new ColorZone(ycenter - halfHeight, ycenter + halfHeight, colorId);\n      zone.setColorZone(colorZone);\n      allColorZones.push(colorZone);\n    }\n    this._colorZonesInvalid = false;\n    allColorZones.sort(ColorZone.compare);\n    return allColorZones;\n  }\n}","map":{"version":3,"names":["ColorZone","constructor","from","to","colorId","compare","a","b","OverviewRulerZone","startLineNumber","endLineNumber","color","_colorZone","setColorZone","colorZone","getColorZones","OverviewZoneManager","getVerticalOffsetForLine","_getVerticalOffsetForLine","_zones","_colorZonesInvalid","_lineHeight","_domWidth","_domHeight","_outerHeight","_pixelRatio","_lastAssignedId","_color2Id","Object","create","_id2Color","getId2Color","setZones","newZones","sort","setLineHeight","lineHeight","setPixelRatio","pixelRatio","getDOMWidth","getCanvasWidth","setDOMWidth","width","getDOMHeight","getCanvasHeight","setDOMHeight","height","getOuterHeight","setOuterHeight","outerHeight","resolveColorZones","colorZonesInvalid","Math","floor","totalHeight","heightRatio","halfMinimumHeight","allColorZones","i","len","length","zone","push","y1","y2","ycenter","halfHeight"],"sources":["C:/Users/Administrator/Desktop/sqllineage-master/sqllineagejs/node_modules/monaco-editor/esm/vs/editor/common/view/overviewZoneManager.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport class ColorZone {\r\n    constructor(from, to, colorId) {\r\n        this.from = from | 0;\r\n        this.to = to | 0;\r\n        this.colorId = colorId | 0;\r\n    }\r\n    static compare(a, b) {\r\n        if (a.colorId === b.colorId) {\r\n            if (a.from === b.from) {\r\n                return a.to - b.to;\r\n            }\r\n            return a.from - b.from;\r\n        }\r\n        return a.colorId - b.colorId;\r\n    }\r\n}\r\n/**\r\n * A zone in the overview ruler\r\n */\r\nexport class OverviewRulerZone {\r\n    constructor(startLineNumber, endLineNumber, color) {\r\n        this.startLineNumber = startLineNumber;\r\n        this.endLineNumber = endLineNumber;\r\n        this.color = color;\r\n        this._colorZone = null;\r\n    }\r\n    static compare(a, b) {\r\n        if (a.color === b.color) {\r\n            if (a.startLineNumber === b.startLineNumber) {\r\n                return a.endLineNumber - b.endLineNumber;\r\n            }\r\n            return a.startLineNumber - b.startLineNumber;\r\n        }\r\n        return a.color < b.color ? -1 : 1;\r\n    }\r\n    setColorZone(colorZone) {\r\n        this._colorZone = colorZone;\r\n    }\r\n    getColorZones() {\r\n        return this._colorZone;\r\n    }\r\n}\r\nexport class OverviewZoneManager {\r\n    constructor(getVerticalOffsetForLine) {\r\n        this._getVerticalOffsetForLine = getVerticalOffsetForLine;\r\n        this._zones = [];\r\n        this._colorZonesInvalid = false;\r\n        this._lineHeight = 0;\r\n        this._domWidth = 0;\r\n        this._domHeight = 0;\r\n        this._outerHeight = 0;\r\n        this._pixelRatio = 1;\r\n        this._lastAssignedId = 0;\r\n        this._color2Id = Object.create(null);\r\n        this._id2Color = [];\r\n    }\r\n    getId2Color() {\r\n        return this._id2Color;\r\n    }\r\n    setZones(newZones) {\r\n        this._zones = newZones;\r\n        this._zones.sort(OverviewRulerZone.compare);\r\n    }\r\n    setLineHeight(lineHeight) {\r\n        if (this._lineHeight === lineHeight) {\r\n            return false;\r\n        }\r\n        this._lineHeight = lineHeight;\r\n        this._colorZonesInvalid = true;\r\n        return true;\r\n    }\r\n    setPixelRatio(pixelRatio) {\r\n        this._pixelRatio = pixelRatio;\r\n        this._colorZonesInvalid = true;\r\n    }\r\n    getDOMWidth() {\r\n        return this._domWidth;\r\n    }\r\n    getCanvasWidth() {\r\n        return this._domWidth * this._pixelRatio;\r\n    }\r\n    setDOMWidth(width) {\r\n        if (this._domWidth === width) {\r\n            return false;\r\n        }\r\n        this._domWidth = width;\r\n        this._colorZonesInvalid = true;\r\n        return true;\r\n    }\r\n    getDOMHeight() {\r\n        return this._domHeight;\r\n    }\r\n    getCanvasHeight() {\r\n        return this._domHeight * this._pixelRatio;\r\n    }\r\n    setDOMHeight(height) {\r\n        if (this._domHeight === height) {\r\n            return false;\r\n        }\r\n        this._domHeight = height;\r\n        this._colorZonesInvalid = true;\r\n        return true;\r\n    }\r\n    getOuterHeight() {\r\n        return this._outerHeight;\r\n    }\r\n    setOuterHeight(outerHeight) {\r\n        if (this._outerHeight === outerHeight) {\r\n            return false;\r\n        }\r\n        this._outerHeight = outerHeight;\r\n        this._colorZonesInvalid = true;\r\n        return true;\r\n    }\r\n    resolveColorZones() {\r\n        const colorZonesInvalid = this._colorZonesInvalid;\r\n        const lineHeight = Math.floor(this._lineHeight); // @perf\r\n        const totalHeight = Math.floor(this.getCanvasHeight()); // @perf\r\n        const outerHeight = Math.floor(this._outerHeight); // @perf\r\n        const heightRatio = totalHeight / outerHeight;\r\n        const halfMinimumHeight = Math.floor(4 /* MINIMUM_HEIGHT */ * this._pixelRatio / 2);\r\n        let allColorZones = [];\r\n        for (let i = 0, len = this._zones.length; i < len; i++) {\r\n            const zone = this._zones[i];\r\n            if (!colorZonesInvalid) {\r\n                const colorZone = zone.getColorZones();\r\n                if (colorZone) {\r\n                    allColorZones.push(colorZone);\r\n                    continue;\r\n                }\r\n            }\r\n            const y1 = Math.floor(heightRatio * (this._getVerticalOffsetForLine(zone.startLineNumber)));\r\n            const y2 = Math.floor(heightRatio * (this._getVerticalOffsetForLine(zone.endLineNumber) + lineHeight));\r\n            let ycenter = Math.floor((y1 + y2) / 2);\r\n            let halfHeight = (y2 - ycenter);\r\n            if (halfHeight < halfMinimumHeight) {\r\n                halfHeight = halfMinimumHeight;\r\n            }\r\n            if (ycenter - halfHeight < 0) {\r\n                ycenter = halfHeight;\r\n            }\r\n            if (ycenter + halfHeight > totalHeight) {\r\n                ycenter = totalHeight - halfHeight;\r\n            }\r\n            const color = zone.color;\r\n            let colorId = this._color2Id[color];\r\n            if (!colorId) {\r\n                colorId = (++this._lastAssignedId);\r\n                this._color2Id[color] = colorId;\r\n                this._id2Color[colorId] = color;\r\n            }\r\n            const colorZone = new ColorZone(ycenter - halfHeight, ycenter + halfHeight, colorId);\r\n            zone.setColorZone(colorZone);\r\n            allColorZones.push(colorZone);\r\n        }\r\n        this._colorZonesInvalid = false;\r\n        allColorZones.sort(ColorZone.compare);\r\n        return allColorZones;\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}