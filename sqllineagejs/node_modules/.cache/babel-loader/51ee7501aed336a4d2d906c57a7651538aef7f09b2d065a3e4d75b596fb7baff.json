{"ast":null,"code":"import React,{useEffect}from\"react\";import Typography from\"@material-ui/core/Typography\";import TreeView from\"@material-ui/lab/TreeView\";import TreeItem from\"@material-ui/lab/TreeItem\";import ExpandMoreIcon from\"@material-ui/icons/ExpandMore\";import ChevronRightIcon from\"@material-ui/icons/ChevronRight\";import FolderIcon from\"@material-ui/icons/Folder\";import DescriptionIcon from\"@material-ui/icons/Description\";import{makeStyles}from\"@material-ui/core\";import{useDispatch,useSelector}from\"react-redux\";import{DirectoryAPI,selectDirectory,setOpenNonSQLWarning}from\"./directorySlice\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({\"@global\":{\".MuiTreeItem-root.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label\":{backgroundColor:\"white\"}},directory:{marginLeft:theme.spacing(0.2)},labelRoot:{display:'flex',alignItems:'center',padding:theme.spacing(0.1,0)},labelIcon:{marginRight:theme.spacing(0.2)},labelText:{fontWeight:'inherit',flexGrow:1}}));export default function DirectoryTreeItem(props){const classes=useStyles();const history=useHistory();const dispatch=useDispatch();const directoryState=useSelector(selectDirectory);const[childNodes,setChildNodes]=React.useState(null);const[expanded,setExpanded]=React.useState([]);useEffect(()=>{if(props.is_root){var _directoryState$conte;setChildNodes(((_directoryState$conte=directoryState.content.children)!==null&&_directoryState$conte!==void 0?_directoryState$conte:[]).map(node=>/*#__PURE__*/_jsx(DirectoryTreeItem,{id:node.id,name:node.name,is_dir:node.is_dir,is_root:false})));setExpanded([props.id]);}},[directoryState.content.children,props.id,props.is_root]);const handleSelect=()=>{if(!props.is_dir){if(props.name.endsWith(\".sql\")){history.push(\"/?f=\".concat(props.id));}else{dispatch(setOpenNonSQLWarning(true));}}};const handleToggle=(event,nodes)=>{const expandingNodes=nodes.filter(x=>!expanded.includes(x));setExpanded(nodes);if(expandingNodes[0]){const childId=expandingNodes[0];DirectoryAPI({\"d\":childId}).then(result=>setChildNodes(result.children.map(node=>/*#__PURE__*/_jsx(DirectoryTreeItem,{id:node.id,name:node.name,is_dir:node.is_dir,is_root:false}))));}};return/*#__PURE__*/_jsx(TreeView,{className:classes.directory,defaultCollapseIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),defaultExpandIcon:/*#__PURE__*/_jsx(ChevronRightIcon,{}),expanded:expanded,onNodeSelect:handleSelect,onNodeToggle:handleToggle,children:/*#__PURE__*/_jsx(TreeItem,{nodeId:props.id,label:/*#__PURE__*/_jsxs(\"div\",{className:classes.labelRoot,children:[props.is_dir?/*#__PURE__*/_jsx(FolderIcon,{color:\"action\",className:classes.labelIcon}):/*#__PURE__*/_jsx(DescriptionIcon,{color:\"action\",className:classes.labelIcon}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",className:classes.labelText,children:props.name})]}),children:props.is_dir&&(childNodes||[/*#__PURE__*/_jsx(\"div\",{},\"stub\")])},props.id)});}","map":{"version":3,"names":["React","useEffect","Typography","TreeView","TreeItem","ExpandMoreIcon","ChevronRightIcon","FolderIcon","DescriptionIcon","makeStyles","useDispatch","useSelector","DirectoryAPI","selectDirectory","setOpenNonSQLWarning","useHistory","jsx","_jsx","jsxs","_jsxs","useStyles","theme","backgroundColor","directory","marginLeft","spacing","labelRoot","display","alignItems","padding","labelIcon","marginRight","labelText","fontWeight","flexGrow","DirectoryTreeItem","props","classes","history","dispatch","directoryState","childNodes","setChildNodes","useState","expanded","setExpanded","is_root","_directoryState$conte","content","children","map","node","id","name","is_dir","handleSelect","endsWith","push","concat","handleToggle","event","nodes","expandingNodes","filter","x","includes","childId","then","result","className","defaultCollapseIcon","defaultExpandIcon","onNodeSelect","onNodeToggle","nodeId","label","color","variant"],"sources":["C:/Users/Administrator/Desktop/sqllineage-master/sqllineagejs/src/features/directory/DirectoryTreeItem.js"],"sourcesContent":["import React, {useEffect} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport FolderIcon from \"@material-ui/icons/Folder\";\nimport DescriptionIcon from \"@material-ui/icons/Description\";\nimport {makeStyles} from \"@material-ui/core\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {DirectoryAPI, selectDirectory, setOpenNonSQLWarning} from \"./directorySlice\";\nimport {useHistory} from \"react-router-dom\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  \"@global\": {\n    \".MuiTreeItem-root.Mui-selected > .MuiTreeItem-content .MuiTreeItem-label\": {\n      backgroundColor: \"white\"\n    },\n  },\n  directory: {\n    marginLeft: theme.spacing(0.2)\n  },\n  labelRoot: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0.1, 0),\n  },\n  labelIcon: {\n    marginRight: theme.spacing(0.2),\n  },\n  labelText: {\n    fontWeight: 'inherit',\n    flexGrow: 1,\n  },\n}));\n\n\nexport default function DirectoryTreeItem(props) {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const directoryState = useSelector(selectDirectory);\n  const [childNodes, setChildNodes] = React.useState(null);\n  const [expanded, setExpanded] = React.useState([]);\n\n  useEffect(() => {\n    if (props.is_root) {\n      setChildNodes((directoryState.content.children ?? []).map(\n        node => <DirectoryTreeItem id={node.id} name={node.name} is_dir={node.is_dir} is_root={false}/>)\n      )\n      setExpanded([props.id])\n    }\n  }, [directoryState.content.children, props.id, props.is_root])\n\n  const handleSelect = () => {\n    if (!props.is_dir) {\n      if (props.name.endsWith(\".sql\")) {\n        history.push(`/?f=${props.id}`);\n      } else {\n        dispatch(setOpenNonSQLWarning(true))\n      }\n    }\n  };\n\n  const handleToggle = (event, nodes) => {\n    const expandingNodes = nodes.filter(x => !expanded.includes(x));\n    setExpanded(nodes);\n    if (expandingNodes[0]) {\n      const childId = expandingNodes[0];\n      DirectoryAPI({\"d\": childId}).then(result =>\n        setChildNodes(\n          result.children.map(node => <DirectoryTreeItem id={node.id} name={node.name} is_dir={node.is_dir}\n                                                         is_root={false}/>)\n        )\n      );\n    }\n  };\n\n  return (\n    <TreeView\n      className={classes.directory}\n      defaultCollapseIcon={<ExpandMoreIcon/>}\n      defaultExpandIcon={<ChevronRightIcon/>}\n      expanded={expanded}\n      onNodeSelect={handleSelect}\n      onNodeToggle={handleToggle}\n    >\n      <TreeItem\n        key={props.id}\n        nodeId={props.id}\n        label={\n          <div className={classes.labelRoot}>\n            {props.is_dir ? <FolderIcon color=\"action\" className={classes.labelIcon}/> :\n              <DescriptionIcon color=\"action\" className={classes.labelIcon}/>}\n            <Typography variant=\"body2\" className={classes.labelText}>\n              {props.name}\n            </Typography>\n          </div>\n        }\n      >\n        {props.is_dir && (childNodes || [<div key=\"stub\"/>])}\n      </TreeItem>\n    </TreeView>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}